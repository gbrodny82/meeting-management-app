{"file_contents":{"SECURITY.md":{"content":"# Security Implementation Guide\n\n## Data Encryption Overview\n\nYour meeting tracker application now includes comprehensive encryption for all personally identifiable information (PII) stored in the database. This ensures that sensitive data remains protected even if the database is compromised.\n\n## What Data is Encrypted\n\n### Employee Data\n- **Name**: Employee names are encrypted to protect identity\n- **Role, Department, Relationship**: Non-sensitive fields remain unencrypted for filtering/search\n\n### Meeting Data  \n- **Employee Name**: Encrypted to protect participant identity\n- **Title**: Meeting titles are encrypted as they may contain sensitive information\n- **Notes**: All meeting notes are encrypted to protect confidential discussions\n- **Date**: Dates remain unencrypted for scheduling functionality\n\n### Action Items\n- **Text**: Action item descriptions are encrypted to protect task details\n- **Assignee**: Assignee names are encrypted to protect identity\n- **Employee Name**: Associated employee names are encrypted\n- **Status, Priority**: Non-sensitive operational fields remain unencrypted\n\n### User Data\n- **Email**: User email addresses are encrypted\n- **First Name**: User first names are encrypted  \n- **Last Name**: User last names are encrypted\n- **Telegram Chat ID**: Telegram chat IDs are encrypted to protect communication privacy\n- **Profile Image URL**: URLs remain unencrypted as they don't contain PII\n- **Role, Approval Status**: Operational fields remain unencrypted\n\n## How Encryption Works\n\n### Encryption Method\n- **Algorithm**: AES (Advanced Encryption Standard)\n- **Library**: CryptoJS for robust, tested encryption\n- **Key Management**: Environment variable `ENCRYPTION_KEY`\n- **Prefix System**: Encrypted data is prefixed with `ENC:` for identification\n\n### Backward Compatibility\n- Existing unencrypted data continues to work\n- Data is encrypted only when modified\n- Gradual migration prevents service disruption\n\n### Security Features\n- **Automatic Encryption**: All sensitive data is encrypted before database storage\n- **Automatic Decryption**: Data is decrypted when retrieved from database\n- **Double-Encryption Protection**: Prevents accidentally encrypting already encrypted data\n- **Error Handling**: Graceful fallback if decryption fails\n\n## Environment Variables\n\n### Required for Production\n```bash\nENCRYPTION_KEY=your-strong-32-character-key-here\n```\n\n### Security Recommendations\n- Use a strong, randomly generated 32+ character key\n- Store the key securely (not in code repository)\n- Consider using a key management service for production\n- Rotate encryption keys periodically with proper migration\n\n## Migration Process\n\n### For Existing Data\n1. Set the `ENCRYPTION_KEY` environment variable\n2. Run the migration script: `npx tsx server/migrate-encryption.ts`\n3. Verify data integrity after migration\n\n### For New Installations\n- Encryption is automatically applied to all new data\n- No migration needed for fresh installations\n\n## Security Best Practices\n\n### Development\n- Default encryption key is used with warning message\n- All sensitive operations are logged for debugging\n- TypeScript ensures type safety throughout encryption process\n\n### Production\n- **Critical**: Set a strong `ENCRYPTION_KEY` environment variable\n- Monitor decryption errors in application logs\n- Regular security audits of encryption implementation\n- Consider database-level encryption as additional layer\n\n### Key Management\n- Never commit encryption keys to version control\n- Use environment variables or secure key management systems\n- Have a key rotation strategy for long-term security\n- Backup encryption keys securely and separately\n\n## Compliance Benefits\n\n### Data Protection\n- **GDPR Compliance**: Encrypted PII helps meet data protection requirements\n- **HIPAA Consideration**: Strong encryption supports healthcare data protection\n- **SOC 2**: Encryption controls support security compliance frameworks\n\n### Risk Mitigation\n- **Data Breach Protection**: Encrypted data is useless without encryption keys\n- **Insider Threat Mitigation**: Database administrators cannot read sensitive data\n- **Audit Trail**: All encryption/decryption operations are logged\n\n## Performance Considerations\n\n### Optimization Features\n- **Lazy Encryption**: Data is only encrypted when modified\n- **Efficient Operations**: Bulk operations minimize encryption overhead\n- **Selective Encryption**: Only truly sensitive fields are encrypted\n\n### Monitoring\n- Watch for increased response times on data-heavy operations\n- Monitor encryption/decryption error rates\n- Track database storage requirements (encrypted data may be larger)\n\n## Troubleshooting\n\n### Common Issues\n1. **Decryption Errors**: Check `ENCRYPTION_KEY` environment variable\n2. **Empty Decrypted Data**: Verify encryption key matches what was used for encryption\n3. **Performance Issues**: Consider database indexing for non-encrypted searchable fields\n\n### Recovery Procedures\n- If encryption key is lost, data cannot be recovered\n- Maintain secure backups of encryption keys\n- Test key rotation procedures in staging environment\n\n## Future Enhancements\n\n### Potential Improvements\n- **Database-level encryption** for additional security layer\n- **Field-level encryption keys** for more granular control\n- **Key rotation automation** for enhanced security\n- **Search capabilities** on encrypted data using homomorphic encryption\n\nThis encryption implementation provides enterprise-grade security for your meeting management application while maintaining usability and performance.","size_bytes":5571},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"replit.md":{"content":"# Meeting Tracker Application\n\n## Overview\n\nThis is a full-stack meeting tracker application built with React, Express.js, and PostgreSQL. The application helps managers track meetings with team members, manage action items, and maintain team information. It features a modern UI built with shadcn/ui components and provides a comprehensive dashboard for meeting management.\n\n**Security Update**: The application now includes comprehensive data encryption for all personally identifiable information (PII) stored in the database, ensuring sensitive data remains protected even if the database is compromised.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\nThe application follows a typical full-stack architecture with clear separation between frontend, backend, and database layers:\n\n- **Frontend**: React with TypeScript, using Vite as the build tool\n- **Backend**: Express.js server with TypeScript\n- **Database**: PostgreSQL with Drizzle ORM\n- **Styling**: Tailwind CSS with shadcn/ui components\n- **State Management**: React Query for server state, React Context for local state\n\n## Key Components\n\n### Frontend Architecture\n- **Framework**: React 18 with TypeScript\n- **Build Tool**: Vite with hot module replacement\n- **Routing**: Wouter for client-side routing\n- **UI Library**: shadcn/ui components built on Radix UI primitives\n- **Styling**: Tailwind CSS with CSS variables for theming\n- **State Management**: \n  - TanStack React Query for server state management\n  - React Context API for global application state (search, filters)\n\n### Backend Architecture\n- **Framework**: Express.js with TypeScript\n- **Database ORM**: Drizzle ORM for type-safe database operations\n- **API Design**: RESTful APIs with proper error handling\n- **Middleware**: Request logging, JSON parsing, and error handling\n- **Development**: Hot reloading with tsx\n\n### Database Schema\nThe application uses three main entities:\n- **Employees**: Team member information (name, role, department, relationship)\n- **Meetings**: Meeting records with notes and employee associations\n- **Actions**: Action items linked to meetings with status tracking\n\n### UI Components Structure\n- **Layout**: Main layout with sidebar navigation and top bar\n- **Pages**: Dashboard, Actions, Meetings, Team, Settings\n- **Components**: Reusable components for forms, cards, and data display\n- **Design System**: Consistent styling with shadcn/ui components\n\n## Data Flow\n\n1. **Client Requests**: Frontend makes API calls using React Query\n2. **API Processing**: Express server handles requests and validates data\n3. **Database Operations**: Drizzle ORM executes type-safe database queries\n4. **Response Handling**: Data flows back through the API to the frontend\n5. **State Updates**: React Query manages caching and state synchronization\n\nThe application uses optimistic updates for better user experience and automatic cache invalidation to keep data fresh.\n\n## External Dependencies\n\n### Core Dependencies\n- **@neondatabase/serverless**: Serverless PostgreSQL driver for Neon database\n- **drizzle-orm**: Type-safe ORM for database operations\n- **@tanstack/react-query**: Server state management and caching\n- **wouter**: Lightweight client-side routing\n- **@radix-ui/***: Accessible UI primitives for components\n\n### Development Tools\n- **Vite**: Fast build tool with HMR\n- **TypeScript**: Type safety across the application\n- **Tailwind CSS**: Utility-first CSS framework\n- **drizzle-kit**: Database migrations and schema management\n\n### Storage Strategy\nThe application currently includes a memory storage implementation (MemStorage) as a fallback, but is configured to use PostgreSQL as the primary database through Drizzle ORM.\n\n**Data Security**: All sensitive data is automatically encrypted before storage using AES encryption:\n- Employee names, meeting titles/notes, action item text, user PII\n- Backward-compatible encryption that works with existing data\n- Automatic encryption/decryption handled by the storage layer\n- Environment variable `ENCRYPTION_KEY` controls encryption (defaults to dev key with warning)\n\n## Deployment Strategy\n\nThe application is designed for deployment on platforms like Replit:\n\n- **Build Process**: Vite builds the frontend, esbuild bundles the backend\n- **Environment**: NODE_ENV-based configuration\n- **Database**: Uses DATABASE_URL environment variable for PostgreSQL connection\n- **Static Assets**: Frontend builds to dist/public, served by Express in production\n- **Development**: Concurrent development with Vite dev server and Express API\n\nThe application includes Replit-specific configurations and development tools for seamless deployment and development experience.\n\n## Recent Changes\n\n**January 27, 2025 - Data Security Implementation**\n- âœ… Added comprehensive AES encryption for all PII data\n- âœ… Implemented backward-compatible encryption system with ENC: prefix\n- âœ… Created automated encryption/decryption in storage layer\n- âœ… Added data migration script for existing databases\n- âœ… Documented security implementation in SECURITY.md\n- âœ… Environment-based encryption key management\n- âœ… Graceful error handling for decryption failures\n\n**Security Features Added:**\n- Employee names, meeting details, action items, and user data encryption\n- Automatic encryption on data creation/update\n- Transparent decryption on data retrieval\n- Migration script for encrypting existing data\n- Comprehensive security documentation\n\n**January 27, 2025 - Meeting Action Integration**\n- âœ… Added \"Add Action\" functionality within meeting cards\n- âœ… Created AddActionForm component with team member dropdown\n- âœ… Assignee field now includes \"Me\" option and all configured team members\n- âœ… Actions created from meetings are properly linked and tracked\n- âœ… Enhanced meeting cards with action item management interface\n\n**January 27, 2025 - Smart Action Detection & Inline Creation**\n- âœ… Implemented intelligent action pattern detection in meeting notes\n- âœ… Auto-detects TODO:, ACTION:, [ ], @username, Follow up: patterns\n- âœ… One-click conversion from detected patterns to draft actions\n- âœ… Inline action editing with assignee and priority selection\n- âœ… Draft actions saved together with meeting in single transaction\n- âœ… Smart UI showing action count in save button and status indicators\n- âœ… Enhanced user experience with real-time pattern recognition\n\n**January 27, 2025 - Telegram Bot Action Creation**\n- âœ… Added /newaction command for creating action items via Telegram\n- âœ… Implemented interactive conversation flow (task â†’ assignee â†’ priority)\n- âœ… Added proper user identification for action initiator tracking\n- âœ… Enhanced bot with /help, /cancel commands for better UX\n- âœ… Fixed employeeName to reflect actual action creator instead of random employee\n- âœ… Integrated with user-scoped storage for multi-tenant support\n\n**January 28, 2025 - AI-Powered Meeting Insights**\n- âœ… Created comprehensive OpenAI GPT-4o integration for meeting analysis\n- âœ… Built AI insights components with sentiment analysis and effectiveness scoring\n- âœ… Added meeting insights to individual meeting cards with tabbed interface\n- âœ… Created team insights dashboard for high-level team health analysis\n- âœ… Implemented proper error handling for API quota limits and rate limiting\n- âœ… Added detailed error messages with guidance for OpenAI billing issues\n- âœ… Fixed Telegram bot 409 polling conflicts with proper singleton handling\n- âœ… Temporarily disabled Telegram bot to resolve persistent polling issues\n\n**January 28, 2025 - Multi-Tenancy & Google Gemini Integration**\n- âœ… Successfully migrated AI insights from OpenAI to Google Gemini 2.5 Flash\n- âœ… Fixed critical multi-tenancy security vulnerabilities in PostgreSQL storage\n- âœ… Implemented proper user isolation for all CRUD operations (meetings, employees, actions)\n- âœ… Added user ownership validation to prevent cross-user data access\n- âœ… Enhanced action visibility to show actions assigned to users from other tenants\n- âœ… Fixed Add Action form validation issue preventing action creation\n- âœ… Updated error messaging to reflect Google AI instead of OpenAI services\n\n**January 28, 2025 - Employee-to-User Linking System**\n- âœ… Added `linkedUserId` field to employees database schema for system user connections\n- âœ… Implemented linkEmployeeToUser method in both memory and PostgreSQL storage layers\n- âœ… Created secure admin-only API endpoint `/api/admin/employees/:id/link` for linking operations\n- âœ… Built EmployeeUserLink UI component with dropdown selection and visual indicators\n- âœ… Integrated linking interface into Team Members page with admin-only visibility\n- âœ… Added proper user selection from approved system users with Link/Unlink functionality\n- âœ… Successfully tested linking functionality with live data (employee \"Shlomi B\" linked to system user)\n- âœ… Confirmed proper security restrictions - only admin users can access linking features\n\n**January 28, 2025 - Critical Action Assignment Bug Fix**\n- âœ… Fixed critical issue where linked employees couldn't see assigned actions\n- âœ… Enhanced action creation to automatically populate `assignedToUserId` field when assigning to linked employees\n- âœ… Updated both PostgreSQL and memory storage implementations for proper user linking\n- âœ… Added proper lookup logic to connect employee assignments to system user IDs\n- âœ… Verified linked employees can now see actions assigned to them in their dashboard\n\n**January 28, 2025 - Telegram Bot Restoration**\n- âœ… Re-enabled Telegram bot functionality after resolving polling conflicts\n- âœ… Enhanced error handling for bot initialization and polling status\n- âœ… Fixed test notification endpoints to check both bot existence and polling status\n- âœ… Successfully restored Telegram notifications and interactions for action management\n- âœ… Confirmed bot can handle /newaction command and daily notification scheduling\n\n**January 29, 2025 - Meeting Deletion Feature**\n- âœ… Added delete meeting functionality with confirmation dialog\n- âœ… Implemented secure DELETE API endpoint for meetings\n- âœ… Created confirmation alert dialog to prevent accidental deletions\n- âœ… Added dropdown menu to meeting cards with delete option\n- âœ… Enhanced useDeleteMeeting hook with proper cache invalidation\n- âœ… Includes warning about deletion of associated action items\n\n**January 29, 2025 - Telegram Bot Fix**\n- âœ… Re-enabled Telegram bot functionality after being disabled\n- âœ… Improved error handling for polling conflicts\n- âœ… Added better startup error handling with conflict detection\n- âœ… Enhanced notification system with clearer error messages\n- âœ… Successfully restored bot initialization and command setup\n- âœ… Fixed rate limiting issues that were preventing app loading\n\n**January 29, 2025 - Advanced Notification Scheduling System**\n- âœ… Added comprehensive notification schedules database table with flexible configuration\n- âœ… Created notification schedule management UI with preset patterns and custom options\n- âœ… Built API endpoints for full CRUD operations on notification schedules\n- âœ… Added dedicated \"Schedules\" tab to Settings page with intuitive interface\n- âœ… Implemented schedule presets (Morning Update, End of Day, Weekly Planning, etc.)\n- âœ… Added custom cron pattern support for advanced scheduling\n- âœ… Integrated content selection options (actions, meetings, stats, custom messages)\n- âœ… Enhanced Telegram bot with automatic conflict resolution and polling restart\n- âœ… Fixed Telegram bot polling conflicts with improved error handling and retry logic\n\n**New Notification Features:**\n- Multiple notification schedules per user with individual enable/disable\n- Preset schedule templates for common use cases\n- Custom cron pattern support for advanced users\n- Content filtering options (choose what to include in notifications)\n- Custom message support for personalized notifications\n- Real-time schedule management with instant updates\n- Automatic bot recovery from polling conflicts\n\n**January 29, 2025 - Gmail SMTP Email Integration**\n- âœ… Implemented comprehensive Gmail SMTP email functionality using nodemailer\n- âœ… Added secure email configuration with encrypted password storage\n- âœ… Created Email Settings tab in Settings page with Gmail App Password setup\n- âœ… Added email recipient field to meeting forms for automatic summary delivery\n- âœ… Built professional HTML email templates for meeting notes with formatted content\n- âœ… Integrated automatic email sending with meeting creation workflow\n- âœ… Added test email functionality to verify Gmail configuration before use\n- âœ… Enhanced PostgreSQL storage with encrypted email credentials support\n- âœ… Implemented error handling that preserves meeting creation if email fails\n\n**Email Features Added:**\n- Gmail SMTP integration with App Password authentication\n- Secure AES encryption for email credentials storage\n- Professional HTML email templates with meeting details and participant info\n- Automatic email delivery when creating meetings with specified recipients\n- Test email functionality for configuration validation\n- Email settings management with show/hide password toggle\n- Multi-tenant email support with user-specific configurations\n- Comprehensive error handling and logging for email operations","size_bytes":13397},"security-scan.md":{"content":"# Security Scan Report - Meeting Tracker Application\n\n## Scan Overview\n**Date**: January 27, 2025  \n**Application**: Meeting Tracker  \n**Scan Type**: Comprehensive Security Assessment  \n\n## Executive Summary\nThe application has strong foundational security with recent encryption implementation. Several areas require attention for production deployment.\n\n## Findings\n\n### ðŸ”´ CRITICAL Issues\n\n#### 1. Default Encryption Key in Development\n- **Risk**: High\n- **Location**: `server/encryption.ts`\n- **Issue**: Using default encryption key with warning message\n- **Impact**: All encrypted data could be compromised if default key is used in production\n- **Recommendation**: Implement mandatory encryption key validation\n\n#### 2. Session Security Configuration\n- **Risk**: High  \n- **Location**: `server/replitAuth.ts`\n- **Issue**: Session cookies set to `secure: true` but may cause issues in development\n- **Impact**: Authentication failures in non-HTTPS environments\n- **Recommendation**: Environment-based cookie security settings\n\n### ðŸŸ¡ HIGH Issues\n\n#### 3. Database Connection String Exposure\n- **Risk**: High\n- **Location**: `server/db.ts`\n- **Issue**: Database URL logged in error messages\n- **Impact**: Potential credential exposure in logs\n- **Recommendation**: Sanitize error messages\n\n#### 4. Telegram Bot Token Handling\n- **Risk**: Medium-High\n- **Location**: `server/telegram.ts`\n- **Issue**: Bot token validation insufficient\n- **Impact**: Potential service disruption if invalid token provided\n- **Recommendation**: Enhanced token validation\n\n#### 5. User Input Validation\n- **Risk**: Medium-High\n- **Location**: Multiple API routes\n- **Issue**: Limited input sanitization beyond Zod validation\n- **Impact**: Potential injection attacks\n- **Recommendation**: Implement comprehensive input sanitization\n\n### ðŸŸ  MEDIUM Issues\n\n#### 6. Error Information Disclosure\n- **Risk**: Medium\n- **Location**: `server/routes.ts`\n- **Issue**: Generic error messages may leak system information\n- **Impact**: Information disclosure to attackers\n- **Recommendation**: Implement structured error handling\n\n#### 7. Rate Limiting Missing\n- **Risk**: Medium\n- **Location**: All API endpoints\n- **Issue**: No rate limiting implemented\n- **Impact**: Potential DoS attacks and abuse\n- **Recommendation**: Implement rate limiting middleware\n\n#### 8. CORS Configuration\n- **Risk**: Medium\n- **Location**: Express server setup\n- **Issue**: CORS not explicitly configured\n- **Impact**: Potential cross-origin attacks\n- **Recommendation**: Implement explicit CORS policy\n\n### ðŸŸ¢ LOW Issues\n\n#### 9. Logging Sensitivity\n- **Risk**: Low\n- **Location**: `server/index.ts`\n- **Issue**: API responses logged may contain sensitive data\n- **Impact**: Sensitive data in application logs\n- **Recommendation**: Implement log sanitization\n\n#### 10. Dependency Vulnerabilities\n- **Risk**: Low\n- **Location**: `package.json`\n- **Issue**: Some dependencies may have known vulnerabilities\n- **Impact**: Potential security vulnerabilities\n- **Recommendation**: Regular dependency updates and audits\n\n## Positive Security Implementations\n\n### âœ… Strengths\n1. **Data Encryption**: Comprehensive AES encryption for PII data\n2. **Authentication**: OAuth2/OIDC integration with Replit Auth\n3. **Authorization**: Role-based access control (admin/user roles)\n4. **Input Validation**: Zod schema validation for API inputs\n5. **SQL Injection Protection**: Using Drizzle ORM with parameterized queries\n6. **Session Management**: Secure session handling with PostgreSQL store\n7. **Environment Variables**: Sensitive configuration externalized\n8. **TypeScript**: Type safety reduces common vulnerabilities\n\n## Compliance Assessment\n\n### Data Protection (GDPR/Privacy)\n- âœ… PII encryption implemented\n- âœ… User consent for notifications\n- âš ï¸  Data retention policies not defined\n- âš ï¸  Data export functionality missing\n\n### Security Standards\n- âœ… Authentication and authorization\n- âœ… Data encryption at rest\n- âš ï¸  Transport encryption (HTTPS enforcement needed)\n- âš ï¸  Audit logging not comprehensive\n\n## Immediate Action Items\n\n### âœ… Priority 1 (COMPLETED)\n1. âœ… Implemented mandatory encryption key validation\n2. âœ… Added environment-based session security settings\n3. âœ… Added comprehensive error handling with secure error handler\n4. âœ… Implemented input sanitization middleware\n\n### âœ… Priority 2 (COMPLETED)\n1. âœ… Added rate limiting to all API endpoints (auth, api, strict)\n2. âœ… Implemented security headers with Helmet\n3. âœ… Enhanced error handling with structured responses\n4. âœ… Added audit logging for admin operations\n\n### âš ï¸ Priority 3 (RECOMMENDED)\n1. ðŸ”„ Implement comprehensive audit logging across all operations\n2. ðŸ”„ Add log sanitization for sensitive data\n3. ðŸ”„ Create security monitoring dashboard\n4. ðŸ”„ Regular dependency vulnerability scanning (15 vulnerabilities found)\n\n## Security Monitoring Recommendations\n\n### Logging Strategy\n```javascript\n// Recommended security event logging\nconst securityEvents = [\n  'authentication_failure',\n  'authorization_failure', \n  'encryption_failure',\n  'unusual_access_patterns',\n  'admin_actions'\n];\n```\n\n### Metrics to Monitor\n- Failed login attempts per IP\n- API rate limit violations\n- Encryption/decryption failures\n- Unauthorized access attempts\n- Admin role changes\n\n## Next Steps\n1. Address critical and high-risk issues immediately\n2. Implement security monitoring and alerting\n3. Conduct regular security reviews\n4. Establish incident response procedures\n5. Create security documentation for team\n\n## Security Implementation Status\n\n### âœ… IMPLEMENTED SECURITY MEASURES\n1. **Critical Encryption Protection**: Mandatory encryption key validation prevents production deployment with weak keys\n2. **Rate Limiting**: Multi-tier rate limiting (auth: 5/15min, api: 100/min, admin: 20/min)\n3. **Security Headers**: Comprehensive CSP, XSS protection, and security headers via Helmet\n4. **Session Security**: Environment-based secure cookies with CSRF protection\n5. **Input Sanitization**: XSS prevention and validation error handling\n6. **Audit Logging**: Security event logging for admin operations and unauthorized access\n7. **Secure Error Handling**: Production-safe error messages that don't leak sensitive information\n\n### âš ï¸ REMAINING RECOMMENDATIONS\n1. **Dependency Updates**: Address 15 npm vulnerabilities (2 critical, 12 moderate, 1 low)\n2. **Data Retention Policies**: Implement GDPR-compliant data retention rules\n3. **Security Monitoring**: Real-time security event monitoring and alerting\n4. **Regular Security Audits**: Scheduled vulnerability assessments\n\n## Conclusion\nThe application now has enterprise-grade security with comprehensive protection against common attack vectors. Critical vulnerabilities have been addressed, and the encryption implementation provides strong data protection. The remaining items are enhancement recommendations for long-term security maintenance.","size_bytes":6975},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"var(--background)\",\n        foreground: \"var(--foreground)\",\n        card: {\n          DEFAULT: \"var(--card)\",\n          foreground: \"var(--card-foreground)\",\n        },\n        popover: {\n          DEFAULT: \"var(--popover)\",\n          foreground: \"var(--popover-foreground)\",\n        },\n        primary: {\n          DEFAULT: \"var(--primary)\",\n          foreground: \"var(--primary-foreground)\",\n        },\n        secondary: {\n          DEFAULT: \"var(--secondary)\",\n          foreground: \"var(--secondary-foreground)\",\n        },\n        muted: {\n          DEFAULT: \"var(--muted)\",\n          foreground: \"var(--muted-foreground)\",\n        },\n        accent: {\n          DEFAULT: \"var(--accent)\",\n          foreground: \"var(--accent-foreground)\",\n        },\n        destructive: {\n          DEFAULT: \"var(--destructive)\",\n          foreground: \"var(--destructive-foreground)\",\n        },\n        border: \"var(--border)\",\n        input: \"var(--input)\",\n        ring: \"var(--ring)\",\n        chart: {\n          \"1\": \"var(--chart-1)\",\n          \"2\": \"var(--chart-2)\",\n          \"3\": \"var(--chart-3)\",\n          \"4\": \"var(--chart-4)\",\n          \"5\": \"var(--chart-5)\",\n        },\n        sidebar: {\n          DEFAULT: \"var(--sidebar-background)\",\n          foreground: \"var(--sidebar-foreground)\",\n          primary: \"var(--sidebar-primary)\",\n          \"primary-foreground\": \"var(--sidebar-primary-foreground)\",\n          accent: \"var(--sidebar-accent)\",\n          \"accent-foreground\": \"var(--sidebar-accent-foreground)\",\n          border: \"var(--sidebar-border)\",\n          ring: \"var(--sidebar-ring)\",\n        },\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":2627},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":971},"attached_assets/meeting-tracker-app_1753364778301.tsx":{"content":"import React, { useState } from 'react';\nimport { Calendar, Plus, Search, CheckCircle, Clock, AlertCircle, User, FileText, Settings } from 'lucide-react';\n\n// Clean Database Class - No Complex Features\nclass MeetingDB {\n  constructor() {\n    this.load();\n  }\n\n  load() {\n    try {\n      const data = localStorage.getItem('meetingApp');\n      if (data) {\n        const parsed = JSON.parse(data);\n        this.employees = parsed.employees || [];\n        this.meetings = parsed.meetings || [];\n        this.actions = parsed.actions || [];\n        this.nextId = parsed.nextId || 1;\n      } else {\n        this.initSample();\n      }\n    } catch (e) {\n      this.initSample();\n    }\n  }\n\n  save() {\n    try {\n      localStorage.setItem('meetingApp', JSON.stringify({\n        employees: this.employees,\n        meetings: this.meetings,\n        actions: this.actions,\n        nextId: this.nextId\n      }));\n    } catch (e) {\n      console.error('Save failed:', e);\n    }\n  }\n\n  initSample() {\n    this.employees = [\n      { id: 1, name: \"Sarah Johnson\", role: \"Senior Developer\", department: \"Engineering\", relationship: \"Direct Report\" },\n      { id: 2, name: \"Mike Chen\", role: \"Product Manager\", department: \"Product\", relationship: \"Peer\" }\n    ];\n    this.meetings = [\n      { \n        id: 1, \n        employeeName: \"Sarah Johnson\", \n        date: \"2024-01-15\", \n        notes: `# Q1 Planning Meeting\nDiscussed upcoming quarter goals and resource allocation.\n\n## Key Discussion Points\n- **Budget approval** for new development tools\n- Timeline confirmed for customer feature requests\n- **Performance review** preparation needed\n\n## Action Items\n- Submit training budget by end of week\n- Schedule architecture review meeting`\n      },\n      { \n        id: 2, \n        employeeName: \"Mike Chen\", \n        date: \"2024-01-16\", \n        notes: `# Performance Review Meeting\nDiscussed Mike's progress and future opportunities.\n\n## Achievements\n- **Successfully launched** three major features\n- Improved team collaboration\n\n## Goals for Next Quarter\n- Lead the mobile app initiative\n- Complete project management certification`\n      }\n    ];\n    this.actions = [\n      { id: 1, text: \"Submit training budget proposal\", assignee: \"me\", status: \"pending\", priority: \"high\", meetingId: 1, employeeName: \"Sarah Johnson\" },\n      { id: 2, text: \"Schedule architecture review meeting\", assignee: \"Sarah Johnson\", status: \"in-progress\", priority: \"medium\", meetingId: 1, employeeName: \"Sarah Johnson\" },\n      { id: 3, text: \"Complete project management certification\", assignee: \"Mike Chen\", status: \"in-progress\", priority: \"medium\", meetingId: 2, employeeName: \"Mike Chen\" },\n      { id: 4, text: \"Update project documentation\", assignee: \"me\", status: \"completed\", priority: \"low\", meetingId: 1, employeeName: \"Sarah Johnson\" }\n    ];\n    this.nextId = 5;\n    this.save();\n  }\n\n  // CRUD Operations\n  addEmployee(data) {\n    const emp = { id: this.nextId++, ...data };\n    this.employees.push(emp);\n    this.save();\n    return emp;\n  }\n\n  updateEmployee(id, updates) {\n    const emp = this.employees.find(e => e.id === id);\n    if (emp) {\n      Object.assign(emp, updates);\n      this.save();\n      return true;\n    }\n    return false;\n  }\n\n  deleteEmployee(id) {\n    this.employees = this.employees.filter(e => e.id !== id);\n    this.save();\n  }\n\n  addMeeting(data) {\n    const meeting = { id: this.nextId++, ...data };\n    this.meetings.push(meeting);\n    this.save();\n    return meeting;\n  }\n\n  updateMeeting(id, updates) {\n    const meeting = this.meetings.find(m => m.id === id);\n    if (meeting) {\n      Object.assign(meeting, updates);\n      this.save();\n      return true;\n    }\n    return false;\n  }\n\n  addAction(data) {\n    const action = { id: this.nextId++, ...data };\n    this.actions.push(action);\n    this.save();\n    return action;\n  }\n\n  updateAction(id, updates) {\n    const action = this.actions.find(a => a.id === id);\n    if (action) {\n      Object.assign(action, updates);\n      this.save();\n      return true;\n    }\n    return false;\n  }\n\n  // Export/Import - Simple\n  exportData() {\n    return {\n      employees: this.employees,\n      meetings: this.meetings,\n      actions: this.actions,\n      exportDate: new Date().toISOString(),\n      version: '1.0'\n    };\n  }\n\n  importData(data) {\n    try {\n      if (data.employees && data.meetings && data.actions) {\n        this.employees = data.employees;\n        this.meetings = data.meetings;\n        this.actions = data.actions;\n        this.nextId = Math.max(\n          ...this.employees.map(e => e.id || 0),\n          ...this.meetings.map(m => m.id || 0),\n          ...this.actions.map(a => a.id || 0)\n        ) + 1;\n        this.save();\n        return true;\n      }\n      return false;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  clearAll() {\n    this.employees = [];\n    this.meetings = [];\n    this.actions = [];\n    this.nextId = 1;\n    this.save();\n  }\n\n  getStats() {\n    return {\n      totalEmployees: this.employees.length,\n      totalMeetings: this.meetings.length,\n      totalActions: this.actions.length,\n      activeActions: this.actions.filter(a => a.status !== 'completed').length,\n      completedActions: this.actions.filter(a => a.status === 'completed').length\n    };\n  }\n\n  getTopActions(limit = 5) {\n    const activeActions = this.actions.filter(a => a.status !== 'completed');\n    return activeActions\n      .sort((a, b) => {\n        const priorityOrder = { high: 3, medium: 2, low: 1 };\n        const aPriority = priorityOrder[a.priority] || 1;\n        const bPriority = priorityOrder[b.priority] || 1;\n        \n        if (aPriority !== bPriority) return bPriority - aPriority;\n        if (a.assignee === 'me' && b.assignee !== 'me') return -1;\n        if (a.assignee !== 'me' && b.assignee === 'me') return 1;\n        return 0;\n      })\n      .slice(0, limit);\n  }\n}\n\nfunction App() {\n  // Database\n  const [db] = useState(() => new MeetingDB());\n  \n  // Core State\n  const [activeTab, setActiveTab] = useState('actions');\n  const [refresh, setRefresh] = useState(0);\n  \n  // UI State\n  const [showNewMeeting, setShowNewMeeting] = useState(false);\n  const [showNewEmployee, setShowNewEmployee] = useState(false);\n  const [editingMeeting, setEditingMeeting] = useState(null);\n  const [editingEmployee, setEditingEmployee] = useState(null);\n  const [selectedMeeting, setSelectedMeeting] = useState(null);\n  \n  // Search/Filter State\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterEmployee, setFilterEmployee] = useState('all');\n  const [filterDateFrom, setFilterDateFrom] = useState('');\n  const [filterDateTo, setFilterDateTo] = useState('');\n  const [highlightedMeeting, setHighlightedMeeting] = useState(null);\n\n  // Notification State - Simple\n  const [notificationsEnabled, setNotificationsEnabled] = useState(\n    localStorage.getItem('notificationsEnabled') === 'true'\n  );\n  const [notificationTime, setNotificationTime] = useState(\n    localStorage.getItem('notificationTime') || '09:00'\n  );\n\n  // Status Messages State (Sandbox Compatible)\n  const [statusMessage, setStatusMessage] = useState('');\n  const [exportData, setExportData] = useState('');\n  const [templateData, setTemplateData] = useState('');\n  const [clearConfirm, setClearConfirm] = useState(false);\n\n  // Core Functions\n  const forceRefresh = () => setRefresh(r => r + 1);\n\n  const showStatus = (message, duration = 5000) => {\n    setStatusMessage(message);\n    setTimeout(() => setStatusMessage(''), duration);\n  };\n\n  // Data access\n  const employees = db.employees;\n  const meetings = db.meetings;\n  const actions = db.actions;\n  const stats = db.getStats();\n\n  // Simple filtering\n  const filteredMeetings = meetings.filter(meeting => {\n    const matchesSearch = searchTerm === '' || \n      meeting.employeeName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      meeting.notes.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesEmployee = filterEmployee === 'all' || meeting.employeeName === filterEmployee;\n    const matchesDateFrom = filterDateFrom === '' || meeting.date >= filterDateFrom;\n    const matchesDateTo = filterDateTo === '' || meeting.date <= filterDateTo;\n    return matchesSearch && matchesEmployee && matchesDateFrom && matchesDateTo;\n  });\n\n  // Action categorization\n  const myActiveTasks = actions.filter(a => a.assignee === 'me' && a.status !== 'completed');\n  const employeeActiveTasks = actions.filter(a => a.assignee !== 'me' && a.status !== 'completed');\n  const completedTasks = actions.filter(a => a.status === 'completed');\n\n  // Action Functions\n  const updateStatus = (id, status) => {\n    db.updateAction(id, { status });\n    forceRefresh();\n  };\n\n  const goToMeeting = (meetingId) => {\n    setActiveTab('meetings');\n    setSearchTerm('');\n    setFilterEmployee('all');\n    setFilterDateFrom('');\n    setFilterDateTo('');\n    setHighlightedMeeting(meetingId);\n    setTimeout(() => setHighlightedMeeting(null), 3000);\n  };\n\n  // Filter Functions\n  const clearFilters = () => {\n    setSearchTerm('');\n    setFilterEmployee('all');\n    setFilterDateFrom('');\n    setFilterDateTo('');\n  };\n\n  const setQuickDateFilter = (type) => {\n    const today = new Date();\n    let startDate;\n    \n    if (type === 'week') {\n      startDate = new Date(today);\n      startDate.setDate(today.getDate() - 7);\n    } else if (type === 'month') {\n      startDate = new Date(today.getFullYear(), today.getMonth(), 1);\n    }\n    \n    if (startDate) {\n      setFilterDateFrom(startDate.toISOString().split('T')[0]);\n      setFilterDateTo(today.toISOString().split('T')[0]);\n    }\n  };\n\n  // Notification Functions - Sandbox Compatible\n  const saveNotificationSettings = (enabled, time) => {\n    localStorage.setItem('notificationsEnabled', enabled.toString());\n    localStorage.setItem('notificationTime', time);\n    setNotificationsEnabled(enabled);\n    setNotificationTime(time);\n    showStatus(`âœ… Notification settings saved: ${enabled ? 'Enabled' : 'Disabled'} at ${time}`);\n  };\n\n  const testNotification = () => {\n    if (!('Notification' in window)) {\n      showStatus('âŒ Browser does not support notifications');\n      return;\n    }\n\n    const topActions = db.getTopActions(3);\n    if (topActions.length === 0) {\n      showStatus('âŒ No active actions to notify about');\n      return;\n    }\n\n    if (Notification.permission === 'granted') {\n      try {\n        const notification = new Notification('ðŸ“‹ Daily Actions Test', {\n          body: `You have ${topActions.length} active actions`,\n          icon: 'ðŸ“‹'\n        });\n        setTimeout(() => notification.close(), 5000);\n        showStatus('âœ… Test notification sent!');\n      } catch (error) {\n        showStatus('âŒ Failed to create notification: ' + error.message);\n      }\n    } else if (Notification.permission === 'default') {\n      Notification.requestPermission().then(permission => {\n        if (permission === 'granted') {\n          testNotification();\n        } else {\n          showStatus('âŒ Notification permission denied');\n        }\n      });\n    } else {\n      showStatus('âŒ Notifications blocked. Enable in browser settings.');\n    }\n  };\n\n  const generateTemplate = () => {\n    const topActions = db.getTopActions(5);\n    if (topActions.length === 0) {\n      showStatus('âŒ No active actions to create template for');\n      return;\n    }\n\n    const date = new Date().toLocaleDateString();\n    let template = `ðŸ“‹ Daily Action Items - ${date}\\n\\n`;\n    \n    topActions.forEach((action, index) => {\n      const priorityEmoji = action.priority === 'high' ? 'ðŸ”´' : \n                           action.priority === 'medium' ? 'ðŸŸ¡' : 'ðŸŸ¢';\n      const assigneeText = action.assignee === 'me' ? '(Me)' : `(${action.assignee})`;\n      \n      template += `${index + 1}. ${priorityEmoji} ${action.text} ${assigneeText}\\n`;\n      template += `   From: ${action.employeeName}\\n\\n`;\n    });\n\n    template += `Total active actions: ${topActions.length}\\nHave a productive day! ðŸ’ª`;\n\n    if (navigator.clipboard) {\n      navigator.clipboard.writeText(template).then(() => {\n        showStatus('âœ… Template copied to clipboard!');\n      }).catch(() => {\n        setTemplateData(template);\n        showStatus('ðŸ“„ Template ready below - copy manually');\n      });\n    } else {\n      setTemplateData(template);\n      showStatus('ðŸ“„ Template ready below - copy manually');\n    }\n  };\n\n  // Data Management Functions - Sandbox Compatible\n  const exportAppData = () => {\n    try {\n      const data = db.exportData();\n      const dataStr = JSON.stringify(data, null, 2);\n      \n      if (navigator.clipboard) {\n        navigator.clipboard.writeText(dataStr).then(() => {\n          showStatus('âœ… Export data copied to clipboard! Save as .json file');\n        }).catch(() => {\n          setExportData(dataStr);\n          showStatus('ðŸ“„ Export data ready below - copy manually');\n        });\n      } else {\n        setExportData(dataStr);\n        showStatus('ðŸ“„ Export data ready below - copy manually');\n      }\n    } catch (error) {\n      showStatus('âŒ Export failed: ' + error.message);\n    }\n  };\n\n  const importAppData = (file) => {\n    if (!file) return;\n    \n    const reader = new FileReader();\n    reader.onload = (e) => {\n      try {\n        const importedData = JSON.parse(e.target.result);\n        if (db.importData(importedData)) {\n          forceRefresh();\n          showStatus('âœ… Data imported successfully!');\n        } else {\n          showStatus('âŒ Invalid file format');\n        }\n      } catch (error) {\n        showStatus('âŒ Import failed: ' + error.message);\n      }\n    };\n    reader.readAsText(file);\n  };\n\n  const clearAllData = () => {\n    if (!clearConfirm) {\n      setClearConfirm(true);\n      showStatus('âš ï¸ Click \"CONFIRM DELETE\" to permanently clear all data');\n      setTimeout(() => setClearConfirm(false), 10000);\n    } else {\n      db.clearAll();\n      forceRefresh();\n      setClearConfirm(false);\n      showStatus('âœ… All data cleared successfully');\n    }\n  };\n\n  // Markdown formatter\n  const formatNotes = (text) => {\n    if (!text) return text;\n    \n    return text\n      .split('\\n')\n      .map((line, index) => {\n        if (line.startsWith('# ')) {\n          return <h3 key={index} className=\"text-lg font-bold text-gray-800 mt-4 mb-2\">{line.substring(2)}</h3>;\n        }\n        if (line.startsWith('## ')) {\n          return <h4 key={index} className=\"text-base font-bold text-gray-700 mt-3 mb-2\">{line.substring(3)}</h4>;\n        }\n        if (line.startsWith('- ')) {\n          return <div key={index} className=\"flex items-start mt-1\"><span className=\"text-blue-500 mr-2 mt-1\">â€¢</span><span>{line.substring(2)}</span></div>;\n        }\n        if (line.includes('**')) {\n          const parts = line.split('**');\n          return (\n            <p key={index} className=\"mt-1\">\n              {parts.map((part, i) => \n                i % 2 === 1 ? <strong key={i} className=\"font-semibold text-gray-800\">{part}</strong> : part\n              )}\n            </p>\n          );\n        }\n        if (line.trim() === '') {\n          return <br key={index} />;\n        }\n        return <p key={index} className=\"mt-1\">{line}</p>;\n      });\n  };\n\n  // Style helpers\n  const getStatusIcon = (status) => {\n    if (status === 'completed') return <CheckCircle className=\"w-4 h-4 text-green-500\" />;\n    if (status === 'in-progress') return <Clock className=\"w-4 h-4 text-yellow-500\" />;\n    return <AlertCircle className=\"w-4 h-4 text-red-500\" />;\n  };\n\n  const getTaskStyle = (action) => {\n    let style = \"p-4 rounded-lg shadow-sm border-l-4 mb-3 \";\n    if (action.status === 'completed') style += \"bg-gray-100 border-gray-400\";\n    else if (action.status === 'in-progress') style += \"bg-green-50 border-green-500\";\n    else if (action.priority === 'high') style += \"bg-red-50 border-red-500\";\n    else if (action.priority === 'medium') style += \"bg-yellow-50 border-yellow-500\";\n    else style += \"bg-white border-gray-300\";\n    return style;\n  };\n\n  return (\n    <div className=\"max-w-6xl mx-auto p-6 bg-gray-100 min-h-screen\">\n      {/* Header */}\n      <div className=\"mb-6\">\n        <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">Meeting & Action Tracker</h1>\n        <p className=\"text-gray-600\">Clean architecture - All features working</p>\n      </div>\n\n      {/* Status Messages */}\n      {statusMessage && (\n        <div className=\"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n          <p className=\"text-blue-800\">{statusMessage}</p>\n        </div>\n      )}\n\n      {/* Navigation */}\n      <div className=\"flex space-x-4 mb-6\">\n        {[\n          { id: 'actions', icon: CheckCircle, label: 'Actions' },\n          { id: 'meetings', icon: FileText, label: 'Meetings' },\n          { id: 'team', icon: User, label: 'Team' },\n          { id: 'admin', icon: Settings, label: 'Admin' }\n        ].map(tab => (\n          <button\n            key={tab.id}\n            onClick={() => setActiveTab(tab.id)}\n            className={`px-4 py-2 rounded-md font-medium ${\n              activeTab === tab.id ? 'bg-blue-500 text-white' : 'bg-white text-gray-700 hover:bg-gray-100'\n            }`}\n          >\n            <tab.icon className=\"w-4 h-4 inline mr-2\" />\n            {tab.label}\n          </button>\n        ))}\n      </div>\n\n      {/* Actions Tab */}\n      {activeTab === 'actions' && (\n        <div className=\"space-y-6\">\n          <h2 className=\"text-xl font-semibold\">All Actions</h2>\n          \n          {/* Stats */}\n          <div className=\"bg-blue-100 border-2 border-blue-400 p-4 rounded-lg\">\n            <p className=\"text-blue-800\">\n              <strong>Quick Stats:</strong> {stats.totalActions} total | {stats.activeActions} active | {stats.completedActions} completed\n            </p>\n          </div>\n\n          {/* My Active Tasks */}\n          <div className=\"bg-blue-50 p-4 rounded-lg\">\n            <h3 className=\"text-lg font-semibold text-blue-800 mb-4\">\n              My Active Tasks ({myActiveTasks.length})\n            </h3>\n            {myActiveTasks.map(action => (\n              <div key={action.id} className={getTaskStyle(action)}>\n                <div className=\"flex justify-between items-start mb-2\">\n                  <h4 className=\"font-semibold\">{action.text}</h4>\n                  <div className=\"flex items-center space-x-2\">\n                    {getStatusIcon(action.status)}\n                    <select\n                      value={action.status}\n                      onChange={(e) => updateStatus(action.id, e.target.value)}\n                      className=\"text-sm border rounded px-2 py-1\"\n                    >\n                      <option value=\"pending\">Pending</option>\n                      <option value=\"in-progress\">In Progress</option>\n                      <option value=\"completed\">Completed</option>\n                    </select>\n                  </div>\n                </div>\n                <div className=\"text-sm text-gray-600\">\n                  <p>Priority: <strong>{action.priority}</strong> | From: <strong>{action.employeeName}</strong></p>\n                  {action.status === 'in-progress' && <p className=\"text-green-600 mt-1\">ðŸ”„ In Progress</p>}\n                  {action.meetingId && (\n                    <button\n                      onClick={() => goToMeeting(action.meetingId)}\n                      className=\"text-blue-600 hover:text-blue-800 text-sm underline mt-2\"\n                    >\n                      ðŸ“ View Meeting Notes\n                    </button>\n                  )}\n                </div>\n              </div>\n            ))}\n            {myActiveTasks.length === 0 && <p className=\"text-gray-500\">No active tasks</p>}\n          </div>\n\n          {/* Employee Active Tasks */}\n          <div className=\"bg-green-50 p-4 rounded-lg\">\n            <h3 className=\"text-lg font-semibold text-green-800 mb-4\">\n              Employee Tasks ({employeeActiveTasks.length})\n            </h3>\n            {employeeActiveTasks.map(action => (\n              <div key={action.id} className={getTaskStyle(action)}>\n                <div className=\"flex justify-between items-start mb-2\">\n                  <h4 className=\"font-semibold\">{action.text}</h4>\n                  <div className=\"flex items-center space-x-2\">\n                    {getStatusIcon(action.status)}\n                    <select\n                      value={action.status}\n                      onChange={(e) => updateStatus(action.id, e.target.value)}\n                      className=\"text-sm border rounded px-2 py-1\"\n                    >\n                      <option value=\"pending\">Pending</option>\n                      <option value=\"in-progress\">In Progress</option>\n                      <option value=\"completed\">Completed</option>\n                    </select>\n                  </div>\n                </div>\n                <div className=\"text-sm text-gray-600\">\n                  <p>Assigned to: <strong>{action.assignee}</strong> | Priority: <strong>{action.priority}</strong></p>\n                  {action.status === 'in-progress' && <p className=\"text-green-600 mt-1\">ðŸ”„ In Progress</p>}\n                  {action.meetingId && (\n                    <button\n                      onClick={() => goToMeeting(action.meetingId)}\n                      className=\"text-blue-600 hover:text-blue-800 text-sm underline mt-2\"\n                    >\n                      ðŸ“ View Meeting Notes\n                    </button>\n                  )}\n                </div>\n              </div>\n            ))}\n            {employeeActiveTasks.length === 0 && <p className=\"text-gray-500\">No employee tasks</p>}\n          </div>\n\n          {/* Completed Tasks */}\n          {completedTasks.length > 0 && (\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\n              <h3 className=\"text-lg font-semibold text-gray-700 mb-4\">\n                Completed Tasks ({completedTasks.length})\n              </h3>\n              {completedTasks.map(action => (\n                <div key={action.id} className={getTaskStyle(action)}>\n                  <div className=\"flex justify-between items-start mb-2\">\n                    <h4 className=\"font-semibold text-gray-700\">{action.text}</h4>\n                    <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                  </div>\n                  <div className=\"text-sm text-gray-600\">\n                    <p>Assigned to: <strong>{action.assignee}</strong> | âœ… Completed</p>\n                    {action.meetingId && (\n                      <button\n                        onClick={() => goToMeeting(action.meetingId)}\n                        className=\"text-blue-600 hover:text-blue-800 text-sm underline mt-2\"\n                      >\n                        ðŸ“ View Meeting Notes\n                      </button>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Meetings Tab */}\n      {activeTab === 'meetings' && (\n        <div className=\"space-y-6\">\n          <div className=\"flex justify-between items-center\">\n            <h2 className=\"text-xl font-semibold\">Meetings</h2>\n            <button\n              onClick={() => setShowNewMeeting(true)}\n              className=\"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600\"\n            >\n              <Plus className=\"w-4 h-4 inline mr-2\" />\n              New Meeting\n            </button>\n          </div>\n\n          {/* Search and Filters */}\n          <div className=\"bg-white p-4 rounded-lg shadow-md\">\n            <div className=\"space-y-3\">\n              {/* Search Bar */}\n              <div className=\"relative\">\n                <Search className=\"w-4 h-4 absolute left-3 top-3 text-gray-400\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"Search meetings and notes...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border rounded-md\"\n                />\n              </div>\n              \n              {/* Filters */}\n              <div className=\"flex flex-wrap gap-3\">\n                <select\n                  value={filterEmployee}\n                  onChange={(e) => setFilterEmployee(e.target.value)}\n                  className=\"px-3 py-2 border rounded-md\"\n                >\n                  <option value=\"all\">All Team Members</option>\n                  {employees.map(emp => (\n                    <option key={emp.id} value={emp.name}>{emp.name}</option>\n                  ))}\n                </select>\n                \n                <input\n                  type=\"date\"\n                  value={filterDateFrom}\n                  onChange={(e) => setFilterDateFrom(e.target.value)}\n                  className=\"px-3 py-2 border rounded-md text-sm\"\n                  placeholder=\"From date\"\n                />\n                <span className=\"self-center text-gray-500 text-sm\">to</span>\n                <input\n                  type=\"date\"\n                  value={filterDateTo}\n                  onChange={(e) => setFilterDateTo(e.target.value)}\n                  className=\"px-3 py-2 border rounded-md text-sm\"\n                  placeholder=\"To date\"\n                />\n                \n                <button\n                  onClick={() => setQuickDateFilter('week')}\n                  className=\"px-3 py-1 text-sm bg-blue-100 text-blue-600 rounded hover:bg-blue-200\"\n                >\n                  This Week\n                </button>\n                <button\n                  onClick={() => setQuickDateFilter('month')}\n                  className=\"px-3 py-1 text-sm bg-blue-100 text-blue-600 rounded hover:bg-blue-200\"\n                >\n                  This Month\n                </button>\n                \n                {(searchTerm || filterEmployee !== 'all' || filterDateFrom || filterDateTo) && (\n                  <button\n                    onClick={clearFilters}\n                    className=\"px-3 py-1 text-sm bg-gray-100 text-gray-600 rounded hover:bg-gray-200\"\n                  >\n                    Clear All\n                  </button>\n                )}\n              </div>\n              \n              <div className=\"text-sm text-gray-600\">\n                Showing {filteredMeetings.length} of {meetings.length} meetings\n              </div>\n            </div>\n          </div>\n\n          {/* Add Meeting Form */}\n          {showNewMeeting && (\n            <div className=\"bg-white p-6 rounded-lg shadow-md\">\n              <h3 className=\"text-lg font-semibold mb-4\">Add Meeting</h3>\n              <div className=\"space-y-4\">\n                <select id=\"emp-select\" className=\"w-full p-3 border rounded-md\">\n                  <option value=\"\">Select team member</option>\n                  {employees.map(emp => (\n                    <option key={emp.id} value={emp.name}>{emp.name}</option>\n                  ))}\n                </select>\n                <input\n                  type=\"date\"\n                  id=\"meeting-date\"\n                  defaultValue={new Date().toISOString().split('T')[0]}\n                  className=\"w-full p-3 border rounded-md\"\n                />\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Meeting Notes</label>\n                  <div className=\"mb-3 p-3 bg-blue-50 border border-blue-200 rounded text-sm text-blue-700\">\n                    ðŸ’¡ <strong>Formatting Tips:</strong><br/>\n                    â€¢ <strong># Heading</strong> for main sections<br/>\n                    â€¢ <strong>## Subheading</strong> for subsections<br/>\n                    â€¢ <strong>**Bold text**</strong> for emphasis<br/>\n                    â€¢ <strong>- Item</strong> for bullet points\n                  </div>\n                  <textarea\n                    id=\"meeting-notes\"\n                    placeholder=\"Enter meeting notes with formatting...\"\n                    className=\"w-full p-3 border rounded-md h-40 font-mono text-sm\"\n                  />\n                </div>\n                <div className=\"flex space-x-3\">\n                  <button\n                    onClick={() => {\n                      const emp = document.getElementById('emp-select').value;\n                      const date = document.getElementById('meeting-date').value;\n                      const notes = document.getElementById('meeting-notes').value;\n                      if (emp && date && notes) {\n                        db.addMeeting({ employeeName: emp, date, notes });\n                        forceRefresh();\n                        setShowNewMeeting(false);\n                        document.getElementById('emp-select').value = '';\n                        document.getElementById('meeting-notes').value = '';\n                        document.getElementById('meeting-date').value = new Date().toISOString().split('T')[0];\n                        showStatus('âœ… Meeting added successfully');\n                      } else {\n                        showStatus('âŒ Please fill all fields');\n                      }\n                    }}\n                    className=\"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600\"\n                  >\n                    Save Meeting\n                  </button>\n                  <button\n                    onClick={() => setShowNewMeeting(false)}\n                    className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400\"\n                  >\n                    Cancel\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Meetings List */}\n          <div className=\"space-y-4\">\n            {filteredMeetings.length === 0 ? (\n              <div className=\"bg-white p-8 rounded-lg shadow-md text-center\">\n                <Calendar className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-medium text-gray-700 mb-2\">No meetings found</h3>\n                <p className=\"text-gray-500 mb-4\">\n                  {meetings.length === 0 \n                    ? \"No meetings have been created yet.\" \n                    : \"No meetings match your current filters.\"}\n                </p>\n                {meetings.length > 0 && (\n                  <button\n                    onClick={clearFilters}\n                    className=\"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600\"\n                  >\n                    Clear Filters\n                  </button>\n                )}\n              </div>\n            ) : (\n              filteredMeetings.map(meeting => {\n                const meetingActions = actions.filter(a => a.meetingId === meeting.id);\n                const isEditing = editingMeeting === meeting.id;\n                const isAddingAction = selectedMeeting === meeting.id;\n                const isHighlighted = highlightedMeeting === meeting.id;\n                \n                return (\n                  <div key={meeting.id} className={`bg-white p-6 rounded-lg shadow-md ${\n                    isHighlighted ? 'border-2 border-blue-500 bg-blue-50' : ''\n                  }`}>\n                    {isHighlighted && (\n                      <div className=\"mb-4 p-2 bg-blue-100 border border-blue-300 rounded text-sm text-blue-800\">\n                        ðŸŽ¯ <strong>Navigated from task</strong> - This meeting contains the action item context\n                      </div>\n                    )}\n                    \n                    <div className=\"flex justify-between items-start mb-4\">\n                      <div>\n                        <h3 className=\"text-lg font-semibold\">{meeting.employeeName}</h3>\n                        <p className=\"text-gray-500\">{new Date(meeting.date).toLocaleDateString()}</p>\n                      </div>\n                      <button\n                        onClick={() => setEditingMeeting(isEditing ? null : meeting.id)}\n                        className=\"px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600\"\n                      >\n                        {isEditing ? 'Cancel' : 'Edit Notes'}\n                      </button>\n                    </div>\n                    \n                    <div className=\"mb-4\">\n                      <h4 className=\"font-medium mb-2\">Notes:</h4>\n                      {isEditing ? (\n                        <div className=\"space-y-3\">\n                          <textarea\n                            id={`notes-${meeting.id}`}\n                            defaultValue={meeting.notes}\n                            className=\"w-full p-3 border rounded-md h-40 font-mono text-sm\"\n                          />\n                          <div className=\"flex space-x-2\">\n                            <button\n                              onClick={() => {\n                                const notes = document.getElementById(`notes-${meeting.id}`).value;\n                                if (notes.trim()) {\n                                  db.updateMeeting(meeting.id, { notes: notes.trim() });\n                                  forceRefresh();\n                                  setEditingMeeting(null);\n                                  showStatus('âœ… Meeting notes updated');\n                                }\n                              }}\n                              className=\"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600\"\n                            >\n                              Save Notes\n                            </button>\n                            <button\n                              onClick={() => setEditingMeeting(null)}\n                              className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400\"\n                            >\n                              Cancel\n                            </button>\n                          </div>\n                        </div>\n                      ) : (\n                        <div className=\"text-gray-700 bg-gradient-to-br from-gray-50 to-gray-100 p-4 rounded-lg border border-gray-200\">\n                          <div className=\"prose prose-sm max-w-none\">\n                            {formatNotes(meeting.notes)}\n                          </div>\n                        </div>\n                      )}\n                    </div>\n\n                    <div>\n                      <div className=\"flex justify-between items-center mb-3\">\n                        <h4 className=\"font-medium\">Actions ({meetingActions.length})</h4>\n                        <button\n                          onClick={() => setSelectedMeeting(isAddingAction ? null : meeting.id)}\n                          className=\"px-3 py-1 bg-green-500 text-white text-sm rounded hover:bg-green-600\"\n                        >\n                          {isAddingAction ? 'Cancel' : 'Add Action'}\n                        </button>\n                      </div>\n\n                      {meetingActions.map(action => (\n                        <div key={action.id} className=\"mb-2 p-3 bg-blue-50 rounded border-l-4 border-blue-500\">\n                          <div className=\"flex justify-between items-start\">\n                            <div>\n                              <p className=\"font-medium\">{action.text}</p>\n                              <p className=\"text-sm text-gray-600\">\n                                {action.assignee} | {action.priority} | {action.status}\n                              </p>\n                            </div>\n                            <select\n                              value={action.status}\n                              onChange={(e) => updateStatus(action.id, e.target.value)}\n                              className=\"text-sm border rounded px-2 py-1\"\n                            >\n                              <option value=\"pending\">Pending</option>\n                              <option value=\"in-progress\">In Progress</option>\n                              <option value=\"completed\">Completed</option>\n                            </select>\n                          </div>\n                        </div>\n                      ))}\n\n                      {isAddingAction && (\n                        <div className=\"mt-3 p-4 bg-gray-50 rounded\">\n                          <div className=\"space-y-3\">\n                            <input\n                              type=\"text\"\n                              id={`action-${meeting.id}`}\n                              placeholder=\"Action description\"\n                              className=\"w-full p-2 border rounded-md\"\n                            />\n                            <div className=\"flex space-x-2\">\n                              <select id={`assignee-${meeting.id}`} className=\"p-2 border rounded-md\">\n                                <option value=\"me\">Me</option>\n                                <option value={meeting.employeeName}>{meeting.employeeName}</option>\n                              </select>\n                              <select id={`priority-${meeting.id}`} className=\"p-2 border rounded-md\">\n                                <option value=\"medium\">Medium</option>\n                                <option value=\"high\">High</option>\n                                <option value=\"low\">Low</option>\n                              </select>\n                            </div>\n                            <div className=\"flex space-x-2\">\n                              <button\n                                onClick={() => {\n                                  const text = document.getElementById(`action-${meeting.id}`).value.trim();\n                                  const assignee = document.getElementById(`assignee-${meeting.id}`).value;\n                                  const priority = document.getElementById(`priority-${meeting.id}`).value;\n                                  \n                                  if (text) {\n                                    db.addAction({\n                                      text,\n                                      assignee,\n                                      status: 'pending',\n                                      priority,\n                                      meetingId: meeting.id,\n                                      employeeName: meeting.employeeName\n                                    });\n                                    forceRefresh();\n                                    setSelectedMeeting(null);\n                                    document.getElementById(`action-${meeting.id}`).value = '';\n                                    showStatus('âœ… Action added successfully');\n                                  }\n                                }}\n                                className=\"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600\"\n                              >\n                                Add\n                              </button>\n                              <button\n                                onClick={() => setSelectedMeeting(null)}\n                                className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400\"\n                              >\n                                Cancel\n                              </button>\n                            </div>\n                          </div>\n                        </div>\n                      )}\n\n                      {meetingActions.length === 0 && !isAddingAction && (\n                        <p className=\"text-gray-500 text-sm\">No actions yet</p>\n                      )}\n                    </div>\n                  </div>\n                );\n              })\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Team Tab */}\n      {activeTab === 'team' && (\n        <div className=\"space-y-6\">\n          <div className=\"flex justify-between items-center\">\n            <h2 className=\"text-xl font-semibold\">Team</h2>\n            <button\n              onClick={() => setShowNewEmployee(true)}\n              className=\"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600\"\n            >\n              <Plus className=\"w-4 h-4 inline mr-2\" />\n              Add Member\n            </button>\n          </div>\n\n          {showNewEmployee && (\n            <div className=\"bg-white p-6 rounded-lg shadow-md\">\n              <h3 className=\"text-lg font-semibold mb-4\">Add Team Member</h3>\n              <div className=\"space-y-4\">\n                <input type=\"text\" id=\"emp-name\" placeholder=\"Full Name\" className=\"w-full p-3 border rounded-md\" />\n                <input type=\"text\" id=\"emp-role\" placeholder=\"Role/Title\" className=\"w-full p-3 border rounded-md\" />\n                <input type=\"text\" id=\"emp-dept\" placeholder=\"Department\" className=\"w-full p-3 border rounded-md\" />\n                <select id=\"emp-rel\" className=\"w-full p-3 border rounded-md\">\n                  <option value=\"Direct Report\">Direct Report</option>\n                  <option value=\"Peer\">Peer</option>\n                  <option value=\"Manager\">Manager</option>\n                  <option value=\"Skip Level\">Skip Level</option>\n                </select>\n                <div className=\"flex space-x-3\">\n                  <button\n                    onClick={() => {\n                      const name = document.getElementById('emp-name').value.trim();\n                      const role = document.getElementById('emp-role').value.trim();\n                      const dept = document.getElementById('emp-dept').value.trim();\n                      const rel = document.getElementById('emp-rel').value;\n                      \n                      if (name && role) {\n                        db.addEmployee({ name, role, department: dept, relationship: rel });\n                        forceRefresh();\n                        setShowNewEmployee(false);\n                        document.getElementById('emp-name').value = '';\n                        document.getElementById('emp-role').value = '';\n                        document.getElementById('emp-dept').value = '';\n                        showStatus('âœ… Team member added successfully');\n                      } else {\n                        showStatus('âŒ Please enter name and role');\n                      }\n                    }}\n                    className=\"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600\"\n                  >\n                    Add Member\n                  </button>\n                  <button\n                    onClick={() => setShowNewEmployee(false)}\n                    className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400\"\n                  >\n                    Cancel\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n\n          <div className=\"space-y-4\">\n            {employees.map(emp => {\n              const empMeetings = meetings.filter(m => m.employeeName === emp.name).length;\n              const empActions = actions.filter(a => a.employeeName === emp.name).length;\n              const isEditing = editingEmployee === emp.id;\n              \n              return (\n                <div key={emp.id} className=\"bg-white p-6 rounded-lg shadow-md\">\n                  {isEditing ? (\n                    <div className=\"space-y-4\">\n                      <h3 className=\"text-lg font-semibold text-blue-700\">Edit Team Member</h3>\n                      <input\n                        type=\"text\"\n                        id={`edit-name-${emp.id}`}\n                        defaultValue={emp.name}\n                        placeholder=\"Full Name\"\n                        className=\"w-full p-3 border rounded-md\"\n                      />\n                      <input\n                        type=\"text\"\n                        id={`edit-role-${emp.id}`}\n                        defaultValue={emp.role}\n                        placeholder=\"Role/Title\"\n                        className=\"w-full p-3 border rounded-md\"\n                      />\n                      <input\n                        type=\"text\"\n                        id={`edit-dept-${emp.id}`}\n                        defaultValue={emp.department || ''}\n                        placeholder=\"Department\"\n                        className=\"w-full p-3 border rounded-md\"\n                      />\n                      <select\n                        id={`edit-rel-${emp.id}`}\n                        defaultValue={emp.relationship || 'Direct Report'}\n                        className=\"w-full p-3 border rounded-md\"\n                      >\n                        <option value=\"Direct Report\">Direct Report</option>\n                        <option value=\"Peer\">Peer</option>\n                        <option value=\"Manager\">Manager</option>\n                        <option value=\"Skip Level\">Skip Level</option>\n                      </select>\n                      <div className=\"flex space-x-3\">\n                        <button\n                          onClick={() => {\n                            const name = document.getElementById(`edit-name-${emp.id}`).value.trim();\n                            const role = document.getElementById(`edit-role-${emp.id}`).value.trim();\n                            const dept = document.getElementById(`edit-dept-${emp.id}`).value.trim();\n                            const rel = document.getElementById(`edit-rel-${emp.id}`).value;\n                            \n                            if (name && role) {\n                              db.updateEmployee(emp.id, { name, role, department: dept, relationship: rel });\n                              forceRefresh();\n                              setEditingEmployee(null);\n                              showStatus('âœ… Team member updated successfully');\n                            } else {\n                              showStatus('âŒ Name and role are required');\n                            }\n                          }}\n                          className=\"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600\"\n                        >\n                          Save Changes\n                        </button>\n                        <button\n                          onClick={() => setEditingEmployee(null)}\n                          className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400\"\n                        >\n                          Cancel\n                        </button>\n                      </div>\n                    </div>\n                  ) : (\n                    <div>\n                      <div className=\"flex justify-between items-start\">\n                        <div>\n                          <h3 className=\"text-lg font-semibold\">{emp.name}</h3>\n                          <p className=\"text-gray-600\">{emp.role}</p>\n                          {emp.department && <p className=\"text-gray-500 text-sm\">{emp.department}</p>}\n                          {emp.relationship && <p className=\"text-blue-600 text-sm\">{emp.relationship}</p>}\n                        </div>\n                        <div className=\"flex space-x-2\">\n                          <button\n                            onClick={() => setEditingEmployee(emp.id)}\n                            className=\"px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600\"\n                          >\n                            Edit\n                          </button>\n                          <button\n                            onClick={() => {\n                              db.deleteEmployee(emp.id);\n                              forceRefresh();\n                              showStatus('âœ… Team member deleted');\n                            }}\n                            className=\"px-3 py-1 bg-red-500 text-white text-sm rounded hover:bg-red-600\"\n                          >\n                            Delete\n                          </button>\n                        </div>\n                      </div>\n                      <div className=\"mt-4 grid grid-cols-2 gap-4\">\n                        <div className=\"bg-blue-50 p-3 rounded text-center\">\n                          <p className=\"text-xl font-bold text-blue-600\">{empMeetings}</p>\n                          <p className=\"text-sm text-gray-600\">Meetings</p>\n                        </div>\n                        <div className=\"bg-green-50 p-3 rounded text-center\">\n                          <p className=\"text-xl font-bold text-green-600\">{empActions}</p>\n                          <p className=\"text-sm text-gray-600\">Actions</p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n\n            {employees.length === 0 && (\n              <div className=\"bg-white p-8 rounded-lg shadow-md text-center\">\n                <User className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-medium text-gray-700 mb-2\">No team members yet</h3>\n                <p className=\"text-gray-500\">Click \"Add Member\" to get started</p>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Admin Tab */}\n      {activeTab === 'admin' && (\n        <div className=\"space-y-6\">\n          <h2 className=\"text-xl font-semibold\">Admin</h2>\n          \n          {/* Statistics */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Statistics</h3>\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n              <div className=\"bg-blue-50 p-4 rounded-lg text-center\">\n                <p className=\"text-2xl font-bold text-blue-600\">{stats.totalEmployees}</p>\n                <p className=\"text-sm text-gray-600\">Team Members</p>\n              </div>\n              <div className=\"bg-green-50 p-4 rounded-lg text-center\">\n                <p className=\"text-2xl font-bold text-green-600\">{stats.totalMeetings}</p>\n                <p className=\"text-sm text-gray-600\">Meetings</p>\n              </div>\n              <div className=\"bg-yellow-50 p-4 rounded-lg text-center\">\n                <p className=\"text-2xl font-bold text-yellow-600\">{stats.activeActions}</p>\n                <p className=\"text-sm text-gray-600\">Active</p>\n              </div>\n              <div className=\"bg-purple-50 p-4 rounded-lg text-center\">\n                <p className=\"text-2xl font-bold text-purple-600\">{stats.completedActions}</p>\n                <p className=\"text-sm text-gray-600\">Completed</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Notifications */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Daily Notifications</h3>\n            \n            <div className=\"space-y-4\">\n              <div className=\"flex items-center space-x-3\">\n                <input\n                  type=\"checkbox\"\n                  id=\"notifications-enabled\"\n                  checked={notificationsEnabled}\n                  onChange={(e) => saveNotificationSettings(e.target.checked, notificationTime)}\n                  className=\"w-4 h-4 text-blue-600\"\n                />\n                <label htmlFor=\"notifications-enabled\" className=\"font-medium\">\n                  Enable daily notifications {notificationsEnabled ? 'âœ…' : 'âŒ'}\n                </label>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Notification Time\n                </label>\n                <input\n                  type=\"time\"\n                  value={notificationTime}\n                  onChange={(e) => saveNotificationSettings(notificationsEnabled, e.target.value)}\n                  className=\"p-2 border rounded-md\"\n                />\n              </div>\n              \n              <div className=\"flex flex-wrap gap-3\">\n                <button\n                  onClick={testNotification}\n                  className=\"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600\"\n                >\n                  ðŸ”” Test Browser Notification\n                </button>\n                <button\n                  onClick={generateTemplate}\n                  className=\"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600\"\n                >\n                  ðŸ“± Generate Message Template\n                </button>\n              </div>\n              \n              {/* Template Display */}\n              {templateData && (\n                <div className=\"p-4 bg-gray-50 border rounded-lg\">\n                  <h4 className=\"font-medium mb-2\">Generated Template:</h4>\n                  <textarea\n                    value={templateData}\n                    readOnly\n                    className=\"w-full h-32 p-2 border rounded text-sm font-mono\"\n                    onClick={(e) => e.target.select()}\n                  />\n                  <div className=\"flex gap-2 mt-2\">\n                    <button\n                      onClick={() => {\n                        if (navigator.clipboard) {\n                          navigator.clipboard.writeText(templateData);\n                          showStatus('âœ… Template copied to clipboard!');\n                        }\n                      }}\n                      className=\"px-3 py-1 bg-green-500 text-white text-sm rounded hover:bg-green-600\"\n                    >\n                      ðŸ“‹ Copy\n                    </button>\n                    <button\n                      onClick={() => setTemplateData('')}\n                      className=\"px-3 py-1 bg-gray-500 text-white text-sm rounded hover:bg-gray-600\"\n                    >\n                      âœ• Close\n                    </button>\n                  </div>\n                </div>\n              )}\n              \n              <div className=\"p-3 bg-blue-50 rounded-lg\">\n                <p className=\"text-sm text-blue-700\">\n                  â€¢ <strong>Status:</strong> {notificationsEnabled ? 'âœ… Enabled' : 'âŒ Disabled'}<br/>\n                  â€¢ <strong>Time:</strong> {notificationTime}<br/>\n                  â€¢ <strong>Browser Support:</strong> {typeof Notification !== 'undefined' ? 'âœ… Yes' : 'âŒ No'}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Data Management */}\n          <div className=\"bg-white p-6 rounded-lg shadow-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Data Management</h3>\n            <div className=\"space-y-4\">\n              \n              {/* Export Data */}\n              <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between p-4 bg-blue-50 rounded-lg\">\n                <div className=\"mb-3 sm:mb-0\">\n                  <h4 className=\"font-medium text-blue-900\">Export Data</h4>\n                  <p className=\"text-sm text-blue-700\">Copy all your data to clipboard or save as file</p>\n                </div>\n                <button\n                  onClick={exportAppData}\n                  className=\"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600\"\n                >\n                  ðŸ“¥ Export Data\n                </button>\n              </div>\n              \n              {/* Export Data Display */}\n              {exportData && (\n                <div className=\"p-4 bg-gray-50 border rounded-lg\">\n                  <h4 className=\"font-medium mb-2\">ðŸ“„ Export Data - Save as .json file:</h4>\n                  <textarea\n                    value={exportData}\n                    readOnly\n                    className=\"w-full h-40 p-2 border rounded text-xs font-mono\"\n                    onClick={(e) => e.target.select()}\n                  />\n                  <div className=\"flex gap-2 mt-2\">\n                    <button\n                      onClick={() => {\n                        if (navigator.clipboard) {\n                          navigator.clipboard.writeText(exportData);\n                          showStatus('âœ… Export data copied to clipboard!');\n                        }\n                      }}\n                      className=\"px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600\"\n                    >\n                      ðŸ“‹ Copy to Clipboard\n                    </button>\n                    <button\n                      onClick={() => setExportData('')}\n                      className=\"px-3 py-1 bg-gray-500 text-white text-sm rounded hover:bg-gray-600\"\n                    >\n                      âœ• Close\n                    </button>\n                  </div>\n                  <p className=\"text-xs text-gray-600 mt-1\">Paste into text editor and save as .json file</p>\n                </div>\n              )}\n\n              {/* Import Data */}\n              <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between p-4 bg-green-50 rounded-lg\">\n                <div className=\"mb-3 sm:mb-0\">\n                  <h4 className=\"font-medium text-green-900\">Import Data</h4>\n                  <p className=\"text-sm text-green-700\">Upload a previously exported JSON file</p>\n                </div>\n                <input\n                  type=\"file\"\n                  accept=\".json\"\n                  onChange={(e) => {\n                    const file = e.target.files[0];\n                    if (file) {\n                      importAppData(file);\n                      e.target.value = '';\n                    }\n                  }}\n                  className=\"block w-full sm:w-auto text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"\n                />\n              </div>\n\n              {/* Clear All Data */}\n              <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between p-4 bg-red-50 rounded-lg border border-red-200\">\n                <div className=\"mb-3 sm:mb-0\">\n                  <h4 className=\"font-medium text-red-900\">Clear All Data</h4>\n                  <p className=\"text-sm text-red-700\">\n                    {!clearConfirm && \"âš ï¸ Permanently delete all data\"}\n                    {clearConfirm && \"âš ï¸ Are you sure? This cannot be undone!\"}\n                  </p>\n                </div>\n                <button\n                  onClick={clearAllData}\n                  className={`px-4 py-2 text-white rounded-md ${\n                    clearConfirm \n                      ? 'bg-red-700 hover:bg-red-800 animate-pulse' \n                      : 'bg-red-500 hover:bg-red-600'\n                  }`}\n                >\n                  {clearConfirm ? 'âš ï¸ CONFIRM DELETE' : 'ðŸ—‘ï¸ Clear All Data'}\n                </button>\n              </div>\n              \n              {/* Help */}\n              <div className=\"p-3 bg-gray-50 rounded-lg\">\n                <h4 className=\"font-medium text-gray-700 mb-2\">ðŸ’¡ Sandbox Environment Tips</h4>\n                <ul className=\"text-sm text-gray-600 space-y-1\">\n                  <li>â€¢ Export copies data to clipboard - paste into text editor and save as .json</li>\n                  <li>â€¢ All feedback appears in status messages above</li>\n                  <li>â€¢ Browser notifications work if permission is granted</li>\n                  <li>â€¢ Templates can be copied for WhatsApp/Telegram</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;","size_bytes":59557},"server/achievement-seeder.ts":{"content":"import { db } from \"./db\";\nimport { achievements } from \"@shared/schema\";\nimport { ACHIEVEMENT_DEFINITIONS } from \"./achievements\";\nimport { eq } from \"drizzle-orm\";\n\n// Seed achievement definitions into the database\nexport async function seedAchievements(): Promise<void> {\n  console.log(\"Seeding achievement definitions...\");\n  \n  for (const achievement of ACHIEVEMENT_DEFINITIONS) {\n    try {\n      // Check if achievement already exists\n      const existing = await db.select().from(achievements).where(eq(achievements.badgeId, achievement.badgeId));\n      \n      if (existing.length === 0) {\n        await db.insert(achievements).values(achievement);\n        console.log(`âœ… Added achievement: ${achievement.name}`);\n      } else {\n        console.log(`âš ï¸  Achievement already exists: ${achievement.name}`);\n      }\n    } catch (error) {\n      console.error(`âŒ Error seeding achievement ${achievement.name}:`, error);\n    }\n  }\n  \n  console.log(\"Achievement seeding completed!\");\n}\n\n// Run seeder if called directly\nif (import.meta.url === `file://${process.argv[1]}`) {\n  seedAchievements().catch(console.error);\n}","size_bytes":1127},"server/achievement-tracker.ts":{"content":"import { storage } from \"./storage\";\nimport { \n  checkMeetingAchievements, \n  checkActionAchievements, \n  checkProductivityAchievements \n} from \"./achievements\";\nimport type { Meeting, Action } from \"@shared/schema\";\n\n/**\n * Achievement tracking service - automatically unlocks badges when users reach milestones\n */\n\nexport async function trackMeetingAchievements(userId: string, meeting: Meeting, actions: Action[] = []): Promise<string[]> {\n  try {\n    const stats = await storage.getStats(userId);\n    const userAchievements = await storage.getUserAchievements(userId);\n    const allAchievements = await storage.getAchievements();\n    \n    // Get currently unlocked achievement badge IDs\n    const unlockedBadgeIds = new Set(\n      userAchievements\n        .map(ua => allAchievements.find(a => a.id === ua.achievementId)?.badgeId)\n        .filter(Boolean)\n    );\n\n    const newlyEarnedBadges: string[] = [];\n\n    // Check meeting-based achievements\n    const meetingBadges = checkMeetingAchievements(userId, stats);\n    for (const badgeId of meetingBadges) {\n      if (!unlockedBadgeIds.has(badgeId)) {\n        const achievement = allAchievements.find(a => a.badgeId === badgeId);\n        if (achievement) {\n          await storage.unlockAchievement(userId, achievement.id);\n          newlyEarnedBadges.push(badgeId);\n          console.log(`ðŸŽ‰ User ${userId} unlocked achievement: ${achievement.name}`);\n        }\n      }\n    }\n\n    // Check productivity achievements for this specific meeting\n    const productivityBadges = checkProductivityAchievements(meeting, actions);\n    for (const badgeId of productivityBadges) {\n      if (!unlockedBadgeIds.has(badgeId)) {\n        const achievement = allAchievements.find(a => a.badgeId === badgeId);\n        if (achievement) {\n          await storage.unlockAchievement(userId, achievement.id);\n          newlyEarnedBadges.push(badgeId);\n          console.log(`ðŸŽ‰ User ${userId} unlocked achievement: ${achievement.name}`);\n        }\n      }\n    }\n\n    // Check team-building achievements\n    const employees = await storage.getEmployees(userId);\n    const meetings = await storage.getMeetings(userId);\n    const uniqueTeamMembers = new Set(meetings.map(m => m.employeeId)).size;\n    \n    if (uniqueTeamMembers >= 10 && !unlockedBadgeIds.has(\"team_builder\")) {\n      const achievement = allAchievements.find(a => a.badgeId === \"team_builder\");\n      if (achievement) {\n        await storage.unlockAchievement(userId, achievement.id);\n        newlyEarnedBadges.push(\"team_builder\");\n        console.log(`ðŸŽ‰ User ${userId} unlocked achievement: ${achievement.name}`);\n      }\n    }\n\n    return newlyEarnedBadges;\n  } catch (error) {\n    console.error(\"Error tracking meeting achievements:\", error);\n    return [];\n  }\n}\n\nexport async function trackActionAchievements(userId: string, action: Action): Promise<string[]> {\n  try {\n    const stats = await storage.getStats(userId);\n    const userAchievements = await storage.getUserAchievements(userId);\n    const allAchievements = await storage.getAchievements();\n    \n    // Get currently unlocked achievement badge IDs\n    const unlockedBadgeIds = new Set(\n      userAchievements\n        .map(ua => allAchievements.find(a => a.id === ua.achievementId)?.badgeId)\n        .filter(Boolean)\n    );\n\n    const newlyEarnedBadges: string[] = [];\n\n    // Check action-based achievements\n    const actionBadges = checkActionAchievements(userId, stats);\n    for (const badgeId of actionBadges) {\n      if (!unlockedBadgeIds.has(badgeId)) {\n        const achievement = allAchievements.find(a => a.badgeId === badgeId);\n        if (achievement) {\n          await storage.unlockAchievement(userId, achievement.id);\n          newlyEarnedBadges.push(badgeId);\n          console.log(`ðŸŽ‰ User ${userId} unlocked achievement: ${achievement.name}`);\n        }\n      }\n    }\n\n    return newlyEarnedBadges;\n  } catch (error) {\n    console.error(\"Error tracking action achievements:\", error);\n    return [];\n  }\n}\n\nexport async function checkWeeklyCompletion(userId: string): Promise<string[]> {\n  try {\n    const userAchievements = await storage.getUserAchievements(userId);\n    const allAchievements = await storage.getAchievements();\n    \n    // Get currently unlocked achievement badge IDs\n    const unlockedBadgeIds = new Set(\n      userAchievements\n        .map(ua => allAchievements.find(a => a.id === ua.achievementId)?.badgeId)\n        .filter(Boolean)\n    );\n\n    const newlyEarnedBadges: string[] = [];\n\n    // Check if all actions for this week are completed\n    const actions = await storage.getActions(userId);\n    const startOfWeek = new Date();\n    startOfWeek.setDate(startOfWeek.getDate() - startOfWeek.getDay());\n    startOfWeek.setHours(0, 0, 0, 0);\n    \n    const weekActions = actions.filter(action => {\n      // Since Action type doesn't have createdAt, use current date for now\n      // In production, you would add createdAt to the Action schema\n      const actionDate = new Date();\n      return actionDate >= startOfWeek;\n    });\n    \n    const allCompleted = weekActions.length > 0 && \n      weekActions.every(action => action.status === \"completed\");\n    \n    if (allCompleted && !unlockedBadgeIds.has(\"week_warrior\")) {\n      const achievement = allAchievements.find(a => a.badgeId === \"week_warrior\");\n      if (achievement) {\n        await storage.unlockAchievement(userId, achievement.id);\n        newlyEarnedBadges.push(\"week_warrior\");\n        console.log(`ðŸŽ‰ User ${userId} unlocked achievement: ${achievement.name}`);\n      }\n    }\n\n    return newlyEarnedBadges;\n  } catch (error) {\n    console.error(\"Error checking weekly completion:\", error);\n    return [];\n  }\n}","size_bytes":5684},"server/achievements.ts":{"content":"import { Achievement, UserAchievement, AchievementCategory, AchievementRarity } from \"@shared/schema\";\n\n// Achievement definitions - these define all available badges\nexport const ACHIEVEMENT_DEFINITIONS: Omit<Achievement, 'id' | 'createdAt'>[] = [\n  // Meeting-related achievements\n  {\n    badgeId: \"first_meeting\",\n    name: \"First Steps\",\n    description: \"Created your first meeting\",\n    icon: \"ðŸŽ¯\",\n    category: AchievementCategory.MEETINGS,\n    rarity: AchievementRarity.COMMON,\n    requirements: { meetingsCreated: 1 },\n    isActive: true,\n  },\n  {\n    badgeId: \"meeting_streak_5\",\n    name: \"Consistent Connector\",\n    description: \"Created 5 meetings in a row\",\n    icon: \"ðŸ”¥\",\n    category: AchievementCategory.MEETINGS,\n    rarity: AchievementRarity.COMMON,\n    requirements: { meetingsCreated: 5 },\n    isActive: true,\n  },\n  {\n    badgeId: \"meeting_master\",\n    name: \"Meeting Master\",\n    description: \"Created 25 meetings\",\n    icon: \"ðŸ‘‘\",\n    category: AchievementCategory.MEETINGS,\n    rarity: AchievementRarity.RARE,\n    requirements: { meetingsCreated: 25 },\n    isActive: true,\n  },\n  {\n    badgeId: \"meeting_legend\",\n    name: \"Meeting Legend\",\n    description: \"Created 100 meetings\",\n    icon: \"ðŸ†\",\n    category: AchievementCategory.MEETINGS,\n    rarity: AchievementRarity.LEGENDARY,\n    requirements: { meetingsCreated: 100 },\n    isActive: true,\n  },\n\n  // Action-related achievements\n  {\n    badgeId: \"first_action\",\n    name: \"Action Hero\",\n    description: \"Created your first action item\",\n    icon: \"âš¡\",\n    category: AchievementCategory.ACTIONS,\n    rarity: AchievementRarity.COMMON,\n    requirements: { actionsCreated: 1 },\n    isActive: true,\n  },\n  {\n    badgeId: \"task_completer\",\n    name: \"Task Completer\",\n    description: \"Completed 10 action items\",\n    icon: \"âœ…\",\n    category: AchievementCategory.ACTIONS,\n    rarity: AchievementRarity.COMMON,\n    requirements: { actionsCompleted: 10 },\n    isActive: true,\n  },\n  {\n    badgeId: \"productivity_pro\",\n    name: \"Productivity Pro\",\n    description: \"Completed 50 action items\",\n    icon: \"ðŸš€\",\n    category: AchievementCategory.ACTIONS,\n    rarity: AchievementRarity.RARE,\n    requirements: { actionsCompleted: 50 },\n    isActive: true,\n  },\n  {\n    badgeId: \"action_champion\",\n    name: \"Action Champion\",\n    description: \"Completed 200 action items\",\n    icon: \"ðŸ…\",\n    category: AchievementCategory.ACTIONS,\n    rarity: AchievementRarity.LEGENDARY,\n    requirements: { actionsCompleted: 200 },\n    isActive: true,\n  },\n\n  // Productivity achievements\n  {\n    badgeId: \"early_bird\",\n    name: \"Early Bird\",\n    description: \"Created a meeting before 9 AM\",\n    icon: \"ðŸŒ…\",\n    category: AchievementCategory.PRODUCTIVITY,\n    rarity: AchievementRarity.COMMON,\n    requirements: { earlyMeeting: true },\n    isActive: true,\n  },\n  {\n    badgeId: \"detailed_notes\",\n    name: \"Detail Oriented\",\n    description: \"Created a meeting with over 500 characters in notes\",\n    icon: \"ðŸ“\",\n    category: AchievementCategory.PRODUCTIVITY,\n    rarity: AchievementRarity.COMMON,\n    requirements: { longNotes: true },\n    isActive: true,\n  },\n  {\n    badgeId: \"action_packed\",\n    name: \"Action Packed\",\n    description: \"Created a meeting with 5+ action items\",\n    icon: \"âš¡\",\n    category: AchievementCategory.PRODUCTIVITY,\n    rarity: AchievementRarity.RARE,\n    requirements: { meetingWithManyActions: 5 },\n    isActive: true,\n  },\n  {\n    badgeId: \"team_builder\",\n    name: \"Team Builder\",\n    description: \"Had meetings with 10+ different team members\",\n    icon: \"ðŸ‘¥\",\n    category: AchievementCategory.SOCIAL,\n    rarity: AchievementRarity.RARE,\n    requirements: { uniqueTeamMembers: 10 },\n    isActive: true,\n  },\n\n  // Milestone achievements\n  {\n    badgeId: \"week_warrior\",\n    name: \"Week Warrior\",\n    description: \"Completed all actions for a week\",\n    icon: \"ðŸ—“ï¸\",\n    category: AchievementCategory.MILESTONES,\n    rarity: AchievementRarity.EPIC,\n    requirements: { weeklyCompletion: true },\n    isActive: true,\n  },\n  {\n    badgeId: \"perfectionist\",\n    name: \"Perfectionist\",\n    description: \"Maintain 100% action completion rate for 30 days\",\n    icon: \"ðŸ’Ž\",\n    category: AchievementCategory.MILESTONES,\n    rarity: AchievementRarity.LEGENDARY,\n    requirements: { perfectCompletionStreak: 30 },\n    isActive: true,\n  },\n];\n\n// Helper functions to check achievement progress\nexport function checkMeetingAchievements(userId: string, stats: any): string[] {\n  const earnedBadges: string[] = [];\n  \n  if (stats.totalMeetings >= 1) earnedBadges.push(\"first_meeting\");\n  if (stats.totalMeetings >= 5) earnedBadges.push(\"meeting_streak_5\");\n  if (stats.totalMeetings >= 25) earnedBadges.push(\"meeting_master\");\n  if (stats.totalMeetings >= 100) earnedBadges.push(\"meeting_legend\");\n\n  return earnedBadges;\n}\n\nexport function checkActionAchievements(userId: string, stats: any): string[] {\n  const earnedBadges: string[] = [];\n  \n  if (stats.totalActions >= 1) earnedBadges.push(\"first_action\");\n  if (stats.completedActions >= 10) earnedBadges.push(\"task_completer\");\n  if (stats.completedActions >= 50) earnedBadges.push(\"productivity_pro\");\n  if (stats.completedActions >= 200) earnedBadges.push(\"action_champion\");\n\n  return earnedBadges;\n}\n\nexport function checkProductivityAchievements(meeting: any, actions: any[]): string[] {\n  const earnedBadges: string[] = [];\n  \n  // Check if meeting was created early (before 9 AM)\n  const meetingHour = new Date(meeting.date).getHours();\n  if (meetingHour < 9) earnedBadges.push(\"early_bird\");\n  \n  // Check for detailed notes (over 500 characters)\n  if (meeting.notes && meeting.notes.length > 500) {\n    earnedBadges.push(\"detailed_notes\");\n  }\n  \n  // Check for action-packed meetings (5+ actions)\n  if (actions.length >= 5) {\n    earnedBadges.push(\"action_packed\");\n  }\n\n  return earnedBadges;\n}\n\nexport function getRarityColor(rarity: string): string {\n  switch (rarity) {\n    case 'common': return 'text-gray-600 bg-gray-100';\n    case 'rare': return 'text-blue-600 bg-blue-100';\n    case 'epic': return 'text-purple-600 bg-purple-100';\n    case 'legendary': return 'text-yellow-600 bg-yellow-100';\n    default: return 'text-gray-600 bg-gray-100';\n  }\n}\n\nexport function getRarityBorder(rarity: string): string {\n  switch (rarity) {\n    case 'common': return 'border-gray-300';\n    case 'rare': return 'border-blue-300';\n    case 'epic': return 'border-purple-300';\n    case 'legendary': return 'border-yellow-300 shadow-lg';\n    default: return 'border-gray-300';\n  }\n}","size_bytes":6551},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ \n  connectionString: process.env.DATABASE_URL,\n  // Add connection pool configuration for better resilience\n  max: 20, // Maximum number of clients in the pool\n  idleTimeoutMillis: 30000, // Close idle clients after 30 seconds\n  connectionTimeoutMillis: 10000, // Return an error if connection takes longer than 10 seconds\n});\n\n// Handle pool errors gracefully\npool.on('error', (err) => {\n  console.warn('PostgreSQL pool error (will retry):', err.message);\n});\n\nexport const db = drizzle({ client: pool, schema });","size_bytes":897},"server/email.ts":{"content":"import nodemailer from 'nodemailer';\nimport { storage } from './storage';\nimport { decryptText } from './encryption';\n\ninterface MeetingEmailData {\n  meetingId: number;\n  title?: string;\n  employeeName: string;\n  date: string;\n  notes: string;\n  recipientEmail: string;\n}\n\n// Create reusable transporter using Gmail SMTP\nasync function createTransporter(userId: string) {\n  const user = await storage.getUser(userId);\n  if (!user?.emailSenderAddress || !user?.emailSenderPassword || !user?.emailEnabled) {\n    throw new Error('Email configuration not found or disabled. Please configure email settings first.');\n  }\n\n  // Decrypt the email credentials\n  const decryptedPassword = decryptText(user.emailSenderPassword);\n  \n  return nodemailer.createTransport({\n    service: 'gmail',\n    auth: {\n      user: user.emailSenderAddress,\n      pass: decryptedPassword,\n    },\n  });\n}\n\nexport async function sendMeetingEmail(userId: string, meetingData: MeetingEmailData): Promise<void> {\n  try {\n    const transporter = await createTransporter(userId);\n    const user = await storage.getUser(userId);\n    \n    if (!user?.emailSenderAddress) {\n      throw new Error('Email sender address not configured');\n    }\n\n    const subject = meetingData.title \n      ? `Meeting Notes: ${meetingData.title} - ${meetingData.employeeName}`\n      : `Meeting Notes: ${meetingData.employeeName} - ${new Date(meetingData.date).toLocaleDateString()}`;\n\n    const htmlBody = `\n      <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;\">\n        <div style=\"background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;\">\n          <h1 style=\"color: #333; margin: 0 0 10px 0;\">Meeting Summary</h1>\n          ${meetingData.title ? `<h2 style=\"color: #666; margin: 0; font-size: 18px;\">${meetingData.title}</h2>` : ''}\n        </div>\n        \n        <div style=\"background-color: white; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px; margin-bottom: 20px;\">\n          <table style=\"width: 100%; border-collapse: collapse;\">\n            <tr>\n              <td style=\"padding: 8px 0; border-bottom: 1px solid #f1f3f4; font-weight: bold; color: #555;\">Participant:</td>\n              <td style=\"padding: 8px 0; border-bottom: 1px solid #f1f3f4;\">${meetingData.employeeName}</td>\n            </tr>\n            <tr>\n              <td style=\"padding: 8px 0; border-bottom: 1px solid #f1f3f4; font-weight: bold; color: #555;\">Date:</td>\n              <td style=\"padding: 8px 0; border-bottom: 1px solid #f1f3f4;\">${new Date(meetingData.date).toLocaleDateString()}</td>\n            </tr>\n          </table>\n        </div>\n\n        <div style=\"background-color: white; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px;\">\n          <h3 style=\"color: #333; margin: 0 0 15px 0; border-bottom: 2px solid #007bff; padding-bottom: 8px;\">Meeting Notes</h3>\n          <div style=\"white-space: pre-wrap; line-height: 1.6; color: #555; font-family: 'Courier New', monospace; background-color: #f8f9fa; padding: 15px; border-radius: 4px;\">${meetingData.notes}</div>\n        </div>\n\n        <div style=\"margin-top: 30px; padding: 15px; background-color: #f8f9fa; border-radius: 8px; text-align: center;\">\n          <p style=\"color: #666; margin: 0; font-size: 14px;\">\n            This email was sent automatically from the Meeting Tracker application.\n            <br>\n            Meeting ID: ${meetingData.meetingId} | Generated on ${new Date().toLocaleString()}\n          </p>\n        </div>\n      </div>\n    `;\n\n    const textBody = `\nMeeting Summary\n${meetingData.title ? `Title: ${meetingData.title}` : ''}\nParticipant: ${meetingData.employeeName}\nDate: ${new Date(meetingData.date).toLocaleDateString()}\n\nMeeting Notes:\n${meetingData.notes}\n\n---\nThis email was sent automatically from the Meeting Tracker application.\nMeeting ID: ${meetingData.meetingId} | Generated on ${new Date().toLocaleString()}\n    `;\n\n    await transporter.sendMail({\n      from: `\"Meeting Tracker\" <${user.emailSenderAddress}>`,\n      to: meetingData.recipientEmail,\n      subject: subject,\n      text: textBody,\n      html: htmlBody,\n    });\n\n    // Update meeting to mark email as sent\n    await storage.updateMeetingEmailStatus(meetingData.meetingId, true);\n    \n    console.log(`Meeting email sent successfully to ${meetingData.recipientEmail} for meeting ${meetingData.meetingId}`);\n  } catch (error) {\n    console.error('Error sending meeting email:', error);\n    throw new Error(`Failed to send meeting email: ${error instanceof Error ? error.message : 'Unknown error'}`);\n  }\n}\n\nexport async function testEmailConfiguration(userId: string, testRecipient: string): Promise<void> {\n  try {\n    const transporter = await createTransporter(userId);\n    const user = await storage.getUser(userId);\n    \n    if (!user?.emailSenderAddress) {\n      throw new Error('Email sender address not configured');\n    }\n\n    const testSubject = 'Meeting Tracker - Email Configuration Test';\n    const testHtml = `\n      <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;\">\n        <div style=\"background-color: #28a745; color: white; padding: 20px; border-radius: 8px; text-align: center; margin-bottom: 20px;\">\n          <h1 style=\"margin: 0;\">âœ… Email Configuration Test</h1>\n        </div>\n        \n        <div style=\"background-color: white; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px;\">\n          <p style=\"color: #333; line-height: 1.6;\">\n            Great news! Your Gmail SMTP configuration is working correctly.\n          </p>\n          \n          <div style=\"background-color: #f8f9fa; padding: 15px; border-radius: 4px; margin: 15px 0;\">\n            <p style=\"margin: 0; color: #666;\"><strong>Sender:</strong> ${user.emailSenderAddress}</p>\n            <p style=\"margin: 8px 0 0 0; color: #666;\"><strong>Test Time:</strong> ${new Date().toLocaleString()}</p>\n          </div>\n          \n          <p style=\"color: #333; line-height: 1.6;\">\n            You can now receive meeting summaries automatically when you create meetings with email recipients.\n          </p>\n        </div>\n        \n        <div style=\"margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 8px; text-align: center;\">\n          <p style=\"color: #666; margin: 0; font-size: 14px;\">\n            This is a test email from the Meeting Tracker application.\n          </p>\n        </div>\n      </div>\n    `;\n\n    const testText = `\nEmail Configuration Test - SUCCESS!\n\nYour Gmail SMTP configuration is working correctly.\n\nSender: ${user.emailSenderAddress}\nTest Time: ${new Date().toLocaleString()}\n\nYou can now receive meeting summaries automatically when you create meetings with email recipients.\n\n---\nThis is a test email from the Meeting Tracker application.\n    `;\n\n    await transporter.sendMail({\n      from: `\"Meeting Tracker\" <${user.emailSenderAddress}>`,\n      to: testRecipient,\n      subject: testSubject,\n      text: testText,\n      html: testHtml,\n    });\n\n    console.log(`Test email sent successfully to ${testRecipient} from ${userId}`);\n  } catch (error) {\n    console.error('Error sending test email:', error);\n    throw new Error(`Failed to send test email: ${error instanceof Error ? error.message : 'Unknown error'}`);\n  }\n}","size_bytes":7321},"server/encryption.ts":{"content":"import CryptoJS from 'crypto-js';\nimport bcrypt from 'bcryptjs';\n\n// Get encryption key from environment - mandatory for production\nconst ENCRYPTION_KEY = process.env.ENCRYPTION_KEY || 'default-dev-key-please-change-in-production';\n\n// Critical security check - prevent production use with default key\nif (!process.env.ENCRYPTION_KEY) {\n  if (process.env.NODE_ENV === 'production') {\n    throw new Error('CRITICAL SECURITY ERROR: ENCRYPTION_KEY environment variable must be set in production!');\n  }\n  console.warn('âš ï¸  WARNING: Using default encryption key. Please set ENCRYPTION_KEY environment variable in production!');\n}\n\n// Validate encryption key strength\nif (process.env.ENCRYPTION_KEY && process.env.ENCRYPTION_KEY.length < 32) {\n  throw new Error('SECURITY ERROR: ENCRYPTION_KEY must be at least 32 characters long for adequate security');\n}\n\n/**\n * Encrypts sensitive text data using AES encryption\n */\nexport function encryptText(text: string): string {\n  if (!text) return text;\n  \n  // Don't double-encrypt already encrypted data\n  if (text.startsWith('ENC:')) {\n    return text;\n  }\n  \n  const encrypted = CryptoJS.AES.encrypt(text, ENCRYPTION_KEY).toString();\n  return 'ENC:' + encrypted; // Add prefix to identify encrypted data\n}\n\n/**\n * Decrypts previously encrypted text data\n */\nexport function decryptText(encryptedText: string): string {\n  if (!encryptedText) return encryptedText;\n  \n  // Check if data is already encrypted (starts with a specific prefix)\n  if (!encryptedText.startsWith('ENC:')) {\n    return encryptedText; // Return as-is if not encrypted (backwards compatibility)\n  }\n  \n  try {\n    const actualEncryptedText = encryptedText.substring(4); // Remove 'ENC:' prefix\n    const bytes = CryptoJS.AES.decrypt(actualEncryptedText, ENCRYPTION_KEY);\n    const decrypted = bytes.toString(CryptoJS.enc.Utf8);\n    \n    if (!decrypted) {\n      console.warn('Decryption failed - empty result. Key length:', ENCRYPTION_KEY.length);\n      console.warn('Encrypted text preview:', encryptedText.substring(0, 20) + '...');\n      return encryptedText;\n    }\n    \n    return decrypted;\n  } catch (error) {\n    console.error('Decryption failed for text:', encryptedText.substring(0, 20) + '...');\n    console.error('Error:', error);\n    console.error('Key status:', ENCRYPTION_KEY ? `Set (${ENCRYPTION_KEY.length} chars)` : 'Not set');\n    return encryptedText; // Return original if decryption fails (for backwards compatibility)\n  }\n}\n\n/**\n * Hashes sensitive data using bcrypt (one-way hashing)\n * Use this for data that doesn't need to be decrypted but can be compared\n */\nexport function hashData(data: string): string {\n  return bcrypt.hashSync(data, 10);\n}\n\n/**\n * Compares data with its hash\n */\nexport function compareHash(data: string, hash: string): boolean {\n  return bcrypt.compareSync(data, hash);\n}\n\n/**\n * Encrypts an object with sensitive fields\n */\nexport function encryptSensitiveFields<T extends Record<string, any>>(\n  obj: T,\n  fieldsToEncrypt: (keyof T)[]\n): T {\n  const encrypted = { ...obj };\n  for (const field of fieldsToEncrypt) {\n    if (encrypted[field] && typeof encrypted[field] === 'string') {\n      (encrypted as any)[field] = encryptText(encrypted[field] as string);\n    }\n  }\n  return encrypted;\n}\n\n/**\n * Decrypts an object with encrypted fields\n */\nexport function decryptSensitiveFields<T extends Record<string, any>>(\n  obj: T,\n  fieldsToDecrypt: (keyof T)[]\n): T {\n  const decrypted = { ...obj };\n  for (const field of fieldsToDecrypt) {\n    if (decrypted[field] && typeof decrypted[field] === 'string') {\n      (decrypted as any)[field] = decryptText(decrypted[field] as string);\n    }\n  }\n  return decrypted;\n}\n\n// Define which fields should be encrypted for each entity\nexport const SENSITIVE_FIELDS = {\n  employees: ['name'] as const,\n  meetings: ['employeeName', 'title', 'notes'] as const,\n  actions: ['text', 'assignee', 'employeeName'] as const,\n  users: ['email', 'firstName', 'lastName', 'telegramChatId', 'emailSenderAddress', 'emailSenderPassword'] as const,\n} as const;","size_bytes":4048},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\nimport { initTelegramBot } from \"./telegram\";\nimport { securityHeaders, secureErrorHandler, apiRateLimit } from \"./security-middleware\";\n\nconst app = express();\n\n// Apply security middleware first\napp.use(securityHeaders);\napp.use(apiRateLimit);\napp.use(express.json({ limit: '10mb' })); // Limit request size\napp.use(express.urlencoded({ extended: false, limit: '10mb' }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"â€¦\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n  \n  // Initialize Telegram bot for notifications\n  await initTelegramBot();\n\n  // Use secure error handler\n  app.use(secureErrorHandler);\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2223},"server/insights.ts":{"content":"import { GoogleGenAI } from \"@google/genai\";\nimport type { Meeting, Action } from \"@shared/schema\";\n\n// Using Google Gemini 2.5 Flash for AI insights\nconst genai = new GoogleGenAI({ apiKey: process.env.GEMINI_API_KEY || \"\" });\n\nexport interface MeetingInsights {\n  keyPoints: string[];\n  actionRecommendations: string[];\n  followUpSuggestions: string[];\n  sentimentAnalysis: {\n    tone: 'positive' | 'neutral' | 'negative';\n    confidence: number;\n    summary: string;\n  };\n  effectiveness: {\n    score: number; // 1-10\n    strengths: string[];\n    improvements: string[];\n  };\n  nextSteps: string[];\n}\n\nexport async function generateMeetingInsights(\n  meeting: Meeting, \n  existingActions: Action[] = []\n): Promise<MeetingInsights> {\n  try {\n    const existingActionsText = existingActions.length > 0 \n      ? `\\n\\nExisting Actions:\\n${existingActions.map(a => `- ${a.text} (${a.assignee}, ${a.priority} priority)`).join('\\n')}`\n      : '';\n\n    const prompt = `Analyze this meeting and provide comprehensive insights:\n\nMeeting Title: ${meeting.title || 'Meeting with ' + meeting.employeeName}\nParticipant: ${meeting.employeeName}\nDate: ${meeting.date}\nNotes: ${meeting.notes}${existingActionsText}\n\nPlease provide a detailed analysis in JSON format with the following structure:\n{\n  \"keyPoints\": [\"Array of 3-5 most important discussion points\"],\n  \"actionRecommendations\": [\"Array of 3-5 suggested action items based on the discussion\"],\n  \"followUpSuggestions\": [\"Array of 2-4 specific follow-up recommendations\"],\n  \"sentimentAnalysis\": {\n    \"tone\": \"positive/neutral/negative\",\n    \"confidence\": 0.0-1.0,\n    \"summary\": \"Brief summary of the meeting tone and atmosphere\"\n  },\n  \"effectiveness\": {\n    \"score\": 1-10,\n    \"strengths\": [\"What went well in this meeting\"],\n    \"improvements\": [\"Areas for improvement in future meetings\"]\n  },\n  \"nextSteps\": [\"Array of 2-4 concrete next steps\"]\n}\n\nFocus on being practical and actionable. Consider the context of a manager meeting with a team member.`;\n\n    const response = await genai.models.generateContent({\n      model: \"gemini-2.5-flash\",\n      config: {\n        systemInstruction: \"You are an expert meeting analyst and management consultant. Provide practical, actionable insights for improving team management and meeting effectiveness. Always respond with valid JSON.\",\n        responseMimeType: \"application/json\",\n        responseSchema: {\n          type: \"object\",\n          properties: {\n            keyPoints: { type: \"array\", items: { type: \"string\" } },\n            actionRecommendations: { type: \"array\", items: { type: \"string\" } },\n            followUpSuggestions: { type: \"array\", items: { type: \"string\" } },\n            sentimentAnalysis: {\n              type: \"object\",\n              properties: {\n                tone: { type: \"string\", enum: [\"positive\", \"neutral\", \"negative\"] },\n                confidence: { type: \"number\" },\n                summary: { type: \"string\" }\n              },\n              required: [\"tone\", \"confidence\", \"summary\"]\n            },\n            effectiveness: {\n              type: \"object\",\n              properties: {\n                score: { type: \"number\" },\n                strengths: { type: \"array\", items: { type: \"string\" } },\n                improvements: { type: \"array\", items: { type: \"string\" } }\n              },\n              required: [\"score\", \"strengths\", \"improvements\"]\n            },\n            nextSteps: { type: \"array\", items: { type: \"string\" } }\n          },\n          required: [\"keyPoints\", \"actionRecommendations\", \"followUpSuggestions\", \"sentimentAnalysis\", \"effectiveness\", \"nextSteps\"]\n        }\n      },\n      contents: prompt,\n    });\n\n    const insights = JSON.parse(response.text || '{}');\n    \n    // Validate and ensure proper structure\n    return {\n      keyPoints: insights.keyPoints || [],\n      actionRecommendations: insights.actionRecommendations || [],\n      followUpSuggestions: insights.followUpSuggestions || [],\n      sentimentAnalysis: {\n        tone: insights.sentimentAnalysis?.tone || 'neutral',\n        confidence: Math.max(0, Math.min(1, insights.sentimentAnalysis?.confidence || 0.5)),\n        summary: insights.sentimentAnalysis?.summary || 'No sentiment analysis available'\n      },\n      effectiveness: {\n        score: Math.max(1, Math.min(10, insights.effectiveness?.score || 5)),\n        strengths: insights.effectiveness?.strengths || [],\n        improvements: insights.effectiveness?.improvements || []\n      },\n      nextSteps: insights.nextSteps || []\n    };\n\n  } catch (error) {\n    console.error('Error generating meeting insights:', error);\n    \n    // Handle specific Gemini errors\n    if (error.status === 429) {\n      throw new Error('Gemini API rate limit reached. Please try again in a few minutes.');\n    } else if (error.status === 401 || error.status === 403) {\n      throw new Error('Gemini API key is invalid or access denied. Please check your Google AI API key configuration.');\n    } else if (error.message?.includes('quota')) {\n      throw new Error('Gemini API quota exceeded. Please check your Google AI billing and usage limits.');\n    }\n    \n    throw new Error('Failed to generate meeting insights: ' + (error as Error).message);\n  }\n}\n\nexport async function generateBulkInsights(meetings: Meeting[]): Promise<string> {\n  try {\n    if (meetings.length === 0) {\n      return \"No meetings available for analysis.\";\n    }\n\n    const meetingsText = meetings.map(meeting => \n      `Meeting with ${meeting.employeeName} (${meeting.date}):\\n${meeting.notes}\\n`\n    ).join('\\n---\\n');\n\n    const prompt = `Analyze these recent meetings and provide high-level team insights:\n\n${meetingsText}\n\nProvide insights about:\n1. Overall team health and morale\n2. Common themes and patterns across meetings\n3. Team productivity trends\n4. Key areas needing attention\n5. Recommendations for team leadership\n\nKeep the analysis concise but insightful, focusing on actionable management recommendations.`;\n\n    const response = await genai.models.generateContent({\n      model: \"gemini-2.5-flash\",\n      config: {\n        systemInstruction: \"You are an expert team management consultant. Analyze meeting patterns to provide strategic insights for team leadership and organizational improvement.\"\n      },\n      contents: prompt,\n    });\n\n    return response.text || 'Unable to generate team insights.';\n\n  } catch (error) {\n    console.error('Error generating bulk insights:', error);\n    \n    // Handle specific Gemini errors\n    if (error.status === 429) {\n      throw new Error('Gemini API rate limit reached. Please try again in a few minutes.');\n    } else if (error.status === 401 || error.status === 403) {\n      throw new Error('Gemini API key is invalid or access denied. Please check your Google AI API key configuration.');\n    } else if (error.message?.includes('quota')) {\n      throw new Error('Gemini API quota exceeded. Please check your Google AI billing and usage limits.');\n    }\n    \n    throw new Error('Failed to generate team insights: ' + (error as Error).message);\n  }\n}","size_bytes":7070},"server/migrate-encryption.ts":{"content":"#!/usr/bin/env tsx\n/**\n * Migration script to encrypt existing data in the database\n * Run this once when deploying encryption to an existing database\n */\n\nimport { db } from './db';\nimport { employees, meetings, actions, users } from '@shared/schema';\nimport { encryptSensitiveFields, SENSITIVE_FIELDS } from './encryption';\n\nasync function migrateData() {\n  console.log('ðŸ”„ Starting data encryption migration...');\n  \n  try {\n    // Migrate employees\n    console.log('ðŸ“‹ Encrypting employee data...');\n    const allEmployees = await db.select().from(employees);\n    for (const employee of allEmployees) {\n      const encrypted = encryptSensitiveFields(employee, SENSITIVE_FIELDS.employees);\n      await db.update(employees)\n        .set({\n          name: encrypted.name,\n        })\n        .where({ id: employee.id });\n    }\n    console.log(`âœ… Encrypted ${allEmployees.length} employee records`);\n\n    // Migrate meetings\n    console.log('ðŸ¤ Encrypting meeting data...');\n    const allMeetings = await db.select().from(meetings);\n    for (const meeting of allMeetings) {\n      const encrypted = encryptSensitiveFields(meeting, SENSITIVE_FIELDS.meetings);\n      await db.update(meetings)\n        .set({\n          employeeName: encrypted.employeeName,\n          title: encrypted.title,\n          notes: encrypted.notes,\n        })\n        .where({ id: meeting.id });\n    }\n    console.log(`âœ… Encrypted ${allMeetings.length} meeting records`);\n\n    // Migrate actions\n    console.log('âœ… Encrypting action data...');\n    const allActions = await db.select().from(actions);\n    for (const action of allActions) {\n      const encrypted = encryptSensitiveFields(action, SENSITIVE_FIELDS.actions);\n      await db.update(actions)\n        .set({\n          text: encrypted.text,\n          assignee: encrypted.assignee,\n          employeeName: encrypted.employeeName,\n        })\n        .where({ id: action.id });\n    }\n    console.log(`âœ… Encrypted ${allActions.length} action records`);\n\n    // Migrate users\n    console.log('ðŸ‘¤ Encrypting user data...');\n    const allUsers = await db.select().from(users);\n    for (const user of allUsers) {\n      const encrypted = encryptSensitiveFields(user, SENSITIVE_FIELDS.users);\n      await db.update(users)\n        .set({\n          email: encrypted.email,\n          firstName: encrypted.firstName,\n          lastName: encrypted.lastName,\n          telegramChatId: encrypted.telegramChatId,\n        })\n        .where({ id: user.id });\n    }\n    console.log(`âœ… Encrypted ${allUsers.length} user records`);\n\n    console.log('ðŸŽ‰ Data encryption migration completed successfully!');\n    console.log('âš ï¸  Make sure to set a strong ENCRYPTION_KEY environment variable for production!');\n    \n  } catch (error) {\n    console.error('âŒ Migration failed:', error);\n    process.exit(1);\n  }\n}\n\n// Only run migration if this file is executed directly\nif (import.meta.url === `file://${process.argv[1]}`) {\n  migrateData()\n    .then(() => process.exit(0))\n    .catch((error) => {\n      console.error('Migration failed:', error);\n      process.exit(1);\n    });\n}\n\nexport { migrateData };","size_bytes":3132},"server/replitAuth.ts":{"content":"import * as client from \"openid-client\";\nimport { Strategy, type VerifyFunction } from \"openid-client/passport\";\n\nimport passport from \"passport\";\nimport session from \"express-session\";\nimport type { Express, RequestHandler } from \"express\";\nimport memoize from \"memoizee\";\nimport connectPg from \"connect-pg-simple\";\nimport { storage } from \"./storage\";\n\nif (!process.env.REPLIT_DOMAINS) {\n  throw new Error(\"Environment variable REPLIT_DOMAINS not provided\");\n}\n\nconst getOidcConfig = memoize(\n  async () => {\n    return await client.discovery(\n      new URL(process.env.ISSUER_URL ?? \"https://replit.com/oidc\"),\n      process.env.REPL_ID!\n    );\n  },\n  { maxAge: 3600 * 1000 }\n);\n\nexport function getSession() {\n  const sessionTtl = 7 * 24 * 60 * 60 * 1000; // 1 week\n  const pgStore = connectPg(session);\n  const sessionStore = new pgStore({\n    conString: process.env.DATABASE_URL,\n    createTableIfMissing: false,\n    ttl: sessionTtl,\n    tableName: \"sessions\",\n  });\n  return session({\n    secret: process.env.SESSION_SECRET!,\n    store: sessionStore,\n    resave: false,\n    saveUninitialized: false,\n    cookie: {\n      httpOnly: true,\n      secure: true, // Always secure since Replit deployments use HTTPS\n      sameSite: 'lax', // Changed from strict to lax for better OAuth compatibility\n      maxAge: sessionTtl,\n    },\n  });\n}\n\nfunction updateUserSession(\n  user: any,\n  tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers\n) {\n  user.claims = tokens.claims();\n  user.access_token = tokens.access_token;\n  user.refresh_token = tokens.refresh_token;\n  user.expires_at = user.claims?.exp;\n}\n\nasync function upsertUser(\n  claims: any,\n) {\n  // Check if this is the first user (make them admin)\n  const allUsers = await storage.getAllUsers();\n  const isFirstUser = allUsers.length === 0;\n  \n  const userData = {\n    id: claims[\"sub\"],\n    email: claims[\"email\"],\n    firstName: claims[\"first_name\"],\n    lastName: claims[\"last_name\"],\n    profileImageUrl: claims[\"profile_image_url\"],\n  };\n  \n  const user = await storage.upsertUser(userData);\n  \n  // If this is the first user, make them admin and approve them\n  if (isFirstUser) {\n    await storage.updateUserRole(user.id, 'admin');\n    await storage.approveUser(user.id);\n  }\n}\n\nexport async function setupAuth(app: Express) {\n  app.set(\"trust proxy\", 1); // Trust the Replit proxy\n  app.use(getSession());\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  const config = await getOidcConfig();\n\n  const verify: VerifyFunction = async (\n    tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers,\n    verified: passport.AuthenticateCallback\n  ) => {\n    const user = {};\n    updateUserSession(user, tokens);\n    await upsertUser(tokens.claims());\n    verified(null, user);\n  };\n\n  for (const domain of process.env\n    .REPLIT_DOMAINS!.split(\",\")) {\n    const strategy = new Strategy(\n      {\n        name: `replitauth:${domain}`,\n        config,\n        scope: \"openid email profile offline_access\",\n        callbackURL: `https://${domain}/api/callback`,\n      },\n      verify,\n    );\n    passport.use(strategy);\n  }\n\n  passport.serializeUser((user: Express.User, cb) => cb(null, user));\n  passport.deserializeUser((user: Express.User, cb) => cb(null, user));\n\n  app.get(\"/api/login\", (req, res, next) => {\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      prompt: \"login consent\",\n      scope: [\"openid\", \"email\", \"profile\", \"offline_access\"],\n    })(req, res, next);\n  });\n\n  app.get(\"/api/callback\", (req, res, next) => {\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      successReturnToOrRedirect: \"/\",\n      failureRedirect: \"/api/login\",\n      failureFlash: false, // Disable flash messages to prevent redirect loops\n    })(req, res, next);\n  });\n\n  app.get(\"/api/logout\", (req, res) => {\n    req.logout(() => {\n      res.redirect(\n        client.buildEndSessionUrl(config, {\n          client_id: process.env.REPL_ID!,\n          post_logout_redirect_uri: `https://${req.hostname}`, // Always use https for deployments\n        }).href\n      );\n    });\n  });\n}\n\nexport const isAuthenticated: RequestHandler = async (req, res, next) => {\n  const user = req.user as any;\n\n  if (!req.isAuthenticated() || !user.expires_at) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n\n  const now = Math.floor(Date.now() / 1000);\n  if (now <= user.expires_at) {\n    // Check if user is approved\n    const userId = user.claims.sub;\n    const dbUser = await storage.getUser(userId);\n    if (!dbUser?.isApproved) {\n      return res.status(403).json({ message: \"Access not approved. Please contact the administrator.\" });\n    }\n    return next();\n  }\n\n  const refreshToken = user.refresh_token;\n  if (!refreshToken) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n\n  try {\n    const config = await getOidcConfig();\n    const tokenResponse = await client.refreshTokenGrant(config, refreshToken);\n    updateUserSession(user, tokenResponse);\n    \n    // Check if user is approved after refresh\n    const userId = user.claims.sub;\n    const dbUser = await storage.getUser(userId);\n    if (!dbUser?.isApproved) {\n      return res.status(403).json({ message: \"Access not approved. Please contact the administrator.\" });\n    }\n    return next();\n  } catch (error) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n};","size_bytes":5411},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { insertEmployeeSchema, insertMeetingSchema, insertActionSchema, updateActionSchema } from \"@shared/schema\";\nimport { setupAuth, isAuthenticated } from \"./replitAuth\";\nimport { sendTestNotification, sendTestDailyNotification } from \"./telegram\";\nimport { \n  authRateLimit, \n  strictApiRateLimit, \n  sanitizeInput, \n  handleValidationErrors, \n  auditLogger,\n  logSecurityEvent \n} from \"./security-middleware\";\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Setup authentication middleware\n  await setupAuth(app);\n\n  // Auth routes with enhanced security\n  app.get('/api/auth/user', authRateLimit, isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      res.json(user);\n    } catch (error) {\n      logSecurityEvent('AUTH_ERROR', { userId: req.user?.claims?.sub, error: (error as Error).message });\n      res.status(500).json({ message: \"Failed to fetch user\" });\n    }\n  });\n  // Employee routes\n  app.get(\"/api/employees\", isAuthenticated, async (req: any, res: any) => {\n    try {\n      const userId = req.user.claims.sub;\n      const employees = await storage.getEmployees(userId);\n      res.json(employees);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch employees\" });\n    }\n  });\n\n  app.post(\"/api/employees\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const validated = insertEmployeeSchema.parse({ ...req.body, userId });\n      const employee = await storage.createEmployee(validated, userId);\n      res.status(201).json(employee);\n    } catch (error) {\n      console.error('Employee creation error:', error);\n      res.status(400).json({ message: \"Invalid employee data\", error: (error as Error).message });\n    }\n  });\n\n  app.put(\"/api/employees/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const id = parseInt(req.params.id);\n      const updates = insertEmployeeSchema.partial().parse(req.body);\n      const employee = await storage.updateEmployee(id, updates, userId);\n      if (!employee) {\n        return res.status(404).json({ message: \"Employee not found\" });\n      }\n      res.json(employee);\n    } catch (error) {\n      res.status(400).json({ message: \"Invalid employee data\" });\n    }\n  });\n\n  app.delete(\"/api/employees/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const id = parseInt(req.params.id);\n      const deleted = await storage.deleteEmployee(id, userId);\n      if (!deleted) {\n        return res.status(404).json({ message: \"Employee not found\" });\n      }\n      res.status(204).send();\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to delete employee\" });\n    }\n  });\n\n  // Meeting routes\n  app.get(\"/api/meetings\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const meetings = await storage.getMeetings(userId);\n      res.json(meetings);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch meetings\" });\n    }\n  });\n\n  app.post(\"/api/meetings\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const validated = insertMeetingSchema.parse({ ...req.body, userId });\n      const meeting = await storage.createMeeting(validated, userId);\n      \n      // Send email if recipient is provided and email is configured\n      if (meeting.emailRecipient) {\n        try {\n          const { sendMeetingEmail } = await import(\"./email\");\n          await sendMeetingEmail(userId, {\n            meetingId: meeting.id,\n            title: meeting.title,\n            employeeName: meeting.employeeName,\n            date: meeting.date,\n            notes: meeting.notes,\n            recipientEmail: meeting.emailRecipient,\n          });\n          console.log(`Email sent automatically for meeting ${meeting.id} to ${meeting.emailRecipient}`);\n        } catch (emailError) {\n          console.error('Failed to send meeting email:', emailError);\n          // Don't fail the meeting creation if email fails\n        }\n      }\n      \n      res.status(201).json(meeting);\n    } catch (error) {\n      console.error('Meeting creation error:', error);\n      res.status(400).json({ message: \"Invalid meeting data\", error: (error as Error).message });\n    }\n  });\n\n  app.put(\"/api/meetings/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const id = parseInt(req.params.id);\n      const updates = insertMeetingSchema.partial().parse(req.body);\n      const meeting = await storage.updateMeeting(id, updates, userId);\n      if (!meeting) {\n        return res.status(404).json({ message: \"Meeting not found\" });\n      }\n      res.json(meeting);\n    } catch (error) {\n      res.status(400).json({ message: \"Invalid meeting data\" });\n    }\n  });\n\n  app.delete(\"/api/meetings/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const id = parseInt(req.params.id);\n      const deleted = await storage.deleteMeeting(id, userId);\n      if (!deleted) {\n        return res.status(404).json({ message: \"Meeting not found\" });\n      }\n      res.status(204).send();\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to delete meeting\" });\n    }\n  });\n\n  // Action routes\n  app.get(\"/api/actions\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const actions = await storage.getActions(userId);\n      res.json(actions);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch actions\" });\n    }\n  });\n\n  app.post(\"/api/actions\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const validated = insertActionSchema.parse({ ...req.body, userId });\n      const action = await storage.createAction(validated, userId);\n      res.status(201).json(action);\n    } catch (error) {\n      console.error('Action creation error:', error);\n      res.status(400).json({ message: \"Invalid action data\", error: (error as Error).message });\n    }\n  });\n\n  app.put(\"/api/actions/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const id = parseInt(req.params.id);\n      const updates = updateActionSchema.parse(req.body);\n      const action = await storage.updateAction(id, updates, userId);\n      if (!action) {\n        return res.status(404).json({ message: \"Action not found\" });\n      }\n      res.json(action);\n    } catch (error) {\n      console.error('Update action error:', error);\n      \n      // Check if it's a database connection error\n      if ((error as any).message?.includes('terminating connection due to administrator command') ||\n          (error as any).code === '57P01') {\n        return res.status(503).json({ message: \"Database temporarily unavailable, please try again\" });\n      }\n      \n      res.status(400).json({ message: \"Invalid action data\", error: (error as Error).message });\n    }\n  });\n\n  app.delete(\"/api/actions/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const id = parseInt(req.params.id);\n      const deleted = await storage.deleteAction(id, userId);\n      if (!deleted) {\n        return res.status(404).json({ message: \"Action not found\" });\n      }\n      res.status(204).send();\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to delete action\" });\n    }\n  });\n\n  // Stats route\n  app.get(\"/api/stats\", isAuthenticated, async (req: any, res: any) => {\n    try {\n      const userId = req.user.claims.sub;\n      const stats = await storage.getStats(userId);\n      res.json(stats);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch stats\" });\n    }\n  });\n\n  // Insights routes\n  app.post(\"/api/insights/meeting/:id\", isAuthenticated, async (req: any, res: any) => {\n    try {\n      const userId = req.user.claims.sub;\n      const meetingId = parseInt(req.params.id);\n      \n      const meetings = await storage.getMeetings(userId);\n      const meeting = meetings.find(m => m.id === meetingId);\n      \n      if (!meeting) {\n        return res.status(404).json({ message: \"Meeting not found\" });\n      }\n\n      const actions = await storage.getActions(userId);\n      const meetingActions = actions.filter(a => a.meetingId === meetingId);\n      \n      const { generateMeetingInsights } = await import('./insights');\n      const insights = await generateMeetingInsights(meeting, meetingActions);\n      \n      res.json(insights);\n    } catch (error) {\n      console.error('Insights generation error:', error);\n      res.status(500).json({ \n        message: \"Failed to generate insights\", \n        error: (error as Error).message \n      });\n    }\n  });\n\n  app.get(\"/api/insights/team\", isAuthenticated, async (req: any, res: any) => {\n    try {\n      const userId = req.user.claims.sub;\n      const meetings = await storage.getMeetings(userId);\n      \n      // Get recent meetings (last 30 days)\n      const thirtyDaysAgo = new Date();\n      thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n      \n      const recentMeetings = meetings.filter(meeting => \n        new Date(meeting.date) >= thirtyDaysAgo\n      ).slice(0, 10); // Limit to 10 most recent\n      \n      const { generateBulkInsights } = await import('./insights');\n      const insights = await generateBulkInsights(recentMeetings);\n      \n      res.json({ insights, meetingCount: recentMeetings.length });\n    } catch (error) {\n      console.error('Team insights generation error:', error);\n      res.status(500).json({ \n        message: \"Failed to generate team insights\", \n        error: (error as Error).message \n      });\n    }\n  });\n\n  // Employee linking route (admin only)\n  app.post(\"/api/admin/employees/:id/link\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const employeeId = parseInt(req.params.id);\n      const { linkedUserId } = req.body;\n      \n      if (!linkedUserId) {\n        return res.status(400).json({ message: \"linkedUserId is required\" });\n      }\n      \n      const employee = await storage.linkEmployeeToUser(employeeId, linkedUserId, userId);\n      if (!employee) {\n        return res.status(404).json({ message: \"Employee not found or access denied\" });\n      }\n      \n      res.json(employee);\n    } catch (error) {\n      console.error('Employee linking error:', error);\n      res.status(500).json({ message: \"Failed to link employee to user\" });\n    }\n  });\n\n  // Admin routes for user management with enhanced security\n  app.get(\"/api/admin/users\", strictApiRateLimit, isAuthenticated, auditLogger('VIEW_ALL_USERS'), async (req: any, res: any) => {\n    try {\n      const currentUser = await storage.getUser(req.user.claims.sub);\n      if (currentUser?.role !== 'admin') {\n        logSecurityEvent('UNAUTHORIZED_ADMIN_ACCESS', { \n          userId: req.user.claims.sub, \n          userRole: currentUser?.role,\n          attemptedAction: 'VIEW_ALL_USERS'\n        });\n        return res.status(403).json({ message: \"Admin access required\" });\n      }\n      \n      const users = await storage.getAllUsers();\n      res.json(users);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch users\" });\n    }\n  });\n\n  app.post(\"/api/admin/users/:id/approve\", strictApiRateLimit, isAuthenticated, auditLogger('APPROVE_USER'), sanitizeInput, handleValidationErrors, async (req: any, res) => {\n    try {\n      const currentUser = await storage.getUser(req.user.claims.sub);\n      if (currentUser?.role !== 'admin') {\n        logSecurityEvent('UNAUTHORIZED_ADMIN_ACCESS', { \n          userId: req.user.claims.sub, \n          attemptedAction: 'APPROVE_USER',\n          targetUserId: req.params.id\n        });\n        return res.status(403).json({ message: \"Admin access required\" });\n      }\n      \n      const userId = req.params.id;\n      const user = await storage.approveUser(userId);\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      \n      logSecurityEvent('USER_APPROVED', { \n        adminUserId: req.user.claims.sub, \n        approvedUserId: userId \n      });\n      \n      res.json(user);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to approve user\" });\n    }\n  });\n\n  app.post(\"/api/admin/users/:id/role\", strictApiRateLimit, isAuthenticated, auditLogger('UPDATE_USER_ROLE'), sanitizeInput, handleValidationErrors, async (req: any, res) => {\n    try {\n      const currentUser = await storage.getUser(req.user.claims.sub);\n      if (currentUser?.role !== 'admin') {\n        logSecurityEvent('UNAUTHORIZED_ADMIN_ACCESS', { \n          userId: req.user.claims.sub, \n          attemptedAction: 'UPDATE_USER_ROLE',\n          targetUserId: req.params.id\n        });\n        return res.status(403).json({ message: \"Admin access required\" });\n      }\n      \n      const userId = req.params.id;\n      const { role } = req.body;\n      \n      if (!['admin', 'user'].includes(role)) {\n        return res.status(400).json({ message: \"Invalid role\" });\n      }\n      \n      const user = await storage.updateUserRole(userId, role);\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      \n      logSecurityEvent('USER_ROLE_UPDATED', { \n        adminUserId: req.user.claims.sub, \n        targetUserId: userId,\n        newRole: role,\n        previousRole: currentUser.role\n      });\n      \n      res.json(user);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to update user role\" });\n    }\n  });\n\n  // Notification routes\n  app.post(\"/api/notifications/telegram\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { chatId, enabled } = req.body;\n      \n      if (!chatId || typeof enabled !== 'boolean') {\n        return res.status(400).json({ message: \"Chat ID and enabled status are required\" });\n      }\n      \n      const user = await storage.updateUserTelegramSettings(userId, chatId, enabled);\n      res.json(user);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to update notification settings\" });\n    }\n  });\n\n  app.post(\"/api/notifications/test\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      \n      if (!user?.telegramChatId) {\n        return res.status(400).json({ message: \"Telegram chat ID not configured\" });\n      }\n      \n      await sendTestNotification(user.telegramChatId);\n      res.json({ message: \"Test notification sent successfully\" });\n    } catch (error) {\n      console.error(\"Error sending test notification:\", error);\n      res.status(500).json({ message: \"Failed to send test notification\" });\n    }\n  });\n\n  app.post(\"/api/notifications/test-daily\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      \n      if (!user?.telegramChatId) {\n        return res.status(400).json({ message: \"Telegram chat ID not configured\" });\n      }\n      \n      await sendTestDailyNotification(user.telegramChatId, userId);\n      res.json({ message: \"Test daily notification sent successfully\" });\n    } catch (error) {\n      console.error(\"Error sending test daily notification:\", error);\n      const errorMessage = error instanceof Error ? error.message : \"Failed to send test daily notification\";\n      res.status(500).json({ message: errorMessage });\n    }\n  });\n\n  // Notification schedule routes\n  app.get(\"/api/notification-schedules\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const schedules = await storage.getNotificationSchedules(userId);\n      res.json(schedules);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch notification schedules\" });\n    }\n  });\n\n  app.post(\"/api/notification-schedules\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const validated = req.body; // Simple validation for now\n      const schedule = await storage.createNotificationSchedule(validated, userId);\n      res.status(201).json(schedule);\n    } catch (error) {\n      res.status(400).json({ message: \"Invalid schedule data\" });\n    }\n  });\n\n  app.put(\"/api/notification-schedules/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const id = parseInt(req.params.id);\n      const updates = req.body;\n      const schedule = await storage.updateNotificationSchedule(id, updates, userId);\n      if (!schedule) {\n        return res.status(404).json({ message: \"Schedule not found\" });\n      }\n      res.json(schedule);\n    } catch (error) {\n      res.status(400).json({ message: \"Invalid schedule data\" });\n    }\n  });\n\n  app.delete(\"/api/notification-schedules/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const id = parseInt(req.params.id);\n      const deleted = await storage.deleteNotificationSchedule(id, userId);\n      if (!deleted) {\n        return res.status(404).json({ message: \"Schedule not found\" });\n      }\n      res.status(204).send();\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to delete schedule\" });\n    }\n  });\n\n  // Bot status endpoint for debugging\n  app.get(\"/api/notifications/bot-status\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { getBotStatus } = await import(\"./telegram\");\n      const status = getBotStatus();\n      res.json(status);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to get bot status\" });\n    }\n  });\n\n  // Email configuration endpoints\n  app.post(\"/api/email/settings\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { senderEmail, senderPassword, enabled } = req.body;\n      \n      if (!senderEmail || !senderPassword) {\n        return res.status(400).json({ message: \"Email and password are required\" });\n      }\n      \n      const user = await storage.updateUserEmailSettings(userId, senderEmail, senderPassword, enabled);\n      res.json(user);\n    } catch (error) {\n      console.error(\"Error updating email settings:\", error);\n      res.status(500).json({ message: \"Failed to update email settings\" });\n    }\n  });\n\n  app.post(\"/api/email/test\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { testRecipient } = req.body;\n      \n      if (!testRecipient) {\n        return res.status(400).json({ message: \"Test recipient email required\" });\n      }\n      \n      const { testEmailConfiguration } = await import(\"./email\");\n      await testEmailConfiguration(userId, testRecipient);\n      res.json({ message: \"Test email sent successfully\" });\n    } catch (error) {\n      console.error(\"Error sending test email:\", error);\n      const errorMessage = error instanceof Error ? error.message : \"Failed to send test email\";\n      res.status(500).json({ message: errorMessage });\n    }\n  });\n\n  app.post(\"/api/meetings/:id/send-email\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const meetingId = parseInt(req.params.id);\n      const { recipientEmail } = req.body;\n      \n      if (!recipientEmail) {\n        return res.status(400).json({ message: \"Recipient email is required\" });\n      }\n      \n      const meeting = await storage.getMeeting(meetingId, userId);\n      if (!meeting) {\n        return res.status(404).json({ message: \"Meeting not found\" });\n      }\n      \n      const { sendMeetingEmail } = await import(\"./email\");\n      await sendMeetingEmail(userId, {\n        meetingId: meeting.id,\n        title: meeting.title,\n        employeeName: meeting.employeeName,\n        date: meeting.date,\n        notes: meeting.notes,\n        recipientEmail,\n      });\n      \n      res.json({ message: \"Meeting email sent successfully\" });\n    } catch (error) {\n      console.error(\"Error sending meeting email:\", error);\n      const errorMessage = error instanceof Error ? error.message : \"Failed to send meeting email\";\n      res.status(500).json({ message: errorMessage });\n    }\n  });\n\n  // Achievement routes\n  app.get(\"/api/achievements\", async (req: any, res) => {\n    try {\n      const achievements = await storage.getAchievements();\n      res.json(achievements);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch achievements\" });\n    }\n  });\n\n  app.get(\"/api/achievements/user\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const userAchievements = await storage.getUserAchievements(userId);\n      const allAchievements = await storage.getAchievements();\n      \n      // Combine achievement details with user progress\n      const achievementsWithStatus = allAchievements.map(achievement => {\n        const userAchievement = userAchievements.find(ua => ua.achievementId === achievement.id);\n        return {\n          ...achievement,\n          unlocked: !!userAchievement,\n          unlockedAt: userAchievement?.unlockedAt || null,\n          isViewed: userAchievement?.isViewed ?? true,\n          userAchievementId: userAchievement?.id || null,\n        };\n      });\n\n      res.json(achievementsWithStatus);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch user achievements\" });\n    }\n  });\n\n  app.post(\"/api/achievements/:userAchievementId/viewed\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const userAchievementId = parseInt(req.params.userAchievementId);\n      const success = await storage.markAchievementViewed(userAchievementId, userId);\n      if (success) {\n        res.json({ message: \"Achievement marked as viewed\" });\n      } else {\n        res.status(404).json({ message: \"Achievement not found\" });\n      }\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to mark achievement as viewed\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":22579},"server/security-middleware.ts":{"content":"import rateLimit from 'express-rate-limit';\nimport helmet from 'helmet';\nimport { body, validationResult } from 'express-validator';\nimport type { Request, Response, NextFunction } from 'express';\n\n// Rate limiting configuration\nexport const createRateLimit = (windowMs: number, max: number, message: string) => {\n  return rateLimit({\n    windowMs,\n    max,\n    message: { error: message },\n    standardHeaders: true,\n    legacyHeaders: false,\n    // Store failed attempts in memory (consider Redis for production scaling)\n  });\n};\n\n// Different rate limits for different endpoints\nexport const authRateLimit = createRateLimit(\n  15 * 60 * 1000, // 15 minutes\n  5, // 5 attempts per window\n  'Too many authentication attempts, please try again later'\n);\n\nexport const apiRateLimit = createRateLimit(\n  1 * 60 * 1000, // 1 minute\n  500, // 500 requests per minute (increased for development)\n  'Too many requests, please try again later'\n);\n\nexport const strictApiRateLimit = createRateLimit(\n  1 * 60 * 1000, // 1 minute\n  100, // 100 requests per minute for sensitive operations (increased)\n  'Rate limit exceeded for sensitive operations'\n);\n\n// Security headers middleware - environment-aware CSP\nexport const securityHeaders = helmet({\n  contentSecurityPolicy: process.env.NODE_ENV === 'production' ? {\n    directives: {\n      defaultSrc: [\"'self'\"],\n      styleSrc: [\"'self'\", \"'unsafe-inline'\"],\n      scriptSrc: [\"'self'\"],\n      imgSrc: [\"'self'\", \"data:\", \"https:\"],\n      connectSrc: [\"'self'\"],\n      fontSrc: [\"'self'\"],\n      objectSrc: [\"'none'\"],\n      mediaSrc: [\"'self'\"],\n      frameSrc: [\"'none'\"],\n    },\n  } : {\n    directives: {\n      defaultSrc: [\"'self'\"],\n      styleSrc: [\"'self'\", \"'unsafe-inline'\"],\n      scriptSrc: [\"'self'\", \"'unsafe-inline'\", \"'unsafe-eval'\"],\n      imgSrc: [\"'self'\", \"data:\", \"https:\", \"blob:\"],\n      connectSrc: [\"'self'\", \"ws:\", \"wss:\", \"http:\", \"https:\"],\n      fontSrc: [\"'self'\", \"data:\"],\n      objectSrc: [\"'none'\"],\n      mediaSrc: [\"'self'\"],\n      frameSrc: [\"'none'\"],\n      workerSrc: [\"'self'\", \"blob:\"],\n    },\n  },\n  crossOriginEmbedderPolicy: false, // Needed for Replit functionality\n});\n\n// Input sanitization middleware\nexport const sanitizeInput = [\n  body('*').trim().escape(), // Basic XSS protection\n];\n\n// Validation error handler\nexport const handleValidationErrors = (req: Request, res: Response, next: NextFunction) => {\n  const errors = validationResult(req);\n  if (!errors.isEmpty()) {\n    return res.status(400).json({\n      error: 'Invalid input data',\n      details: errors.array().map(error => ({\n        field: error.type === 'field' ? error.path : 'unknown',\n        message: 'Invalid input detected'\n      }))\n    });\n  }\n  next();\n};\n\n// Enhanced error handler that doesn't leak sensitive information\nexport const secureErrorHandler = (err: any, req: Request, res: Response, next: NextFunction) => {\n  // Categorize different types of errors\n  const isDatabaseError = err.message?.includes('terminating connection due to administrator command') ||\n                          err.message?.includes('connection terminated') ||\n                          err.code === '57P01' ||\n                          err.code === 'ECONNRESET';\n  \n  const isValidationError = err.name === 'ValidationError' || err.status === 400;\n  const isAuthError = err.status === 401 || err.status === 403;\n  \n  // Log appropriately based on error type\n  if (isDatabaseError) {\n    console.warn('Database Connection Error (will retry):', {\n      error: err.message,\n      code: err.code,\n      path: req.path,\n      method: req.method\n    });\n  } else if (isValidationError || isAuthError) {\n    console.log('Client Error:', {\n      error: err.message,\n      status: err.status,\n      path: req.path,\n      method: req.method\n    });\n  } else {\n    // Only log as security error for unexpected server errors\n    console.error('Server Error:', {\n      error: err.message,\n      stack: process.env.NODE_ENV === 'development' ? err.stack : undefined,\n      path: req.path,\n      method: req.method,\n      ip: req.ip,\n      userAgent: req.get('User-Agent')\n    });\n  }\n\n  // Don't expose internal error details in production\n  const isDevelopment = process.env.NODE_ENV === 'development';\n  let message = 'An error occurred while processing your request';\n  \n  if (isDevelopment) {\n    message = err.message;\n  } else if (isDatabaseError) {\n    message = 'Database temporarily unavailable, please try again';\n  } else if (isValidationError) {\n    message = 'Invalid request data';\n  } else if (isAuthError) {\n    message = 'Authentication required';\n  }\n  \n  const statusCode = err.status || err.statusCode || (isDatabaseError ? 503 : 500);\n  \n  res.status(statusCode).json({\n    error: statusCode < 500 ? message : 'Internal server error',\n    ...(isDevelopment && { stack: err.stack })\n  });\n};\n\n// Security event logger\nexport const logSecurityEvent = (event: string, details: any) => {\n  console.warn(`SECURITY EVENT: ${event}`, {\n    timestamp: new Date().toISOString(),\n    ...details\n  });\n};\n\n// Audit logging middleware for sensitive operations\nexport const auditLogger = (operation: string) => {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const user = (req as any).user;\n    \n    logSecurityEvent('AUDIT_LOG', {\n      operation,\n      userId: user?.claims?.sub || 'anonymous',\n      ip: req.ip,\n      userAgent: req.get('User-Agent'),\n      path: req.path,\n      method: req.method\n    });\n    \n    next();\n  };\n};","size_bytes":5503},"server/storage.ts":{"content":"import { \n  employees, \n  meetings, \n  actions,\n  users,\n  notificationSchedules,\n  achievements,\n  userAchievements,\n  type Employee, \n  type InsertEmployee, \n  type Meeting, \n  type InsertMeeting, \n  type Action, \n  type InsertAction,\n  type UpdateAction,\n  type User,\n  type UpsertUser,\n  type NotificationSchedule,\n  type InsertNotificationSchedule,\n  type UpdateNotificationSchedule,\n  type Achievement,\n  type InsertAchievement,\n  type UserAchievement,\n  type InsertUserAchievement,\n  ActionStatus \n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, count, and, or } from \"drizzle-orm\";\nimport { \n  encryptSensitiveFields, \n  decryptSensitiveFields, \n  encryptText,\n  SENSITIVE_FIELDS \n} from \"./encryption\";\n\nexport interface IStorage {\n  // User operations (required for authentication)\n  getUser(id: string): Promise<User | undefined>;\n  upsertUser(user: UpsertUser): Promise<User>;\n  \n  // Admin operations for access control\n  getAllUsers(): Promise<User[]>;\n  approveUser(id: string): Promise<User | undefined>;\n  updateUserRole(id: string, role: string): Promise<User | undefined>;\n  \n  // Notification operations\n  updateUserTelegramSettings(userId: string, chatId: string, enabled: boolean): Promise<User>;\n  updateUserEmailSettings(userId: string, senderEmail: string, senderPassword: string, enabled: boolean): Promise<User>;\n  getUsersWithNotifications(): Promise<User[]>;\n  disableNotificationsForChatId(chatId: string): Promise<void>;\n  \n  // Notification schedules\n  getNotificationSchedules(userId: string): Promise<NotificationSchedule[]>;\n  createNotificationSchedule(schedule: InsertNotificationSchedule, userId: string): Promise<NotificationSchedule>;\n  updateNotificationSchedule(id: number, updates: UpdateNotificationSchedule, userId: string): Promise<NotificationSchedule | undefined>;\n  deleteNotificationSchedule(id: number, userId: string): Promise<boolean>;\n\n  // Employees (user-scoped)\n  getEmployees(userId: string): Promise<Employee[]>;\n  getEmployee(id: number, userId: string): Promise<Employee | undefined>;\n  createEmployee(employee: InsertEmployee, userId: string): Promise<Employee>;\n  updateEmployee(id: number, updates: Partial<InsertEmployee>, userId: string): Promise<Employee | undefined>;\n  deleteEmployee(id: number, userId: string): Promise<boolean>;\n  linkEmployeeToUser(employeeId: number, linkedUserId: string | null, managerId: string): Promise<Employee | undefined>;\n\n  // Meetings (user-scoped)\n  getMeetings(userId: string): Promise<Meeting[]>;\n  getMeeting(id: number, userId: string): Promise<Meeting | undefined>;\n  createMeeting(meeting: InsertMeeting, userId: string): Promise<Meeting>;\n  updateMeeting(id: number, updates: Partial<InsertMeeting>, userId: string): Promise<Meeting | undefined>;\n  deleteMeeting(id: number, userId: string): Promise<boolean>;\n  updateMeetingEmailStatus(meetingId: number, emailSent: boolean): Promise<void>;\n\n  // Actions (user-scoped + cross-user assignments)\n  getActions(userId: string): Promise<Action[]>;\n  getAction(id: number, userId: string): Promise<Action | undefined>;\n  createAction(action: InsertAction, userId: string): Promise<Action>;\n  updateAction(id: number, updates: UpdateAction, userId: string): Promise<Action | undefined>;\n  deleteAction(id: number, userId: string): Promise<boolean>;\n  getActionsByMeeting(meetingId: number, userId: string): Promise<Action[]>;\n  getActionsByStatus(status: string, userId: string): Promise<Action[]>;\n  getAssignedActions(userId: string): Promise<Action[]>; // Actions assigned TO this user\n\n  // Stats (user-scoped)\n  getStats(userId: string): Promise<{\n    totalEmployees: number;\n    totalMeetings: number;\n    totalActions: number;\n    activeActions: number;\n    completedActions: number;\n    overdueActions: number;\n  }>;\n\n  // Achievements\n  getAchievements(): Promise<Achievement[]>;\n  getUserAchievements(userId: string): Promise<UserAchievement[]>;\n  unlockAchievement(userId: string, achievementId: number): Promise<UserAchievement>;\n  markAchievementViewed(userAchievementId: number, userId: string): Promise<boolean>;\n}\n\nexport class MemStorage implements IStorage {\n  private employees: Map<number, Employee>;\n  private meetings: Map<number, Meeting>;\n  private actions: Map<number, Action>;\n  private users: Map<string, User>;\n  private currentId: number;\n\n  constructor() {\n    this.employees = new Map();\n    this.meetings = new Map();\n    this.actions = new Map();\n    this.users = new Map();\n    this.currentId = 1;\n    this.initSampleData();\n  }\n\n  private initSampleData() {\n    // Sample employees\n    const emp1: Employee = {\n      id: this.currentId++,\n      name: \"Sarah Johnson\",\n      role: \"Senior Developer\",\n      department: \"Engineering\",\n      relationship: \"Direct Report\"\n    };\n    const emp2: Employee = {\n      id: this.currentId++,\n      name: \"Mike Chen\",\n      role: \"Product Manager\",\n      department: \"Product\",\n      relationship: \"Peer\"\n    };\n    this.employees.set(emp1.id, emp1);\n    this.employees.set(emp2.id, emp2);\n\n    // Sample meetings\n    const meeting1: Meeting = {\n      id: this.currentId++,\n      employeeId: emp1.id,\n      employeeName: emp1.name,\n      title: \"Q1 Planning Meeting\",\n      date: \"2024-01-15\",\n      notes: `# Q1 Planning Meeting\nDiscussed upcoming quarter goals and resource allocation.\n\n## Key Discussion Points\n- **Budget approval** for new development tools\n- Timeline confirmed for customer feature requests\n- **Performance review** preparation needed\n\n## Action Items\n- Submit training budget by end of week\n- Schedule architecture review meeting`\n    };\n\n    const meeting2: Meeting = {\n      id: this.currentId++,\n      employeeId: emp2.id,\n      employeeName: emp2.name,\n      title: \"Performance Review Meeting\",\n      date: \"2024-01-16\",\n      notes: `# Performance Review Meeting\nDiscussed Mike's progress and future opportunities.\n\n## Achievements\n- **Successfully launched** three major features\n- Improved team collaboration\n\n## Goals for Next Quarter\n- Lead the mobile app initiative\n- Complete project management certification`\n    };\n\n    this.meetings.set(meeting1.id, meeting1);\n    this.meetings.set(meeting2.id, meeting2);\n\n    // Sample actions\n    const actions: Action[] = [\n      {\n        id: this.currentId++,\n        text: \"Submit training budget proposal\",\n        assignee: \"me\",\n        status: ActionStatus.PENDING,\n        priority: \"high\",\n        meetingId: meeting1.id,\n        employeeName: emp1.name\n      },\n      {\n        id: this.currentId++,\n        text: \"Schedule architecture review meeting\",\n        assignee: emp1.name,\n        status: ActionStatus.IN_PROGRESS,\n        priority: \"medium\",\n        meetingId: meeting1.id,\n        employeeName: emp1.name\n      },\n      {\n        id: this.currentId++,\n        text: \"Complete project management certification\",\n        assignee: emp2.name,\n        status: ActionStatus.IN_PROGRESS,\n        priority: \"medium\",\n        meetingId: meeting2.id,\n        employeeName: emp2.name\n      },\n      {\n        id: this.currentId++,\n        text: \"Update project documentation\",\n        assignee: \"me\",\n        status: ActionStatus.COMPLETED,\n        priority: \"low\",\n        meetingId: meeting1.id,\n        employeeName: emp1.name\n      }\n    ];\n\n    actions.forEach(action => this.actions.set(action.id, action));\n  }\n\n  // User methods (required for authentication)\n  async getUser(id: string): Promise<User | undefined> {\n    return this.users.get(id);\n  }\n\n  async upsertUser(userData: UpsertUser): Promise<User> {\n    const existingUser = this.users.get(userData.id!);\n    const user: User = {\n      id: userData.id!,\n      email: userData.email || null,\n      firstName: userData.firstName || null,\n      lastName: userData.lastName || null,\n      profileImageUrl: userData.profileImageUrl || null,\n      isApproved: existingUser?.isApproved || false,\n      role: existingUser?.role || 'user',\n      telegramChatId: existingUser?.telegramChatId || null,\n      notificationsEnabled: existingUser?.notificationsEnabled || false,\n      createdAt: existingUser?.createdAt || new Date(),\n      updatedAt: new Date(),\n    };\n    this.users.set(user.id, user);\n    return user;\n  }\n\n  // Admin operations for access control\n  async getAllUsers(): Promise<User[]> {\n    return Array.from(this.users.values());\n  }\n\n  async approveUser(id: string): Promise<User | undefined> {\n    const user = this.users.get(id);\n    if (!user) return undefined;\n    \n    const updatedUser = { ...user, isApproved: true, updatedAt: new Date() };\n    this.users.set(id, updatedUser);\n    return updatedUser;\n  }\n\n  async updateUserRole(id: string, role: string): Promise<User | undefined> {\n    const user = this.users.get(id);\n    if (!user) return undefined;\n    \n    const updatedUser = { ...user, role, updatedAt: new Date() };\n    this.users.set(id, updatedUser);\n    return updatedUser;\n  }\n\n  // Notification operations\n  async updateUserTelegramSettings(userId: string, chatId: string, enabled: boolean): Promise<User> {\n    const user = this.users.get(userId);\n    if (!user) throw new Error('User not found');\n    \n    const updatedUser = { \n      ...user, \n      telegramChatId: chatId, \n      notificationsEnabled: enabled, \n      updatedAt: new Date() \n    };\n    this.users.set(userId, updatedUser);\n    return updatedUser;\n  }\n\n  async updateUserEmailSettings(userId: string, senderEmail: string, senderPassword: string, enabled: boolean): Promise<User> {\n    const user = this.users.get(userId);\n    if (!user) throw new Error('User not found');\n    \n    // Import encryption functions\n    const { encryptText } = await import('./encryption');\n    \n    const updatedUser = { \n      ...user, \n      emailSenderAddress: senderEmail,\n      emailSenderPassword: encryptText(senderPassword), // Encrypt the password before storing\n      emailEnabled: enabled,\n      updatedAt: new Date() \n    };\n    this.users.set(userId, updatedUser);\n    return updatedUser;\n  }\n\n  async getUsersWithNotifications(): Promise<User[]> {\n    return Array.from(this.users.values()).filter(\n      user => user.notificationsEnabled && user.isApproved\n    );\n  }\n\n  async disableNotificationsForChatId(chatId: string): Promise<void> {\n    for (const user of Array.from(this.users.values())) {\n      if (user.telegramChatId === chatId) {\n        this.users.set(user.id, { \n          ...user, \n          notificationsEnabled: false, \n          updatedAt: new Date() \n        });\n        break;\n      }\n    }\n  }\n\n  // Notification schedules (stubbed for MemStorage)\n  async getNotificationSchedules(userId: string): Promise<NotificationSchedule[]> {\n    return []; // MemStorage doesn't support notification schedules\n  }\n\n  async createNotificationSchedule(schedule: InsertNotificationSchedule, userId: string): Promise<NotificationSchedule> {\n    throw new Error('MemStorage does not support notification schedules');\n  }\n\n  async updateNotificationSchedule(id: number, updates: UpdateNotificationSchedule, userId: string): Promise<NotificationSchedule | undefined> {\n    throw new Error('MemStorage does not support notification schedules');\n  }\n\n  async deleteNotificationSchedule(id: number, userId: string): Promise<boolean> {\n    throw new Error('MemStorage does not support notification schedules');\n  }\n\n  // Employee methods\n  async getEmployees(): Promise<Employee[]> {\n    return Array.from(this.employees.values());\n  }\n\n  async getEmployee(id: number): Promise<Employee | undefined> {\n    return this.employees.get(id);\n  }\n\n  async createEmployee(employee: InsertEmployee): Promise<Employee> {\n    const newEmployee: Employee = { id: this.currentId++, ...employee };\n    this.employees.set(newEmployee.id, newEmployee);\n    return newEmployee;\n  }\n\n  async updateEmployee(id: number, updates: Partial<InsertEmployee>): Promise<Employee | undefined> {\n    const employee = this.employees.get(id);\n    if (!employee) return undefined;\n    \n    const updated = { ...employee, ...updates };\n    this.employees.set(id, updated);\n    return updated;\n  }\n\n  async deleteEmployee(id: number): Promise<boolean> {\n    return this.employees.delete(id);\n  }\n\n  async linkEmployeeToUser(employeeId: number, linkedUserId: string | null, managerId: string): Promise<Employee | undefined> {\n    const employee = this.employees.get(employeeId);\n    if (!employee) return undefined;\n    \n    const updated = { ...employee, linkedUserId };\n    this.employees.set(employeeId, updated);\n    return updated;\n  }\n\n  // Meeting methods\n  async getMeetings(): Promise<Meeting[]> {\n    return Array.from(this.meetings.values());\n  }\n\n  async getMeeting(id: number): Promise<Meeting | undefined> {\n    return this.meetings.get(id);\n  }\n\n  async createMeeting(meeting: InsertMeeting): Promise<Meeting> {\n    const newMeeting: Meeting = { \n      id: this.currentId++, \n      ...meeting,\n      title: meeting.title || null\n    };\n    this.meetings.set(newMeeting.id, newMeeting);\n    return newMeeting;\n  }\n\n  async updateMeeting(id: number, updates: Partial<InsertMeeting>): Promise<Meeting | undefined> {\n    const meeting = this.meetings.get(id);\n    if (!meeting) return undefined;\n    \n    const updated = { ...meeting, ...updates };\n    this.meetings.set(id, updated);\n    return updated;\n  }\n\n  async deleteMeeting(id: number): Promise<boolean> {\n    return this.meetings.delete(id);\n  }\n\n  async updateMeetingEmailStatus(meetingId: number, emailSent: boolean): Promise<void> {\n    const meeting = this.meetings.get(meetingId);\n    if (meeting) {\n      const updated = { ...meeting, emailSent };\n      this.meetings.set(meetingId, updated);\n    }\n  }\n\n  // Action methods\n  async getActions(): Promise<Action[]> {\n    return Array.from(this.actions.values());\n  }\n\n  async getAction(id: number): Promise<Action | undefined> {\n    return this.actions.get(id);\n  }\n\n  async createAction(action: InsertAction, userId: string): Promise<Action> {\n    // Look up if the assignee is a linked employee\n    let assignedToUserId: string | null = null;\n    if (action.assignee) {\n      const linkedEmployee = Array.from(this.employees.values()).find(emp => \n        emp.name === action.assignee && emp.userId === userId\n      );\n      \n      if (linkedEmployee?.linkedUserId) {\n        assignedToUserId = linkedEmployee.linkedUserId;\n      }\n    }\n\n    const newAction: Action = { \n      id: this.currentId++, \n      ...action,\n      status: action.status || \"pending\",\n      priority: action.priority || \"medium\",\n      meetingId: action.meetingId || null,\n      userId,\n      assignedToUserId\n    };\n    this.actions.set(newAction.id, newAction);\n    return newAction;\n  }\n\n  async updateAction(id: number, updates: UpdateAction): Promise<Action | undefined> {\n    const action = this.actions.get(id);\n    if (!action) return undefined;\n    \n    const updated = { ...action, ...updates };\n    this.actions.set(id, updated);\n    return updated;\n  }\n\n  async deleteAction(id: number): Promise<boolean> {\n    return this.actions.delete(id);\n  }\n\n  async getActionsByMeeting(meetingId: number): Promise<Action[]> {\n    return Array.from(this.actions.values()).filter(action => action.meetingId === meetingId);\n  }\n\n  async getActionsByStatus(status: string): Promise<Action[]> {\n    return Array.from(this.actions.values()).filter(action => action.status === status);\n  }\n\n  async getAssignedActions(userId: string): Promise<Action[]> {\n    return Array.from(this.actions.values()).filter(action => action.assignedToUserId === userId);\n  }\n\n  async getStats(): Promise<{\n    totalEmployees: number;\n    totalMeetings: number;\n    totalActions: number;\n    activeActions: number;\n    completedActions: number;\n    overdueActions: number;\n  }> {\n    const allActions = Array.from(this.actions.values());\n    return {\n      totalEmployees: this.employees.size,\n      totalMeetings: this.meetings.size,\n      totalActions: allActions.length,\n      activeActions: allActions.filter(a => a.status !== ActionStatus.COMPLETED).length,\n      completedActions: allActions.filter(a => a.status === ActionStatus.COMPLETED).length,\n      overdueActions: allActions.filter(a => a.priority === \"high\" && a.status !== ActionStatus.COMPLETED).length,\n    };\n  }\n\n  // Achievement methods (simplified for memory storage)\n  async getAchievements(): Promise<Achievement[]> {\n    // Return empty array for memory storage - achievements would be initialized in real app\n    return [];\n  }\n\n  async getUserAchievements(userId: string): Promise<UserAchievement[]> {\n    // Return empty array for memory storage\n    return [];\n  }\n\n  async unlockAchievement(userId: string, achievementId: number): Promise<UserAchievement> {\n    // Mock achievement for memory storage\n    return {\n      id: Date.now(),\n      userId,\n      achievementId,\n      unlockedAt: new Date(),\n      progress: null,\n      isViewed: false,\n    };\n  }\n\n  async markAchievementViewed(userAchievementId: number, userId: string): Promise<boolean> {\n    return true;\n  }\n}\n\n// Database storage implementation\nexport class DatabaseStorage implements IStorage {\n  // User methods (required for authentication)\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    if (!user) return undefined;\n    return decryptSensitiveFields(user, SENSITIVE_FIELDS.users);\n  }\n\n  async upsertUser(userData: UpsertUser): Promise<User> {\n    const encryptedUserData = encryptSensitiveFields({\n      ...userData,\n      isApproved: false, // New users need approval by default\n      role: 'user',\n    }, SENSITIVE_FIELDS.users);\n    \n    const [user] = await db\n      .insert(users)\n      .values(encryptedUserData)\n      .onConflictDoUpdate({\n        target: users.id,\n        set: {\n          email: encryptedUserData.email,\n          firstName: encryptedUserData.firstName,\n          lastName: encryptedUserData.lastName,\n          profileImageUrl: userData.profileImageUrl, // Profile image URL is not sensitive\n          updatedAt: new Date(),\n        },\n      })\n      .returning();\n    return decryptSensitiveFields(user, SENSITIVE_FIELDS.users);\n  }\n\n  // Admin operations for access control\n  async getAllUsers(): Promise<User[]> {\n    const encryptedUsers = await db.select().from(users);\n    return encryptedUsers.map(user => \n      decryptSensitiveFields(user, SENSITIVE_FIELDS.users)\n    );\n  }\n\n  async approveUser(id: string): Promise<User | undefined> {\n    const [user] = await db\n      .update(users)\n      .set({ isApproved: true, updatedAt: new Date() })\n      .where(eq(users.id, id))\n      .returning();\n    if (!user) return undefined;\n    return decryptSensitiveFields(user, SENSITIVE_FIELDS.users);\n  }\n\n  async updateUserRole(id: string, role: string): Promise<User | undefined> {\n    const [user] = await db\n      .update(users)\n      .set({ role, updatedAt: new Date() })\n      .where(eq(users.id, id))\n      .returning();\n    if (!user) return undefined;\n    return decryptSensitiveFields(user, SENSITIVE_FIELDS.users);\n  }\n\n  // Notification operations\n  async updateUserTelegramSettings(userId: string, chatId: string, enabled: boolean): Promise<User> {\n    const encryptedChatId = encryptText(chatId);\n    const [user] = await db\n      .update(users)\n      .set({\n        telegramChatId: encryptedChatId,\n        notificationsEnabled: enabled,\n        updatedAt: new Date(),\n      })\n      .where(eq(users.id, userId))\n      .returning();\n    return decryptSensitiveFields(user, SENSITIVE_FIELDS.users);\n  }\n\n  async updateUserEmailSettings(userId: string, senderEmail: string, senderPassword: string, enabled: boolean): Promise<User> {\n    const encryptedEmail = encryptText(senderEmail);\n    const encryptedPassword = encryptText(senderPassword);\n    const [user] = await db\n      .update(users)\n      .set({\n        emailSenderAddress: encryptedEmail,\n        emailSenderPassword: encryptedPassword,\n        emailEnabled: enabled,\n        updatedAt: new Date(),\n      })\n      .where(eq(users.id, userId))\n      .returning();\n    return decryptSensitiveFields(user, SENSITIVE_FIELDS.users);\n  }\n\n  async getUsersWithNotifications(): Promise<User[]> {\n    const encryptedUsers = await db\n      .select()\n      .from(users)\n      .where(and(\n        eq(users.notificationsEnabled, true),\n        eq(users.isApproved, true)\n      ));\n    return encryptedUsers.map(user => \n      decryptSensitiveFields(user, SENSITIVE_FIELDS.users)\n    );\n  }\n\n  async disableNotificationsForChatId(chatId: string): Promise<void> {\n    const encryptedChatId = encryptText(chatId);\n    await db\n      .update(users)\n      .set({\n        notificationsEnabled: false,\n        updatedAt: new Date(),\n      })\n      .where(eq(users.telegramChatId, encryptedChatId));\n  }\n\n  // Employee methods (user-scoped)\n  async getEmployees(userId: string): Promise<Employee[]> {\n    const encryptedEmployees = await db.select().from(employees).where(eq(employees.userId, userId));\n    return encryptedEmployees.map(emp => \n      decryptSensitiveFields(emp, SENSITIVE_FIELDS.employees)\n    );\n  }\n\n  async getEmployee(id: number): Promise<Employee | undefined> {\n    const [employee] = await db.select().from(employees).where(eq(employees.id, id));\n    if (!employee) return undefined;\n    return decryptSensitiveFields(employee, SENSITIVE_FIELDS.employees);\n  }\n\n  async createEmployee(employee: InsertEmployee, userId: string): Promise<Employee> {\n    const encryptedEmployee = encryptSensitiveFields({ ...employee, userId }, SENSITIVE_FIELDS.employees);\n    const [newEmployee] = await db\n      .insert(employees)\n      .values(encryptedEmployee)\n      .returning();\n    return decryptSensitiveFields(newEmployee, SENSITIVE_FIELDS.employees);\n  }\n\n  async updateEmployee(id: number, updates: Partial<InsertEmployee>, userId: string): Promise<Employee | undefined> {\n    const encryptedUpdates = encryptSensitiveFields(updates, SENSITIVE_FIELDS.employees);\n    const [updated] = await db\n      .update(employees)\n      .set(encryptedUpdates)\n      .where(and(eq(employees.id, id), eq(employees.userId, userId)))\n      .returning();\n    if (!updated) return undefined;\n    return decryptSensitiveFields(updated, SENSITIVE_FIELDS.employees);\n  }\n\n  async deleteEmployee(id: number, userId: string): Promise<boolean> {\n    const result = await db.delete(employees).where(and(eq(employees.id, id), eq(employees.userId, userId)));\n    return result.rowCount ? result.rowCount > 0 : false;\n  }\n\n  async linkEmployeeToUser(employeeId: number, linkedUserId: string | null, managerId: string): Promise<Employee | undefined> {\n    const [updated] = await db\n      .update(employees)\n      .set({ linkedUserId })\n      .where(and(eq(employees.id, employeeId), eq(employees.userId, managerId)))\n      .returning();\n    if (!updated) return undefined;\n    return decryptSensitiveFields(updated, SENSITIVE_FIELDS.employees);\n  }\n\n  // Meeting methods (user-scoped)\n  async getMeetings(userId: string): Promise<Meeting[]> {\n    const encryptedMeetings = await db.select().from(meetings).where(eq(meetings.userId, userId));\n    return encryptedMeetings.map(meeting => \n      decryptSensitiveFields(meeting, SENSITIVE_FIELDS.meetings)\n    );\n  }\n\n  async getMeeting(id: number): Promise<Meeting | undefined> {\n    const [meeting] = await db.select().from(meetings).where(eq(meetings.id, id));\n    if (!meeting) return undefined;\n    return decryptSensitiveFields(meeting, SENSITIVE_FIELDS.meetings);\n  }\n\n  async createMeeting(meeting: InsertMeeting, userId: string): Promise<Meeting> {\n    const encryptedMeeting = encryptSensitiveFields({\n      ...meeting,\n      title: meeting.title || null,\n      userId\n    }, SENSITIVE_FIELDS.meetings);\n    const [newMeeting] = await db\n      .insert(meetings)\n      .values(encryptedMeeting)\n      .returning();\n    return decryptSensitiveFields(newMeeting, SENSITIVE_FIELDS.meetings);\n  }\n\n  async updateMeeting(id: number, updates: Partial<InsertMeeting>, userId: string): Promise<Meeting | undefined> {\n    const encryptedUpdates = encryptSensitiveFields(updates, SENSITIVE_FIELDS.meetings);\n    const [updated] = await db\n      .update(meetings)\n      .set(encryptedUpdates)\n      .where(and(eq(meetings.id, id), eq(meetings.userId, userId)))\n      .returning();\n    if (!updated) return undefined;\n    return decryptSensitiveFields(updated, SENSITIVE_FIELDS.meetings);\n  }\n\n  async deleteMeeting(id: number, userId: string): Promise<boolean> {\n    const result = await db.delete(meetings).where(and(eq(meetings.id, id), eq(meetings.userId, userId)));\n    return result.rowCount ? result.rowCount > 0 : false;\n  }\n\n  async updateMeetingEmailStatus(meetingId: number, emailSent: boolean): Promise<void> {\n    await db\n      .update(meetings)\n      .set({ emailSent })\n      .where(eq(meetings.id, meetingId));\n  }\n\n  // Action methods (user-scoped, including actions assigned to the user)\n  async getActions(userId: string): Promise<Action[]> {\n    const encryptedActions = await db.select().from(actions).where(\n      or(\n        eq(actions.userId, userId), // Actions created by user\n        eq(actions.assignedToUserId, userId) // Actions assigned to user\n      )\n    );\n    return encryptedActions.map(action => \n      decryptSensitiveFields(action, SENSITIVE_FIELDS.actions)\n    );\n  }\n\n  async getAction(id: number): Promise<Action | undefined> {\n    const [action] = await db.select().from(actions).where(eq(actions.id, id));\n    if (!action) return undefined;\n    return decryptSensitiveFields(action, SENSITIVE_FIELDS.actions);\n  }\n\n  async createAction(action: InsertAction, userId: string): Promise<Action> {\n    // Look up if the assignee is a linked employee\n    let assignedToUserId: string | null = null;\n    if (action.assignee) {\n      const [linkedEmployee] = await db.select()\n        .from(employees)\n        .where(and(\n          eq(employees.name, action.assignee),\n          eq(employees.userId, userId)\n        ));\n      \n      if (linkedEmployee?.linkedUserId) {\n        assignedToUserId = linkedEmployee.linkedUserId;\n      }\n    }\n\n    const encryptedAction = encryptSensitiveFields({\n      ...action,\n      status: action.status || \"pending\",\n      priority: action.priority || \"medium\",\n      meetingId: action.meetingId || null,\n      userId,\n      assignedToUserId\n    }, SENSITIVE_FIELDS.actions);\n    const [newAction] = await db\n      .insert(actions)\n      .values(encryptedAction)\n      .returning();\n    return decryptSensitiveFields(newAction, SENSITIVE_FIELDS.actions);\n  }\n\n  async updateAction(id: number, updates: UpdateAction, userId: string): Promise<Action | undefined> {\n    const encryptedUpdates = encryptSensitiveFields(updates, SENSITIVE_FIELDS.actions);\n    const [updated] = await db\n      .update(actions)\n      .set(encryptedUpdates)\n      .where(and(eq(actions.id, id), eq(actions.userId, userId)))\n      .returning();\n    if (!updated) return undefined;\n    return decryptSensitiveFields(updated, SENSITIVE_FIELDS.actions);\n  }\n\n  async deleteAction(id: number, userId: string): Promise<boolean> {\n    const result = await db.delete(actions).where(and(eq(actions.id, id), eq(actions.userId, userId)));\n    return result.rowCount ? result.rowCount > 0 : false;\n  }\n\n  async getActionsByMeeting(meetingId: number): Promise<Action[]> {\n    const encryptedActions = await db.select().from(actions).where(eq(actions.meetingId, meetingId));\n    return encryptedActions.map(action => \n      decryptSensitiveFields(action, SENSITIVE_FIELDS.actions)\n    );\n  }\n\n  async getActionsByStatus(status: string): Promise<Action[]> {\n    const encryptedActions = await db.select().from(actions).where(eq(actions.status, status));\n    return encryptedActions.map(action => \n      decryptSensitiveFields(action, SENSITIVE_FIELDS.actions)\n    );\n  }\n\n  async getAssignedActions(userId: string): Promise<Action[]> {\n    const encryptedActions = await db.select().from(actions).where(eq(actions.assignedToUserId, userId));\n    return encryptedActions.map(action => \n      decryptSensitiveFields(action, SENSITIVE_FIELDS.actions)\n    );\n  }\n\n  async getStats(userId: string): Promise<{\n    totalEmployees: number;\n    totalMeetings: number;\n    totalActions: number;\n    activeActions: number;\n    completedActions: number;\n    overdueActions: number;\n  }> {\n    const [employeeCount] = await db.select({ count: count() }).from(employees).where(eq(employees.userId, userId));\n    const [meetingCount] = await db.select({ count: count() }).from(meetings).where(eq(meetings.userId, userId));\n    const allActions = await db.select().from(actions).where(eq(actions.userId, userId));\n    \n    return {\n      totalEmployees: employeeCount?.count || 0,\n      totalMeetings: meetingCount?.count || 0,\n      totalActions: allActions.length,\n      activeActions: allActions.filter(a => a.status !== ActionStatus.COMPLETED).length,\n      completedActions: allActions.filter(a => a.status === ActionStatus.COMPLETED).length,\n      overdueActions: allActions.filter(a => a.priority === \"high\" && a.status !== ActionStatus.COMPLETED).length,\n    };\n  }\n\n  // Notification schedule methods\n  async getNotificationSchedules(userId: string): Promise<NotificationSchedule[]> {\n    return await db.select().from(notificationSchedules).where(eq(notificationSchedules.userId, userId));\n  }\n\n  async createNotificationSchedule(schedule: InsertNotificationSchedule, userId: string): Promise<NotificationSchedule> {\n    const [newSchedule] = await db\n      .insert(notificationSchedules)\n      .values({ ...schedule, userId })\n      .returning();\n    return newSchedule;\n  }\n\n  async updateNotificationSchedule(id: number, updates: UpdateNotificationSchedule, userId: string): Promise<NotificationSchedule | undefined> {\n    const [updated] = await db\n      .update(notificationSchedules)\n      .set(updates)\n      .where(and(eq(notificationSchedules.id, id), eq(notificationSchedules.userId, userId)))\n      .returning();\n    return updated;\n  }\n\n  async deleteNotificationSchedule(id: number, userId: string): Promise<boolean> {\n    const result = await db\n      .delete(notificationSchedules)\n      .where(and(eq(notificationSchedules.id, id), eq(notificationSchedules.userId, userId)));\n    return result.rowCount ? result.rowCount > 0 : false;\n  }\n\n  // Achievement methods\n  async getAchievements(): Promise<Achievement[]> {\n    return await db.select().from(achievements).where(eq(achievements.isActive, true));\n  }\n\n  async getUserAchievements(userId: string): Promise<UserAchievement[]> {\n    return await db.select().from(userAchievements).where(eq(userAchievements.userId, userId));\n  }\n\n  async unlockAchievement(userId: string, achievementId: number): Promise<UserAchievement> {\n    const [newUserAchievement] = await db\n      .insert(userAchievements)\n      .values({ userId, achievementId, isViewed: false })\n      .returning();\n    return newUserAchievement;\n  }\n\n  async markAchievementViewed(userAchievementId: number, userId: string): Promise<boolean> {\n    const result = await db\n      .update(userAchievements)\n      .set({ isViewed: true })\n      .where(and(eq(userAchievements.id, userAchievementId), eq(userAchievements.userId, userId)));\n    return result.rowCount ? result.rowCount > 0 : false;\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":31294},"server/telegram.ts":{"content":"import TelegramBot from 'node-telegram-bot-api';\nimport cron from 'node-cron';\nimport { storage } from './storage';\nimport { db } from './db';\nimport { actions, meetings, users } from '@shared/schema';\nimport { eq, and } from 'drizzle-orm';\nimport { decryptText } from './encryption';\n\nlet bot: TelegramBot | null = null;\nlet isPolling = false;\n\n// Store ongoing conversations for action creation\nconst activeConversations = new Map<string, {\n  step: 'waiting_for_text' | 'waiting_for_assignee' | 'waiting_for_priority';\n  actionData: {\n    text?: string;\n    assignee?: string;\n    priority?: 'low' | 'medium' | 'high';\n  };\n  userId: string;\n}>;\n\nexport async function initTelegramBot() {\n  const token = process.env.TELEGRAM_BOT_TOKEN;\n  \n  if (!token) {\n    console.log('TELEGRAM_BOT_TOKEN not provided. Telegram notifications disabled.');\n    return;\n  }\n\n  // Re-enabled with improved error handling\n\n  try {\n    // Prevent multiple instances\n    if (bot && isPolling) {\n      console.log('Telegram bot already running, skipping initialization');\n      return;\n    }\n\n    // Stop existing bot if it exists\n    if (bot) {\n      try {\n        await bot.stopPolling();\n        isPolling = false;\n      } catch (error) {\n        // Ignore stop errors\n      }\n    }\n    \n    bot = new TelegramBot(token, { \n      polling: false // Don't auto-start\n    });\n    \n    // Add error handling for polling conflicts\n    bot.on('polling_error', (error: any) => {\n      if (error.code === 'ETELEGRAM' && error.message.includes('409 Conflict')) {\n        console.log('Telegram polling conflict detected - will retry in 30 seconds');\n        isPolling = false;\n        // Stop polling and retry after delay\n        try {\n          bot?.stopPolling();\n        } catch (stopError) {\n          // Ignore stop errors\n        }\n        \n        // Retry after 30 seconds\n        setTimeout(async () => {\n          if (bot && !isPolling) {\n            try {\n              await bot.startPolling({ restart: true });\n              isPolling = true;\n              console.log('Telegram bot polling restarted after conflict');\n            } catch (retryError) {\n              console.error('Failed to restart bot after conflict:', retryError);\n            }\n          }\n        }, 30000);\n      } else {\n        console.error('Telegram polling error:', error);\n      }\n    });\n    \n    // Start polling with better error handling\n    try {\n      await bot.startPolling({ restart: false });\n      isPolling = true;\n      console.log('Telegram bot initialized successfully');\n    } catch (startError: any) {\n      if (startError.message?.includes('409 Conflict')) {\n        console.log('Telegram bot conflict detected - using webhook mode instead');\n        isPolling = false;\n        return; // Don't throw error, just disable polling\n      } else {\n        console.error('Error starting Telegram bot polling:', startError);\n        throw startError;\n      }\n    }\n  } catch (error) {\n    console.error('Failed to initialize Telegram bot:', error);\n    isPolling = false;\n  }\n\n  if (bot) {\n    // Handle /start command\n    bot.onText(/\\/start/, async (msg: any) => {\n      const chatId = msg.chat.id;\n      const username = msg.from?.username || msg.from?.first_name || 'User';\n      \n      await bot!.sendMessage(chatId, \n        `ðŸ‘‹ Welcome to Meeting Tracker notifications!\\n\\n` +\n        `To enable daily notifications:\\n` +\n        `1. Go to your Meeting Tracker settings\\n` +\n        `2. Enter this Chat ID: ${chatId}\\n` +\n        `3. Enable notifications\\n\\n` +\n        `You'll receive daily summaries of your meetings and action items!`\n      );\n    });\n\n    // Handle /stop command\n    bot.onText(/\\/stop/, async (msg: any) => {\n      const chatId = msg.chat.id;\n      \n      // Find user by chat ID and disable notifications\n      try {\n        await storage.disableNotificationsForChatId(chatId.toString());\n        await bot!.sendMessage(chatId, 'ðŸ”• Notifications disabled. Send /start to re-enable.');\n      } catch (error) {\n        await bot!.sendMessage(chatId, 'âŒ Error disabling notifications. Please try again.');\n      }\n    });\n\n    // Handle /newaction command\n    bot.onText(/\\/newaction/, async (msg: any) => {\n      const chatId = msg.chat.id.toString();\n      \n      try {\n        // Find user by chat ID\n        const user = await getUserByChatId(chatId);\n        if (!user) {\n          await bot!.sendMessage(chatId, 'âŒ User not found. Please make sure notifications are enabled in your settings.');\n          return;\n        }\n\n        // Start action creation conversation\n        activeConversations.set(chatId, {\n          step: 'waiting_for_text',\n          actionData: {},\n          userId: user.id\n        });\n\n        await bot!.sendMessage(chatId, \n          'ðŸ“ *Create New Action Item*\\n\\n' +\n          'What task would you like to create? Please describe the action item:',\n          { parse_mode: 'Markdown' }\n        );\n      } catch (error) {\n        await bot!.sendMessage(chatId, 'âŒ Error starting action creation. Please try again.');\n      }\n    });\n\n    // Handle /cancel command\n    bot.onText(/\\/cancel/, async (msg: any) => {\n      const chatId = msg.chat.id.toString();\n      \n      if (activeConversations.has(chatId)) {\n        activeConversations.delete(chatId);\n        await bot!.sendMessage(chatId, 'âŒ Action creation cancelled.');\n      } else {\n        await bot!.sendMessage(chatId, 'No active action creation to cancel.');\n      }\n    });\n\n    // Handle /help command\n    bot.onText(/\\/help/, async (msg: any) => {\n      const chatId = msg.chat.id;\n      \n      await bot!.sendMessage(chatId,\n        'ðŸ¤– *Meeting Tracker Bot Commands*\\n\\n' +\n        '/start - Enable notifications\\n' +\n        '/stop - Disable notifications\\n' +\n        '/newaction - Create a new action item\\n' +\n        '/cancel - Cancel action creation\\n' +\n        '/help - Show this help message\\n\\n' +\n        'ðŸ’¡ You can also reply to daily notifications to quickly create related action items!',\n        { parse_mode: 'Markdown' }\n      );\n    });\n\n    // Handle text messages (for conversations)\n    bot.on('message', async (msg: any) => {\n      const chatId = msg.chat.id.toString();\n      const text = msg.text;\n\n      // Skip if it's a command\n      if (text?.startsWith('/')) return;\n\n      // Handle ongoing conversations\n      const conversation = activeConversations.get(chatId);\n      if (conversation) {\n        await handleConversationStep(chatId, text, conversation);\n      }\n    });\n\n    // Schedule daily notifications at 9 AM\n    cron.schedule('0 9 * * *', async () => {\n      await sendDailyNotifications();\n    });\n\n    console.log('Telegram bot commands and cron job set up');\n  }\n}\n\n// Helper function to find user by chat ID\nasync function getUserByChatId(chatId: string): Promise<{ id: string; firstName?: string; lastName?: string } | null> {\n  try {\n    const allUsers = await storage.getUsersWithNotifications();\n    // Find user with matching chat ID (already decrypted by storage layer)\n    const user = allUsers.find(user => user.telegramChatId === chatId);\n    return user ? {\n      id: user.id,\n      firstName: user.firstName || undefined,\n      lastName: user.lastName || undefined\n    } : null;\n  } catch (error) {\n    console.error('Error finding user by chat ID:', error);\n    return null;\n  }\n}\n\n// Handle conversation steps for action creation\nasync function handleConversationStep(chatId: string, text: string, conversation: any) {\n  try {\n    switch (conversation.step) {\n      case 'waiting_for_text':\n        conversation.actionData.text = text;\n        conversation.step = 'waiting_for_assignee';\n        \n        await bot!.sendMessage(chatId,\n          'ðŸ‘¤ Who should be assigned to this task?\\n\\n' +\n          'Options:\\n' +\n          'â€¢ Type \"me\" to assign to yourself\\n' +\n          'â€¢ Type the name of a team member\\n' +\n          'â€¢ Type \"skip\" to leave unassigned',\n          { parse_mode: 'Markdown' }\n        );\n        break;\n\n      case 'waiting_for_assignee':\n        if (text.toLowerCase() === 'me') {\n          // Get user's name from database\n          const user = await getUserByChatId(chatId);\n          const fullName = user?.firstName && user?.lastName \n            ? `${user.firstName} ${user.lastName}` \n            : (user?.firstName || 'Me');\n          conversation.actionData.assignee = fullName;\n        } else if (text.toLowerCase() === 'skip') {\n          conversation.actionData.assignee = 'Unassigned';\n        } else {\n          conversation.actionData.assignee = text;\n        }\n        \n        conversation.step = 'waiting_for_priority';\n        \n        await bot!.sendMessage(chatId,\n          'âš¡ What priority should this task have?\\n\\n' +\n          'Reply with:\\n' +\n          'â€¢ \"high\" for urgent tasks\\n' +\n          'â€¢ \"medium\" for normal tasks (default)\\n' +\n          'â€¢ \"low\" for when-possible tasks',\n          { parse_mode: 'Markdown' }\n        );\n        break;\n\n      case 'waiting_for_priority':\n        const priority = text.toLowerCase();\n        if (['high', 'medium', 'low'].includes(priority)) {\n          conversation.actionData.priority = priority as 'low' | 'medium' | 'high';\n        } else {\n          conversation.actionData.priority = 'medium'; // default\n        }\n\n        // Create the action\n        await createActionFromTelegram(chatId, conversation);\n        activeConversations.delete(chatId);\n        break;\n    }\n  } catch (error) {\n    console.error('Error handling conversation step:', error);\n    await bot!.sendMessage(chatId, 'âŒ Error processing your input. Please try again or use /cancel to start over.');\n  }\n}\n\n// Create action item from Telegram conversation\nasync function createActionFromTelegram(chatId: string, conversation: any) {\n  try {\n    const { actionData, userId } = conversation;\n    \n    // Get the user who created this action\n    const user = await getUserByChatId(chatId);\n    if (!user) {\n      await bot!.sendMessage(chatId, 'âŒ User not found. Please try again.');\n      return;\n    }\n\n    // Use the user's name as the initiator/employeeName\n    const initiatorName = user.firstName || 'Telegram User';\n\n    const newAction = await storage.createAction({\n      text: actionData.text,\n      userId: userId,\n      assignee: actionData.assignee,\n      priority: actionData.priority || 'medium',\n      status: 'pending',\n      employeeName: initiatorName, // Use the actual user who created it\n      meetingId: null // Not linked to specific meeting\n    }, userId);\n\n    const priority = (actionData.priority || 'medium') as 'high' | 'medium' | 'low';\n    const priorityEmoji = {\n      'high': 'ðŸ”´',\n      'medium': 'ðŸŸ¡',\n      'low': 'ðŸŸ¢'\n    }[priority];\n\n    await bot!.sendMessage(chatId,\n      `âœ… *Action Created Successfully!*\\n\\n` +\n      `ðŸ“ Task: ${actionData.text}\\n` +\n      `ðŸ‘¤ Assigned to: ${actionData.assignee}\\n` +\n      `${priorityEmoji} Priority: ${actionData.priority || 'medium'}\\n` +\n      `ðŸ™‹ Created by: ${initiatorName}\\n\\n` +\n      `The action has been added to your Meeting Tracker dashboard.`,\n      { parse_mode: 'Markdown' }\n    );\n\n  } catch (error) {\n    console.error('Error creating action from Telegram:', error);\n    await bot!.sendMessage(chatId, 'âŒ Error creating action item. Please try again later.');\n  }\n}\n\nexport async function sendDailyNotifications() {\n  if (!bot) return;\n\n  try {\n    const usersWithNotifications = await storage.getUsersWithNotifications();\n    \n    for (const user of usersWithNotifications) {\n      if (!user.telegramChatId) continue;\n\n      try {\n        const message = await generateDailyMessage(user.id);\n        // Note: telegramChatId is already decrypted by storage layer\n        await bot.sendMessage(user.telegramChatId, message, { parse_mode: 'MarkdownV2' });\n      } catch (error) {\n        console.error(`Error sending notification to user ${user.id}:`, error);\n      }\n    }\n  } catch (error) {\n    console.error('Error sending daily notifications:', error);\n  }\n}\n\nasync function generateDailyMessage(userId: string): Promise<string> {\n  const today = new Date().toISOString().split('T')[0];\n  \n  // Get today's meetings (if any) using storage layer for proper decryption\n  const allMeetings = await storage.getMeetings(userId);\n  const todaysMeetings = allMeetings.filter(m => m.date === today).slice(0, 5);\n\n  // Get active actions (pending + in-progress) using storage layer for proper decryption\n  const allActions = await storage.getActions(userId);\n  const activeActions = allActions.filter(a => a.status === 'pending' || a.status === 'in-progress').slice(0, 10);\n\n  let message = `ðŸ“… *Daily Meeting Tracker Update*\\n\\n`;\n\n  // Today's meetings\n  if (todaysMeetings.length > 0) {\n    message += `ðŸ—“ï¸ *Today's Meetings \\\\(${todaysMeetings.length}\\\\):*\\n`;\n    for (const meeting of todaysMeetings) {\n      // Escape markdown special characters in content\n      const title = escapeMarkdown(meeting.title || 'Meeting');\n      const employeeName = escapeMarkdown(meeting.employeeName);\n      message += `â€¢ ${title} with ${employeeName}\\n`;\n    }\n    message += '\\n';\n  } else {\n    message += `âœ… No meetings scheduled for today\\n\\n`;\n  }\n\n  // Active actions (pending + in-progress)\n  if (activeActions.length > 0) {\n    message += `âš ï¸ *Active Action Items \\\\(${activeActions.length}\\\\):*\\n`;\n    for (const action of activeActions.slice(0, 8)) {\n      const priority = action.priority === 'high' ? 'ðŸ”´' : action.priority === 'medium' ? 'ðŸŸ¡' : 'ðŸŸ¢';\n      const statusIcon = action.status === 'in-progress' ? 'ðŸ”„' : 'â³';\n      // Show full text up to 120 characters to fit more content\n      const actionText = escapeMarkdown(action.text.length > 120 ? action.text.substring(0, 117) + '...' : action.text);\n      const assignee = escapeMarkdown(action.assignee);\n      message += `${priority}${statusIcon} ${actionText} \\\\- ${assignee}\\n`;\n    }\n    if (activeActions.length > 8) {\n      message += `\\\\.\\\\.\\\\.and ${activeActions.length - 8} more\\n`;\n    }\n    message += '\\n';\n  } else {\n    message += `ðŸŽ‰ No active action items\\\\!\\n\\n`;\n  }\n\n  const domain = process.env.REPLIT_DOMAINS?.split(',')[0] || 'your-app.replit.app';\n  message += `ðŸ“± [Open Meeting Tracker](https://${escapeMarkdown(domain)})`;\n\n  return message;\n}\n\n// Helper function to escape markdown special characters for MarkdownV2\nfunction escapeMarkdown(text: string): string {\n  if (!text) return '';\n  // MarkdownV2 requires escaping these characters: _ * [ ] ( ) ~ ` > # + - = | { } . !\n  return text\n    .replace(/\\\\/g, '\\\\\\\\')\n    .replace(/_/g, '\\\\_')\n    .replace(/\\*/g, '\\\\*')\n    .replace(/\\[/g, '\\\\[')\n    .replace(/\\]/g, '\\\\]')\n    .replace(/\\(/g, '\\\\(')\n    .replace(/\\)/g, '\\\\)')\n    .replace(/~/g, '\\\\~')\n    .replace(/`/g, '\\\\`')\n    .replace(/>/g, '\\\\>')\n    .replace(/#/g, '\\\\#')\n    .replace(/\\+/g, '\\\\+')\n    .replace(/-/g, '\\\\-')\n    .replace(/=/g, '\\\\=')\n    .replace(/\\|/g, '\\\\|')\n    .replace(/\\{/g, '\\\\{')\n    .replace(/\\}/g, '\\\\}')\n    .replace(/\\./g, '\\\\.')\n    .replace(/!/g, '\\\\!');\n}\n\nexport async function sendTestNotification(chatId: string) {\n  if (!bot) throw new Error('Telegram bot not initialized');\n  \n  // Try to restart polling if it's stopped\n  if (!isPolling) {\n    try {\n      await bot.startPolling({ restart: true });\n      isPolling = true;\n      console.log('Telegram bot polling restarted for test notification');\n    } catch (error) {\n      console.error('Failed to restart bot polling:', error);\n      throw new Error('Telegram bot cannot be started - please check for conflicts');\n    }\n  }\n  \n  const message = `ðŸ§ª *Test Notification*\\n\\nYour Telegram notifications are working correctly\\\\!\\n\\nYou'll receive daily updates at 9:00 AM with:\\nâ€¢ Today's meetings\\nâ€¢ Pending action items\\nâ€¢ Quick access to your app`;\n  \n  await bot.sendMessage(chatId, message, { parse_mode: 'MarkdownV2' });\n}\n\nexport async function sendTestDailyNotification(chatId: string, userId: string) {\n  if (!bot) throw new Error('Telegram bot not initialized');\n  \n  console.log(`Sending test notification - Bot polling status: ${isPolling}`);\n  \n  // Try to restart polling if it's stopped\n  if (!isPolling) {\n    try {\n      console.log('Attempting to restart bot polling...');\n      await bot.startPolling({ restart: true });\n      isPolling = true;\n      console.log('Telegram bot polling restarted successfully');\n      \n      // Wait a moment for polling to stabilize\n      await new Promise(resolve => setTimeout(resolve, 2000));\n    } catch (error) {\n      console.error('Failed to restart bot polling:', error);\n      throw new Error(`Telegram bot cannot be started: ${error instanceof Error ? error.message : 'Unknown error'}`);\n    }\n  }\n  \n  const message = await generateDailyMessage(userId);\n  console.log('Sending message to chat:', chatId);\n  await bot.sendMessage(chatId, message, { parse_mode: 'MarkdownV2' });\n  console.log('Test notification sent successfully');\n}\n\n// Export bot status for debugging\nexport function getBotStatus() {\n  return {\n    botInitialized: !!bot,\n    isPolling,\n    hasToken: !!process.env.TELEGRAM_BOT_TOKEN\n  };\n}","size_bytes":17183},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"shared/schema.ts":{"content":"import { pgTable, text, serial, integer, boolean, timestamp, varchar, jsonb, index } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\nimport { sql } from 'drizzle-orm';\n\nexport const employees = pgTable(\"employees\", {\n  id: serial(\"id\").primaryKey(),\n  name: text(\"name\").notNull(),\n  role: text(\"role\").notNull(),\n  department: text(\"department\").notNull(),\n  relationship: text(\"relationship\").notNull(),\n  userId: varchar(\"user_id\").notNull(), // Owner of this employee record\n  linkedUserId: varchar(\"linked_user_id\"), // System user linked to this team member\n});\n\nexport const meetings = pgTable(\"meetings\", {\n  id: serial(\"id\").primaryKey(),\n  employeeId: integer(\"employee_id\").notNull(),\n  employeeName: text(\"employee_name\").notNull(),\n  title: text(\"title\"),\n  date: text(\"date\").notNull(),\n  notes: text(\"notes\").notNull(),\n  userId: varchar(\"user_id\").notNull(),\n  // Email settings for this meeting\n  emailRecipient: varchar(\"email_recipient\"), // Custom email for meeting notes\n  emailSent: boolean(\"email_sent\").default(false), // Track if email was sent\n});\n\nexport const actions = pgTable(\"actions\", {\n  id: serial(\"id\").primaryKey(),\n  text: text(\"text\").notNull(),\n  assignee: text(\"assignee\").notNull(),\n  status: text(\"status\").notNull().default(\"pending\"),\n  priority: text(\"priority\").notNull().default(\"medium\"),\n  meetingId: integer(\"meeting_id\"),\n  employeeName: text(\"employee_name\").notNull(),\n  userId: varchar(\"user_id\").notNull(),\n  assignedToUserId: varchar(\"assigned_to_user_id\"), // For cross-user assignments\n  // Note context fields for precise navigation to meeting text\n  noteExcerpt: text(\"note_excerpt\"), // Text snippet from meeting notes where action originated\n  noteStart: integer(\"note_start\"), // Start position in notes text\n  noteEnd: integer(\"note_end\"), // End position in notes text\n  notesHash: varchar(\"notes_hash\"), // Hash of notes to detect changes\n});\n\n// Session storage table for authentication\nexport const sessions = pgTable(\n  \"sessions\",\n  {\n    sid: varchar(\"sid\").primaryKey(),\n    sess: jsonb(\"sess\").notNull(),\n    expire: timestamp(\"expire\").notNull(),\n  },\n  (table) => [index(\"IDX_session_expire\").on(table.expire)],\n);\n\n// User storage table for authentication\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: varchar(\"email\").unique(),\n  firstName: varchar(\"first_name\"),\n  lastName: varchar(\"last_name\"),\n  profileImageUrl: varchar(\"profile_image_url\"),\n  isApproved: boolean(\"is_approved\").default(false),\n  role: varchar(\"role\").default(\"user\"), // 'admin', 'user'\n  telegramChatId: varchar(\"telegram_chat_id\"),\n  notificationsEnabled: boolean(\"notifications_enabled\").default(false),\n  // Email configuration for sending meeting notes\n  emailSenderAddress: varchar(\"email_sender_address\"), // Gmail address for sending\n  emailSenderPassword: varchar(\"email_sender_password\"), // App password for Gmail\n  emailEnabled: boolean(\"email_enabled\").default(false),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Notification schedules table for flexible scheduling\nexport const notificationSchedules = pgTable(\"notification_schedules\", {\n  id: serial(\"id\").primaryKey(),\n  userId: varchar(\"user_id\").notNull(),\n  name: text(\"name\").notNull(), // e.g., \"Morning Update\", \"End of Day\"\n  cronPattern: text(\"cron_pattern\").notNull(), // e.g., \"0 9 * * 1-5\" for 9am weekdays\n  isActive: boolean(\"is_active\").default(true),\n  notificationType: text(\"notification_type\").notNull().default(\"daily\"), // daily, weekly, urgent\n  includeActions: boolean(\"include_actions\").default(true),\n  includeMeetings: boolean(\"include_meetings\").default(true),\n  includeStats: boolean(\"include_stats\").default(true),\n  customMessage: text(\"custom_message\"), // Optional custom message\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Achievement badges system for gamification\nexport const achievements = pgTable(\"achievements\", {\n  id: serial(\"id\").primaryKey(),\n  badgeId: varchar(\"badge_id\").notNull(), // unique identifier for badge type\n  name: text(\"name\").notNull(),\n  description: text(\"description\").notNull(),\n  icon: text(\"icon\").notNull(), // icon name or emoji\n  category: text(\"category\").notNull(), // e.g., \"meetings\", \"actions\", \"productivity\"\n  rarity: text(\"rarity\").notNull().default(\"common\"), // common, rare, epic, legendary\n  requirements: jsonb(\"requirements\").notNull(), // criteria for earning\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// User achievements - tracks which badges users have earned\nexport const userAchievements = pgTable(\"user_achievements\", {\n  id: serial(\"id\").primaryKey(),\n  userId: varchar(\"user_id\").notNull(),\n  achievementId: integer(\"achievement_id\").notNull(),\n  unlockedAt: timestamp(\"unlocked_at\").defaultNow(),\n  progress: jsonb(\"progress\"), // track progress toward achievement\n  isViewed: boolean(\"is_viewed\").default(false), // for showing \"new\" badges\n});\n\n// Insert schemas\nexport const insertEmployeeSchema = createInsertSchema(employees).omit({\n  id: true,\n});\n\nexport const insertMeetingSchema = createInsertSchema(meetings).omit({\n  id: true,\n});\n\nexport const insertActionSchema = createInsertSchema(actions).omit({\n  id: true,\n});\n\nexport const updateActionSchema = createInsertSchema(actions).partial().omit({\n  id: true,\n});\n\nexport const insertNotificationScheduleSchema = createInsertSchema(notificationSchedules).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const updateNotificationScheduleSchema = createInsertSchema(notificationSchedules).partial().omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertAchievementSchema = createInsertSchema(achievements).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertUserAchievementSchema = createInsertSchema(userAchievements).omit({\n  id: true,\n  unlockedAt: true,\n});\n\n// Types\nexport type Employee = typeof employees.$inferSelect;\nexport type InsertEmployee = z.infer<typeof insertEmployeeSchema>;\n\nexport type Meeting = typeof meetings.$inferSelect;\nexport type InsertMeeting = z.infer<typeof insertMeetingSchema>;\n\nexport type Action = typeof actions.$inferSelect;\nexport type InsertAction = z.infer<typeof insertActionSchema>;\nexport type UpdateAction = z.infer<typeof updateActionSchema>;\n\n// Enums\nexport const ActionStatus = {\n  PENDING: \"pending\",\n  IN_PROGRESS: \"in-progress\",\n  COMPLETED: \"completed\",\n} as const;\n\nexport const ActionPriority = {\n  LOW: \"low\",\n  MEDIUM: \"medium\",\n  HIGH: \"high\",\n} as const;\n\nexport type ActionStatusType = typeof ActionStatus[keyof typeof ActionStatus];\nexport type ActionPriorityType = typeof ActionPriority[keyof typeof ActionPriority];\n\nexport type UpsertUser = typeof users.$inferInsert;\nexport type User = typeof users.$inferSelect;\n\nexport type Achievement = typeof achievements.$inferSelect;\nexport type InsertAchievement = z.infer<typeof insertAchievementSchema>;\n\nexport type UserAchievement = typeof userAchievements.$inferSelect;\nexport type InsertUserAchievement = z.infer<typeof insertUserAchievementSchema>;\n\n// Achievement Categories\nexport const AchievementCategory = {\n  MEETINGS: \"meetings\",\n  ACTIONS: \"actions\", \n  PRODUCTIVITY: \"productivity\",\n  SOCIAL: \"social\",\n  MILESTONES: \"milestones\",\n} as const;\n\nexport const AchievementRarity = {\n  COMMON: \"common\",\n  RARE: \"rare\", \n  EPIC: \"epic\",\n  LEGENDARY: \"legendary\",\n} as const;\n\nexport type AchievementCategoryType = typeof AchievementCategory[keyof typeof AchievementCategory];\nexport type AchievementRarityType = typeof AchievementRarity[keyof typeof AchievementRarity];\n\nexport type NotificationSchedule = typeof notificationSchedules.$inferSelect;\nexport type InsertNotificationSchedule = z.infer<typeof insertNotificationScheduleSchema>;\nexport type UpdateNotificationSchedule = z.infer<typeof updateNotificationScheduleSchema>;\n\n// Notification schedule presets\nexport const SchedulePresets = {\n  MORNING_WEEKDAYS: {\n    name: \"Morning Update (Weekdays)\",\n    cronPattern: \"0 9 * * 1-5\",\n    description: \"Daily at 9:00 AM, Monday through Friday\"\n  },\n  END_OF_DAY: {\n    name: \"End of Day Summary\",\n    cronPattern: \"0 17 * * 1-5\", \n    description: \"Daily at 5:00 PM, Monday through Friday\"\n  },\n  MONDAY_PLANNING: {\n    name: \"Monday Planning\",\n    cronPattern: \"0 8 * * 1\",\n    description: \"Every Monday at 8:00 AM\"\n  },\n  FRIDAY_REVIEW: {\n    name: \"Friday Review\",\n    cronPattern: \"0 16 * * 5\",\n    description: \"Every Friday at 4:00 PM\"\n  },\n  CUSTOM: {\n    name: \"Custom Schedule\",\n    cronPattern: \"\",\n    description: \"Set your own cron pattern\"\n  }\n} as const;\n","size_bytes":8833},"client/src/App.tsx":{"content":"import { Switch, Route, useLocation } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { AppProvider } from \"@/contexts/app-context\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport MainLayout from \"@/components/layout/main-layout\";\nimport Dashboard from \"@/pages/dashboard\";\nimport Actions from \"@/pages/actions\";\nimport Meetings from \"@/pages/meetings\";\nimport Team from \"@/pages/team\";\nimport Settings from \"@/pages/settings\";\nimport Admin from \"@/pages/admin\";\nimport Notifications from \"@/pages/notifications\";\nimport NotFound from \"@/pages/not-found\";\nimport Landing from \"@/pages/landing\";\nimport Home from \"@/pages/home\";\nimport AccessDenied from \"@/pages/access-denied\";\nimport { AchievementsPage } from \"@/pages/achievements\";\n\nfunction Router() {\n  const [location] = useLocation();\n  \n  // Show access denied page immediately without auth checks to prevent loops\n  if (location === '/access-denied') {\n    return <AccessDenied />;\n  }\n\n  const { isAuthenticated, isLoading } = useAuth();\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <Switch>\n      <Route path=\"/access-denied\" component={AccessDenied} />\n      {!isAuthenticated ? (\n        <Route path=\"/\" component={Landing} />\n      ) : (\n        <MainLayout>\n          <Route path=\"/\" component={Home} />\n          <Route path=\"/dashboard\" component={Dashboard} />\n          <Route path=\"/actions\" component={Actions} />\n          <Route path=\"/meetings\" component={Meetings} />\n          <Route path=\"/team\" component={Team} />\n          <Route path=\"/achievements\" component={AchievementsPage} />\n          <Route path=\"/settings\" component={Settings} />\n          <Route path=\"/notifications\" component={Notifications} />\n          <Route path=\"/admin\" component={Admin} />\n        </MainLayout>\n      )}\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <AppProvider>\n        <TooltipProvider>\n          <Toaster />\n          <Router />\n        </TooltipProvider>\n      </AppProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":2486},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --background: hsl(0, 0%, 100%);\n  --foreground: hsl(20, 14.3%, 4.1%);\n  --muted: hsl(60, 4.8%, 95.9%);\n  --muted-foreground: hsl(25, 5.3%, 44.7%);\n  --popover: hsl(0, 0%, 100%);\n  --popover-foreground: hsl(20, 14.3%, 4.1%);\n  --card: hsl(0, 0%, 100%);\n  --card-foreground: hsl(20, 14.3%, 4.1%);\n  --border: hsl(20, 5.9%, 90%);\n  --input: hsl(20, 5.9%, 90%);\n  --primary: hsl(207, 90%, 54%);\n  --primary-foreground: hsl(211, 100%, 99%);\n  --secondary: hsl(60, 4.8%, 95.9%);\n  --secondary-foreground: hsl(24, 9.8%, 10%);\n  --accent: hsl(60, 4.8%, 95.9%);\n  --accent-foreground: hsl(24, 9.8%, 10%);\n  --destructive: hsl(0, 84.2%, 60.2%);\n  --destructive-foreground: hsl(60, 9.1%, 97.8%);\n  --ring: hsl(20, 14.3%, 4.1%);\n  --radius: 0.5rem;\n\n  /* Custom colors matching the design */\n  --primary-50: hsl(207, 100%, 94%);\n  --primary-500: hsl(207, 90%, 54%);\n  --primary-600: hsl(207, 80%, 48%);\n  --primary-700: hsl(207, 70%, 42%);\n  \n  --secondary-50: hsl(122, 30%, 94%);\n  --secondary-500: hsl(122, 40%, 48%);\n  --secondary-600: hsl(122, 50%, 42%);\n  \n  --accent-500: hsl(14, 100%, 57%);\n  --accent-600: hsl(14, 90%, 51%);\n  \n  --success: hsl(142, 76%, 36%);\n  --warning: hsl(38, 92%, 50%);\n  --error: hsl(0, 84%, 60%);\n}\n\n.dark {\n  --background: hsl(240, 10%, 3.9%);\n  --foreground: hsl(0, 0%, 98%);\n  --muted: hsl(240, 3.7%, 15.9%);\n  --muted-foreground: hsl(240, 5%, 64.9%);\n  --popover: hsl(240, 10%, 3.9%);\n  --popover-foreground: hsl(0, 0%, 98%);\n  --card: hsl(240, 10%, 3.9%);\n  --card-foreground: hsl(0, 0%, 98%);\n  --border: hsl(240, 3.7%, 15.9%);\n  --input: hsl(240, 3.7%, 15.9%);\n  --primary: hsl(207, 90%, 54%);\n  --primary-foreground: hsl(211, 100%, 99%);\n  --secondary: hsl(240, 3.7%, 15.9%);\n  --secondary-foreground: hsl(0, 0%, 98%);\n  --accent: hsl(240, 3.7%, 15.9%);\n  --accent-foreground: hsl(0, 0%, 98%);\n  --destructive: hsl(0, 62.8%, 30.6%);\n  --destructive-foreground: hsl(0, 0%, 98%);\n  --ring: hsl(240, 4.9%, 83.9%);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply bg-background text-foreground font-sans antialiased;\n  }\n}\n\n@layer components {\n  .sidebar-nav-item {\n    @apply flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors duration-150;\n  }\n  \n  .sidebar-nav-item-active {\n    @apply bg-blue-50 border-r-2 border-blue-500 text-blue-700;\n  }\n  \n  .sidebar-nav-item-inactive {\n    @apply text-gray-600 hover:bg-gray-50 hover:text-gray-900;\n  }\n  \n  .stats-card {\n    @apply bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200;\n  }\n  \n  .priority-badge-high {\n    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800;\n  }\n  \n  .priority-badge-medium {\n    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800;\n  }\n  \n  .priority-badge-low {\n    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800;\n  }\n  \n  .status-badge-pending {\n    @apply inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800;\n  }\n  \n  .status-badge-in-progress {\n    @apply inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800;\n  }\n  \n  .status-badge-completed {\n    @apply inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800;\n  }\n}\n","size_bytes":3455},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/contexts/app-context.tsx":{"content":"import { createContext, useContext, useState, ReactNode } from 'react';\n\ninterface AppContextType {\n  searchTerm: string;\n  setSearchTerm: (term: string) => void;\n  filterEmployee: string;\n  setFilterEmployee: (employee: string) => void;\n  selectedMeetingId: number | null;\n  setSelectedMeetingId: (id: number | null) => void;\n}\n\nconst AppContext = createContext<AppContextType | undefined>(undefined);\n\nexport function AppProvider({ children }: { children: ReactNode }) {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterEmployee, setFilterEmployee] = useState('all');\n  const [selectedMeetingId, setSelectedMeetingId] = useState<number | null>(null);\n\n  return (\n    <AppContext.Provider value={{\n      searchTerm,\n      setSearchTerm,\n      filterEmployee,\n      setFilterEmployee,\n      selectedMeetingId,\n      setSelectedMeetingId,\n    }}>\n      {children}\n    </AppContext.Provider>\n  );\n}\n\nexport function useAppContext() {\n  const context = useContext(AppContext);\n  if (context === undefined) {\n    throw new Error('useAppContext must be used within an AppProvider');\n  }\n  return context;\n}\n","size_bytes":1120},"client/src/hooks/use-achievements.ts":{"content":"import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport type { Achievement, UserAchievement } from \"@shared/schema\";\n\nexport interface AchievementWithStatus extends Achievement {\n  unlocked: boolean;\n  unlockedAt: Date | null;\n  isViewed: boolean;\n  userAchievementId: number | null;\n}\n\nexport function useAchievements() {\n  return useQuery<Achievement[]>({\n    queryKey: [\"/api/achievements\"],\n    refetchOnWindowFocus: false,\n  });\n}\n\nexport function useUserAchievements() {\n  return useQuery<AchievementWithStatus[]>({\n    queryKey: [\"/api/achievements/user\"],\n    refetchOnWindowFocus: false,\n  });\n}\n\nexport function useMarkAchievementViewed() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: async (userAchievementId: number) => {\n      return await fetch(`/api/achievements/${userAchievementId}/viewed`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/achievements/user\"] });\n    },\n  });\n}\n\n// Helper functions for achievement logic\nexport function getNewAchievementsCount(achievements: AchievementWithStatus[]): number {\n  return achievements.filter(a => a.unlocked && !a.isViewed).length;\n}\n\nexport function getUnlockedAchievements(achievements: AchievementWithStatus[]): AchievementWithStatus[] {\n  return achievements.filter(a => a.unlocked);\n}\n\nexport function getAchievementsByCategory(achievements: AchievementWithStatus[], category: string): AchievementWithStatus[] {\n  return achievements.filter(a => a.category === category);\n}\n\nexport function getAchievementProgress(achievements: AchievementWithStatus[]): {\n  total: number;\n  unlocked: number;\n  percentage: number;\n} {\n  const total = achievements.length;\n  const unlocked = achievements.filter(a => a.unlocked).length;\n  const percentage = total > 0 ? (unlocked / total) * 100 : 0;\n  \n  return { total, unlocked, percentage };\n}","size_bytes":2063},"client/src/hooks/use-actions.ts":{"content":"import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiRequest } from '@/lib/queryClient';\nimport type { Action, InsertAction, UpdateAction } from '@shared/schema';\n\nexport function useActions() {\n  return useQuery<Action[]>({\n    queryKey: ['/api/actions'],\n  });\n}\n\nexport function useStats() {\n  return useQuery<{\n    totalEmployees: number;\n    totalMeetings: number;\n    totalActions: number;\n    activeActions: number;\n    completedActions: number;\n    overdueActions: number;\n  }>({\n    queryKey: ['/api/stats'],\n  });\n}\n\nexport function useCreateAction() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: async (action: InsertAction) => {\n      const response = await apiRequest('POST', '/api/actions', action);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/actions'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/stats'] });\n    },\n  });\n}\n\nexport function useUpdateAction() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: async ({ id, updates }: { id: number; updates: UpdateAction }) => {\n      const response = await apiRequest('PUT', `/api/actions/${id}`, updates);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/actions'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/stats'] });\n    },\n  });\n}\n\nexport function useDeleteAction() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: async (id: number) => {\n      await apiRequest('DELETE', `/api/actions/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/actions'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/stats'] });\n    },\n  });\n}\n","size_bytes":1858},"client/src/hooks/use-employees.ts":{"content":"import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiRequest } from '@/lib/queryClient';\nimport type { Employee, InsertEmployee } from '@shared/schema';\n\nexport function useEmployees() {\n  return useQuery<Employee[]>({\n    queryKey: ['/api/employees'],\n  });\n}\n\nexport function useCreateEmployee() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: async (employee: InsertEmployee) => {\n      const response = await apiRequest('POST', '/api/employees', employee);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/employees'] });\n    },\n  });\n}\n\nexport function useUpdateEmployee() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: async ({ id, updates }: { id: number; updates: Partial<InsertEmployee> }) => {\n      const response = await apiRequest('PUT', `/api/employees/${id}`, updates);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/employees'] });\n    },\n  });\n}\n\nexport function useDeleteEmployee() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: async (id: number) => {\n      await apiRequest('DELETE', `/api/employees/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/employees'] });\n    },\n  });\n}\n","size_bytes":1427},"client/src/hooks/use-insights.ts":{"content":"import { useQuery } from '@tanstack/react-query';\nimport { apiRequest } from '@/lib/queryClient';\n\nexport interface MeetingInsights {\n  keyPoints: string[];\n  actionRecommendations: string[];\n  followUpSuggestions: string[];\n  sentimentAnalysis: {\n    tone: 'positive' | 'neutral' | 'negative';\n    confidence: number;\n    summary: string;\n  };\n  effectiveness: {\n    score: number;\n    strengths: string[];\n    improvements: string[];\n  };\n  nextSteps: string[];\n}\n\nexport interface TeamInsights {\n  insights: string;\n  meetingCount: number;\n}\n\nexport function useMeetingInsights(meetingId: number, enabled: boolean = true) {\n  return useQuery<MeetingInsights>({\n    queryKey: ['/api/insights/meeting', meetingId],\n    queryFn: async () => {\n      const response = await apiRequest('POST', `/api/insights/meeting/${meetingId}`, {});\n      return response.json();\n    },\n    enabled,\n    staleTime: 5 * 60 * 1000, // 5 minutes\n    retry: 1,\n  });\n}\n\nexport function useTeamInsights(enabled: boolean = true) {\n  return useQuery<TeamInsights>({\n    queryKey: ['/api/insights/team'],\n    queryFn: async () => {\n      const response = await apiRequest('GET', '/api/insights/team', {});\n      return response.json();\n    },\n    enabled,\n    staleTime: 10 * 60 * 1000, // 10 minutes\n    retry: 1,\n  });\n}","size_bytes":1298},"client/src/hooks/use-meetings.ts":{"content":"import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiRequest } from '@/lib/queryClient';\nimport type { Meeting, InsertMeeting } from '@shared/schema';\n\nexport function useMeetings() {\n  return useQuery<Meeting[]>({\n    queryKey: ['/api/meetings'],\n  });\n}\n\nexport function useCreateMeeting() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: async (meeting: InsertMeeting) => {\n      const response = await apiRequest('POST', '/api/meetings', meeting);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/meetings'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/stats'] });\n    },\n  });\n}\n\nexport function useUpdateMeeting() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: async ({ id, updates }: { id: number; updates: Partial<InsertMeeting> }) => {\n      const response = await apiRequest('PUT', `/api/meetings/${id}`, updates);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/meetings'] });\n    },\n  });\n}\n\nexport function useDeleteMeeting() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: async (id: number) => {\n      await apiRequest('DELETE', `/api/meetings/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/meetings'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/actions'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/stats'] });\n    },\n  });\n}\n","size_bytes":1612},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/hooks/use-notification-schedules.ts":{"content":"import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiRequest } from '@/lib/queryClient';\n\ninterface NotificationSchedule {\n  id: number;\n  name: string;\n  cronPattern: string;\n  isActive: boolean;\n  notificationType: string;\n  includeActions: boolean;\n  includeMeetings: boolean;\n  includeStats: boolean;\n  customMessage?: string;\n}\n\nexport function useNotificationSchedules() {\n  return useQuery<NotificationSchedule[]>({\n    queryKey: ['/api/notification-schedules'],\n  });\n}\n\nexport function useCreateNotificationSchedule() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: async (schedule: Omit<NotificationSchedule, 'id'>) => {\n      const response = await apiRequest('POST', '/api/notification-schedules', schedule);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/notification-schedules'] });\n    },\n  });\n}\n\nexport function useUpdateNotificationSchedule() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: async ({ id, updates }: { id: number; updates: Partial<NotificationSchedule> }) => {\n      const response = await apiRequest('PUT', `/api/notification-schedules/${id}`, updates);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/notification-schedules'] });\n    },\n  });\n}\n\nexport function useDeleteNotificationSchedule() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: async (id: number) => {\n      await apiRequest('DELETE', `/api/notification-schedules/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/notification-schedules'] });\n    },\n  });\n}","size_bytes":1781},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/hooks/useAuth.ts":{"content":"import { useQuery } from \"@tanstack/react-query\";\n\nexport function useAuth() {\n  const { data: user, isLoading } = useQuery({\n    queryKey: [\"/api/auth/user\"],\n    retry: false,\n  });\n\n  return {\n    user,\n    isLoading,\n    isAuthenticated: !!user,\n  };\n}","size_bytes":256},"client/src/lib/authUtils.ts":{"content":"export function isUnauthorizedError(error: Error): boolean {\n  return /^401: .*Unauthorized/.test(error.message);\n}","size_bytes":115},"client/src/lib/markdown.tsx":{"content":"import React, { ReactElement } from 'react';\n\ninterface MarkdownItem {\n  type: 'h3' | 'h4' | 'li' | 'p' | 'br';\n  key: string;\n  content: string | string[];\n  className: string;\n  hasBold?: boolean;\n  hasHighlight?: boolean;\n}\n\n// Markers for text highlighting\nconst HIGHLIGHT_START_MARKER = '[[[HL]]]';\nconst HIGHLIGHT_END_MARKER = '[[[/HL]]]';\n\n// Helper function to escape regex special characters\nfunction escapeRegExp(string: string): string {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\n// Function to inject highlighting markers around a text excerpt\nexport function injectHighlightMarkers(text: string, excerpt: string): string {\n  if (!excerpt || !text) return text;\n  \n  // Find the first occurrence of the excerpt in the text (case insensitive)\n  const lowerText = text.toLowerCase();\n  const lowerExcerpt = excerpt.toLowerCase();\n  const index = lowerText.indexOf(lowerExcerpt);\n  \n  if (index === -1) return text;\n  \n  // Inject markers around the found text\n  const before = text.substring(0, index);\n  const highlighted = text.substring(index, index + excerpt.length);\n  const after = text.substring(index + excerpt.length);\n  \n  return `${before}${HIGHLIGHT_START_MARKER}${highlighted}${HIGHLIGHT_END_MARKER}${after}`;\n}\n\nexport function formatMarkdownToJSX(text: string): MarkdownItem[] {\n  if (!text || text.trim() === '') return [];\n  \n  return text\n    .split('\\n')\n    .map((line, index) => {\n      const key = `line-${index}`;\n      \n      if (line.startsWith('# ')) {\n        const content = line.substring(2);\n        const hasHighlight = content.includes(HIGHLIGHT_START_MARKER);\n        return {\n          type: 'h3',\n          key,\n          content: hasHighlight ? content.split(new RegExp(`(${escapeRegExp(HIGHLIGHT_START_MARKER)}.*?${escapeRegExp(HIGHLIGHT_END_MARKER)})`)) : content,\n          className: 'text-lg font-bold text-gray-800 mt-4 mb-2 first:mt-0',\n          hasHighlight\n        };\n      }\n      \n      if (line.startsWith('## ')) {\n        const content = line.substring(3);\n        const hasHighlight = content.includes(HIGHLIGHT_START_MARKER);\n        return {\n          type: 'h4',\n          key,\n          content: hasHighlight ? content.split(new RegExp(`(${escapeRegExp(HIGHLIGHT_START_MARKER)}.*?${escapeRegExp(HIGHLIGHT_END_MARKER)})`)) : content,\n          className: 'text-base font-bold text-gray-700 mt-3 mb-2 first:mt-0',\n          hasHighlight\n        };\n      }\n      \n      if (line.startsWith('- ')) {\n        const content = line.substring(2);\n        const hasHighlight = content.includes(HIGHLIGHT_START_MARKER);\n        return {\n          type: 'li',\n          key,\n          content: hasHighlight ? content.split(new RegExp(`(${escapeRegExp(HIGHLIGHT_START_MARKER)}.*?${escapeRegExp(HIGHLIGHT_END_MARKER)})`)) : content,\n          className: 'flex items-start mt-1 ml-2',\n          hasHighlight\n        };\n      }\n      \n      if (line.includes('**') || line.includes(HIGHLIGHT_START_MARKER)) {\n        let parts: string[] = [];\n        let hasHighlight = false;\n        let hasBold = false;\n        \n        if (line.includes(HIGHLIGHT_START_MARKER)) {\n          // Handle highlighting first\n          parts = line.split(new RegExp(`(${escapeRegExp(HIGHLIGHT_START_MARKER)}.*?${escapeRegExp(HIGHLIGHT_END_MARKER)})`));\n          hasHighlight = true;\n        } else if (line.includes('**')) {\n          // Handle bold formatting\n          parts = line.split('**');\n          hasBold = true;\n        }\n        \n        return {\n          type: 'p',\n          key,\n          content: parts,\n          className: 'mt-1',\n          hasBold,\n          hasHighlight\n        };\n      }\n      \n      if (line.trim() === '') {\n        return {\n          type: 'br',\n          key,\n          content: '',\n          className: ''\n        };\n      }\n      \n      return {\n        type: 'p',\n        key,\n        content: line,\n        className: 'mt-1'\n      };\n    });\n}\n\nexport function renderMarkdownLine(item: MarkdownItem): ReactElement | null {\n  const { type, key, content, className, hasBold, hasHighlight } = item;\n  \n  // Helper function to render content with highlighting\n  const renderContentWithHighlight = (content: string | string[], hasHighlight?: boolean) => {\n    if (hasHighlight && Array.isArray(content)) {\n      return content.map((part: string, i: number) => {\n        if (part.includes(HIGHLIGHT_START_MARKER)) {\n          const cleanText = part.replace(HIGHLIGHT_START_MARKER, '').replace(HIGHLIGHT_END_MARKER, '');\n          return (\n            <mark \n              key={i} \n              className=\"bg-yellow-200 px-1 rounded text-gray-900 font-medium scroll-target\"\n              data-testid=\"highlighted-text\"\n            >\n              {cleanText}\n            </mark>\n          );\n        }\n        return part;\n      });\n    }\n    return content;\n  };\n\n  switch (type) {\n    case 'h3':\n      return <h3 key={key} className={className}>{renderContentWithHighlight(content, hasHighlight)}</h3>;\n    case 'h4':\n      return <h4 key={key} className={className}>{renderContentWithHighlight(content, hasHighlight)}</h4>;\n    case 'li':\n      return (\n        <div key={key} className={className}>\n          <span className=\"text-blue-500 mr-2 mt-1\">â€¢</span>\n          <span>{renderContentWithHighlight(content, hasHighlight)}</span>\n        </div>\n      );\n    case 'p':\n      if ((hasBold || hasHighlight) && Array.isArray(content)) {\n        return (\n          <p key={key} className={className}>\n            {content.map((part: string, i: number) => {\n              // Handle highlighting\n              if (hasHighlight && part.includes(HIGHLIGHT_START_MARKER)) {\n                const cleanText = part.replace(HIGHLIGHT_START_MARKER, '').replace(HIGHLIGHT_END_MARKER, '');\n                return (\n                  <mark \n                    key={i} \n                    className=\"bg-yellow-200 px-1 rounded text-gray-900 font-medium scroll-target\"\n                    data-testid=\"highlighted-text\"\n                  >\n                    {cleanText}\n                  </mark>\n                );\n              }\n              // Handle bold formatting\n              if (hasBold && i % 2 === 1) {\n                return <strong key={i} className=\"font-semibold text-gray-800\">{part}</strong>;\n              }\n              return part;\n            })}\n          </p>\n        );\n      }\n      return <p key={key} className={className}>{content}</p>;\n    case 'br':\n      return <br key={key} />;\n    default:\n      return null;\n  }\n}","size_bytes":6538},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    \n    // Handle access denied (403) by redirecting to access denied page (but not if already there)\n    if (res.status === 403 && text.includes('not approved') && !window.location.pathname.includes('/access-denied')) {\n      window.location.href = '/access-denied';\n      return;\n    }\n    \n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\n// Legacy API request function for backwards compatibility\nexport async function legacyApiRequest(url: string, method: string = 'GET', data?: any): Promise<any> {\n  const response = await apiRequest(method, url, data);\n  return response.json();\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1925},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/pages/access-denied.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Shield, Mail } from \"lucide-react\";\n\nexport default function AccessDenied() {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-red-50 to-orange-100 flex items-center justify-center\">\n      <div className=\"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center\">\n        <div className=\"mb-6\">\n          <Shield className=\"h-16 w-16 text-red-500 mx-auto mb-4\" />\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Access Pending</h1>\n          <p className=\"text-gray-600\">\n            Your account is waiting for administrator approval. Please contact the administrator to gain access to the meeting tracker application.\n          </p>\n        </div>\n        \n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6\">\n          <div className=\"flex items-center\">\n            <Mail className=\"h-5 w-5 text-red-600 mr-2\" />\n            <div className=\"text-left\">\n              <p className=\"text-sm font-medium text-red-800\">\n                Administrator Contact Required\n              </p>\n              <p className=\"text-sm text-red-600 mt-1\">\n                Please reach out to the application administrator to request access approval.\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"space-y-3\">\n          <Button asChild className=\"w-full\">\n            <a href=\"/api/logout\">\n              Sign Out\n            </a>\n          </Button>\n          \n          <Button variant=\"outline\" asChild className=\"w-full\">\n            <a href=\"/api/login\">\n              Try Signing In Again\n            </a>\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":1732},"client/src/pages/achievements.tsx":{"content":"import { useUserAchievements, getAchievementProgress, getNewAchievementsCount } from \"@/hooks/use-achievements\";\nimport { AchievementGrid } from \"@/components/achievements/achievement-grid\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Trophy, Target, Star, Zap } from \"lucide-react\";\n\nexport function AchievementsPage() {\n  const { data: achievements = [], isLoading, error } = useUserAchievements();\n\n  if (isLoading) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"flex items-center justify-center h-64\">\n          <div className=\"animate-pulse text-gray-500\">Loading achievements...</div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"flex items-center justify-center h-64\">\n          <div className=\"text-red-500\">Failed to load achievements. Please try again.</div>\n        </div>\n      </div>\n    );\n  }\n\n  const progress = getAchievementProgress(achievements);\n  const newCount = getNewAchievementsCount(achievements);\n  \n  // Achievement statistics by category\n  const categories = ['meetings', 'actions', 'productivity', 'social', 'milestones'];\n  const categoryStats = categories.map(category => {\n    const categoryAchievements = achievements.filter(a => a.category === category);\n    const unlocked = categoryAchievements.filter(a => a.unlocked).length;\n    return {\n      category,\n      total: categoryAchievements.length,\n      unlocked,\n      percentage: categoryAchievements.length > 0 ? (unlocked / categoryAchievements.length) * 100 : 0\n    };\n  });\n\n  return (\n    <div className=\"container mx-auto px-4 py-8 space-y-6\">\n      {/* Page Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900\">Achievements</h1>\n          <p className=\"text-gray-600 mt-2\">Track your progress and unlock badges for meeting productivity!</p>\n        </div>\n        {newCount > 0 && (\n          <Badge className=\"bg-red-500 text-white\">\n            {newCount} New Badge{newCount > 1 ? 's' : ''}!\n          </Badge>\n        )}\n      </div>\n\n      {/* Overall Progress Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        {/* Total Progress */}\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"flex items-center text-sm font-medium\">\n              <Trophy className=\"h-4 w-4 mr-2 text-yellow-500\" />\n              Overall Progress\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between text-sm\">\n                <span>Unlocked</span>\n                <span>{progress.unlocked}/{progress.total}</span>\n              </div>\n              <Progress value={progress.percentage} className=\"h-2\" />\n              <div className=\"text-xs text-gray-500\">\n                {Math.round(progress.percentage)}% complete\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Recent Achievements */}\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"flex items-center text-sm font-medium\">\n              <Star className=\"h-4 w-4 mr-2 text-blue-500\" />\n              Recent\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {achievements.filter(a => \n                a.unlocked && a.unlockedAt && \n                new Date(a.unlockedAt) > new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)\n              ).length}\n            </div>\n            <div className=\"text-xs text-gray-500\">\n              This week\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Rarity Breakdown */}\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"flex items-center text-sm font-medium\">\n              <Zap className=\"h-4 w-4 mr-2 text-purple-500\" />\n              Rare Badges\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {achievements.filter(a => \n                a.unlocked && ['rare', 'epic', 'legendary'].includes(a.rarity)\n              ).length}\n            </div>\n            <div className=\"text-xs text-gray-500\">\n              Rare+ achievements\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Next Target */}\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"flex items-center text-sm font-medium\">\n              <Target className=\"h-4 w-4 mr-2 text-green-500\" />\n              Next Target\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-sm font-medium\">\n              {achievements.find(a => !a.unlocked)?.name || \"All unlocked!\"}\n            </div>\n            <div className=\"text-xs text-gray-500\">\n              {achievements.find(a => !a.unlocked) ? \"Keep working!\" : \"Amazing!\"}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Category Progress */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Progress by Category</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\">\n            {categoryStats.map(stat => (\n              <div key={stat.category} className=\"space-y-2\">\n                <div className=\"flex justify-between text-sm\">\n                  <span className=\"capitalize font-medium\">{stat.category}</span>\n                  <span>{stat.unlocked}/{stat.total}</span>\n                </div>\n                <Progress value={stat.percentage} className=\"h-2\" />\n                <div className=\"text-xs text-gray-500\">\n                  {Math.round(stat.percentage)}%\n                </div>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Achievement Grid */}\n      <AchievementGrid achievements={achievements} showFilters={true} />\n    </div>\n  );\n}","size_bytes":6319},"client/src/pages/actions.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport ActionItem from \"@/components/actions/action-item\";\nimport { useActions } from \"@/hooks/use-actions\";\nimport { ActionStatus } from \"@shared/schema\";\n\nexport default function Actions() {\n  const { data: actions = [], isLoading } = useActions();\n  const [activeFilter, setActiveFilter] = useState<'all' | 'active' | 'my' | 'team' | 'completed'>('all');\n\n  const filteredActions = actions.filter(action => {\n    switch (activeFilter) {\n      case 'active':\n        return action.status !== ActionStatus.COMPLETED;\n      case 'my':\n        return action.assignee === 'me' && action.status !== ActionStatus.COMPLETED;\n      case 'team':\n        return action.assignee !== 'me' && action.status !== ActionStatus.COMPLETED;\n      case 'completed':\n        return action.status === ActionStatus.COMPLETED;\n      case 'all':\n      default:\n        return true;\n    }\n  }).sort((a, b) => {\n    // Sort completed tasks to the bottom\n    if (a.status === ActionStatus.COMPLETED && b.status !== ActionStatus.COMPLETED) {\n      return 1; // a goes after b\n    }\n    if (a.status !== ActionStatus.COMPLETED && b.status === ActionStatus.COMPLETED) {\n      return -1; // a goes before b\n    }\n    \n    // For tasks with the same completion status, sort by priority (high -> medium -> low)\n    const priorityOrder = { 'high': 0, 'medium': 1, 'low': 2 };\n    const aPriority = priorityOrder[a.priority as keyof typeof priorityOrder] ?? 1;\n    const bPriority = priorityOrder[b.priority as keyof typeof priorityOrder] ?? 1;\n    \n    if (aPriority !== bPriority) {\n      return aPriority - bPriority;\n    }\n    \n    // Finally sort by ID (newer IDs first for incomplete tasks)\n    return b.id - a.id;\n  });\n\n  const allActiveTasks = actions.filter(a => a.status !== ActionStatus.COMPLETED);\n  const myActiveTasks = actions.filter(a => a.assignee === 'me' && a.status !== ActionStatus.COMPLETED);\n  const teamActiveTasks = actions.filter(a => a.assignee !== 'me' && a.status !== ActionStatus.COMPLETED);\n  const completedTasks = actions.filter(a => a.status === ActionStatus.COMPLETED);\n\n  if (isLoading) {\n    return (\n      <div className=\"py-6\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\n          <div className=\"animate-pulse space-y-4\">\n            <div className=\"h-8 bg-gray-300 rounded w-1/3\"></div>\n            <div className=\"h-32 bg-gray-300 rounded\"></div>\n            <div className=\"h-32 bg-gray-300 rounded\"></div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"py-6\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\n        {/* Page Header */}\n        <div className=\"md:flex md:items-center md:justify-between mb-6\">\n          <div className=\"flex-1 min-w-0\">\n            <h1 className=\"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate\">\n              Action Items\n            </h1>\n            <p className=\"mt-1 text-sm text-gray-500\">\n              Manage and track all action items across meetings\n            </p>\n          </div>\n        </div>\n\n        {/* Filter Buttons */}\n        <div className=\"flex flex-wrap gap-2 mb-6\">\n          <Button\n            variant={activeFilter === 'all' ? 'default' : 'outline'}\n            onClick={() => setActiveFilter('all')}\n            data-testid=\"filter-all-actions\"\n          >\n            All ({actions.length})\n          </Button>\n          <Button\n            variant={activeFilter === 'active' ? 'default' : 'outline'}\n            onClick={() => setActiveFilter('active')}\n            data-testid=\"filter-active-actions\"\n            className={activeFilter === 'active' ? \n              \"bg-green-600 hover:bg-green-700 text-white border-green-600\" : \n              \"border-green-200 text-green-700 hover:bg-green-50\"\n            }\n          >\n            Active Only ({allActiveTasks.length})\n          </Button>\n          <Button\n            variant={activeFilter === 'my' ? 'default' : 'outline'}\n            onClick={() => setActiveFilter('my')}\n            data-testid=\"filter-my-actions\"\n          >\n            My Tasks ({myActiveTasks.length})\n          </Button>\n          <Button\n            variant={activeFilter === 'team' ? 'default' : 'outline'}\n            onClick={() => setActiveFilter('team')}\n            data-testid=\"filter-team-actions\"\n          >\n            Team Tasks ({teamActiveTasks.length})\n          </Button>\n          <Button\n            variant={activeFilter === 'completed' ? 'default' : 'outline'}\n            onClick={() => setActiveFilter('completed')}\n            data-testid=\"filter-completed-actions\"\n          >\n            Completed ({completedTasks.length})\n          </Button>\n        </div>\n\n        {/* Quick Stats */}\n        <Card className=\"mb-6\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex space-x-8\">\n                <div>\n                  <span className=\"text-2xl font-bold text-blue-600\">{myActiveTasks.length}</span>\n                  <p className=\"text-sm text-gray-600\">My Active Tasks</p>\n                </div>\n                <div>\n                  <span className=\"text-2xl font-bold text-green-600\">{teamActiveTasks.length}</span>\n                  <p className=\"text-sm text-gray-600\">Team Active Tasks</p>\n                </div>\n                <div>\n                  <span className=\"text-2xl font-bold text-gray-600\">{completedTasks.length}</span>\n                  <p className=\"text-sm text-gray-600\">Completed</p>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Actions List */}\n        {filteredActions.length === 0 ? (\n          <Card>\n            <CardContent className=\"p-8 text-center\">\n              <div className=\"text-gray-500\">\n                <h3 className=\"text-lg font-medium mb-2\">No action items found</h3>\n                <p>\n                  {activeFilter === 'all' ? \n                    \"No action items have been created yet.\" :\n                  activeFilter === 'active' ?\n                    \"All action items have been completed! Great job!\" :\n                    `No ${activeFilter} action items found.`\n                  }\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"space-y-3\">\n            {filteredActions.map((action) => (\n              <ActionItem key={action.id} action={action} />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":6729},"client/src/pages/admin.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useEffect } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\nimport { Users, Shield, UserCheck, UserX } from \"lucide-react\";\nimport { legacyApiRequest, queryClient } from \"@/lib/queryClient\";\nimport { User } from \"@shared/schema\";\n\nexport default function Admin() {\n  const { toast } = useToast();\n  \n  const { data: users = [], isLoading, error } = useQuery<User[]>({\n    queryKey: ['/api/admin/users'],\n    retry: false,\n  });\n\n  const approveMutation = useMutation({\n    mutationFn: async (userId: string) => {\n      await legacyApiRequest(`/api/admin/users/${userId}/approve`, 'POST');\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/users'] });\n      toast({\n        title: \"Success\",\n        description: \"User approved successfully!\",\n      });\n    },\n    onError: (error) => {\n      if (isUnauthorizedError(error as Error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to approve user\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const roleUpdateMutation = useMutation({\n    mutationFn: async ({ userId, role }: { userId: string; role: string }) => {\n      await legacyApiRequest(`/api/admin/users/${userId}/role`, 'POST', { role });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/users'] });\n      toast({\n        title: \"Success\",\n        description: \"User role updated successfully!\",\n      });\n    },\n    onError: (error) => {\n      if (isUnauthorizedError(error as Error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to update user role\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  useEffect(() => {\n    if (error && isUnauthorizedError(error as Error)) {\n      toast({\n        title: \"Unauthorized\",\n        description: \"You are logged out. Logging in again...\",\n        variant: \"destructive\",\n      });\n      setTimeout(() => {\n        window.location.href = \"/api/login\";\n      }, 500);\n      return;\n    }\n  }, [error, toast]);\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"animate-pulse\">\n          <div className=\"h-8 bg-gray-300 rounded w-1/3 mb-2\"></div>\n          <div className=\"h-4 bg-gray-300 rounded w-2/3 mb-6\"></div>\n          <div className=\"grid gap-4\">\n            {[...Array(3)].map((_, i) => (\n              <div key={i} className=\"h-32 bg-gray-300 rounded\"></div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"text-center py-12\">\n          <Shield className=\"mx-auto h-12 w-12 text-red-500 mb-4\" />\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Access Denied</h3>\n          <p className=\"text-gray-600\">You don't have permission to access the admin panel.</p>\n        </div>\n      </div>\n    );\n  }\n\n  const pendingUsers = users.filter(user => !user.isApproved);\n  const approvedUsers = users.filter(user => user.isApproved);\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">User Management</h1>\n        <p className=\"text-gray-600\">Control who has access to your meeting tracker application.</p>\n      </div>\n\n      {/* Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Users</CardTitle>\n            <Users className=\"h-4 w-4 text-gray-600\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{users.length}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Pending Approval</CardTitle>\n            <UserX className=\"h-4 w-4 text-orange-600\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-orange-600\">{pendingUsers.length}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Approved Users</CardTitle>\n            <UserCheck className=\"h-4 w-4 text-green-600\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600\">{approvedUsers.length}</div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Pending Users */}\n      {pendingUsers.length > 0 && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center\">\n              <UserX className=\"mr-2 h-5 w-5 text-orange-600\" />\n              Pending Approval ({pendingUsers.length})\n            </CardTitle>\n            <CardDescription>\n              These users are waiting for your approval to access the application.\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {pendingUsers.map((user) => (\n                <div key={user.id} className=\"flex items-center justify-between p-4 border border-orange-200 bg-orange-50 rounded-lg\">\n                  <div className=\"flex items-center space-x-4\">\n                    {user.profileImageUrl ? (\n                      <img \n                        src={user.profileImageUrl} \n                        alt=\"Profile\" \n                        className=\"h-10 w-10 rounded-full object-cover\"\n                      />\n                    ) : (\n                      <div className=\"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 font-medium\">\n                        {user.firstName?.[0]?.toUpperCase() || user.email?.[0]?.toUpperCase() || 'U'}\n                      </div>\n                    )}\n                    <div>\n                      <div className=\"font-medium text-gray-900\">\n                        {user.firstName && user.lastName ? `${user.firstName} ${user.lastName}` : user.email}\n                      </div>\n                      <div className=\"text-sm text-gray-600\">{user.email}</div>\n                    </div>\n                  </div>\n                  <Button\n                    onClick={() => approveMutation.mutate(user.id)}\n                    disabled={approveMutation.isPending}\n                    className=\"bg-green-600 hover:bg-green-700\"\n                  >\n                    {approveMutation.isPending ? 'Approving...' : 'Approve'}\n                  </Button>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Approved Users */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center\">\n            <UserCheck className=\"mr-2 h-5 w-5 text-green-600\" />\n            Approved Users ({approvedUsers.length})\n          </CardTitle>\n          <CardDescription>\n            These users have access to the application.\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            {approvedUsers.map((user) => (\n              <div key={user.id} className=\"flex items-center justify-between p-4 border border-green-200 bg-green-50 rounded-lg\">\n                <div className=\"flex items-center space-x-4\">\n                  {user.profileImageUrl ? (\n                    <img \n                      src={user.profileImageUrl} \n                      alt=\"Profile\" \n                      className=\"h-10 w-10 rounded-full object-cover\"\n                    />\n                  ) : (\n                    <div className=\"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 font-medium\">\n                      {user.firstName?.[0]?.toUpperCase() || user.email?.[0]?.toUpperCase() || 'U'}\n                    </div>\n                  )}\n                  <div>\n                    <div className=\"font-medium text-gray-900\">\n                      {user.firstName && user.lastName ? `${user.firstName} ${user.lastName}` : user.email}\n                    </div>\n                    <div className=\"text-sm text-gray-600\">{user.email}</div>\n                  </div>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <Badge variant={user.role === 'admin' ? 'default' : 'secondary'}>\n                    {user.role}\n                  </Badge>\n                  {user.role !== 'admin' && (\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => roleUpdateMutation.mutate({ userId: user.id, role: 'admin' })}\n                      disabled={roleUpdateMutation.isPending}\n                    >\n                      Make Admin\n                    </Button>\n                  )}\n                  {user.role === 'admin' && (\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => roleUpdateMutation.mutate({ userId: user.id, role: 'user' })}\n                      disabled={roleUpdateMutation.isPending}\n                    >\n                      Remove Admin\n                    </Button>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":10438},"client/src/pages/dashboard.tsx":{"content":"import { useState } from \"react\";\nimport { CheckSquare, Calendar, Clock, Users, Download, Plus } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport StatsCard from \"@/components/dashboard/stats-card\";\nimport PriorityActions from \"@/components/dashboard/priority-actions\";\nimport RecentMeetings from \"@/components/dashboard/recent-meetings\";\nimport QuickActions from \"@/components/dashboard/quick-actions\";\nimport TeamInsights from \"@/components/insights/team-insights\";\nimport MeetingForm from \"@/components/meetings/meeting-form\";\nimport { AchievementNotification } from \"@/components/achievements/achievement-notification\";\nimport { useStats } from \"@/hooks/use-actions\";\nimport { useUserAchievements, getNewAchievementsCount } from \"@/hooks/use-achievements\";\nimport { useLocation } from \"wouter\";\n\nexport default function Dashboard() {\n  const { data: stats, isLoading } = useStats();\n  const [, setLocation] = useLocation();\n  const [showMeetingDialog, setShowMeetingDialog] = useState(false);\n  const { data: achievements = [] } = useUserAchievements();\n\n  const handleMeetingSuccess = () => {\n    setShowMeetingDialog(false);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"py-6\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\n          <div className=\"animate-pulse\">\n            <div className=\"h-8 bg-gray-300 rounded w-1/3 mb-2\"></div>\n            <div className=\"h-4 bg-gray-300 rounded w-2/3 mb-6\"></div>\n            <div className=\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8\">\n              {[...Array(4)].map((_, i) => (\n                <div key={i} className=\"h-20 bg-gray-300 rounded\"></div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"py-6\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\n        {/* Achievement Notification */}\n        {getNewAchievementsCount(achievements) > 0 && (\n          <div className=\"mb-6\">\n            <AchievementNotification achievements={achievements} />\n          </div>\n        )}\n\n        {/* Page Header */}\n        <div className=\"md:flex md:items-center md:justify-between mb-6\">\n          <div className=\"flex-1 min-w-0\">\n            <h1 className=\"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate\">\n              Dashboard\n            </h1>\n            <p className=\"mt-1 text-sm text-gray-500\">\n              Track your meetings and action items in one place\n            </p>\n          </div>\n          <div className=\"mt-4 flex md:mt-0 md:ml-4 space-x-3\">\n            <Button \n              variant=\"outline\"\n              onClick={() => setLocation('/settings?tab=export')}\n            >\n              <Download className=\"mr-2 h-4 w-4\" />\n              Export\n            </Button>\n            <Button onClick={() => setShowMeetingDialog(true)}>\n              <Plus className=\"mr-2 h-4 w-4\" />\n              New Meeting\n            </Button>\n          </div>\n        </div>\n\n        {/* Stats Cards */}\n        <div className=\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8\">\n          <StatsCard\n            title=\"Active Actions\"\n            value={stats?.activeActions || 0}\n            icon={CheckSquare}\n            iconColor=\"text-blue-600\"\n            iconBgColor=\"bg-blue-100\"\n          />\n          <StatsCard\n            title=\"Total Meetings\"\n            value={stats?.totalMeetings || 0}\n            icon={Calendar}\n            iconColor=\"text-green-600\"\n            iconBgColor=\"bg-green-100\"\n          />\n          <StatsCard\n            title=\"Overdue Items\"\n            value={stats?.overdueActions || 0}\n            icon={Clock}\n            iconColor=\"text-red-600\"\n            iconBgColor=\"bg-red-100\"\n          />\n          <StatsCard\n            title=\"Team Members\"\n            value={stats?.totalEmployees || 0}\n            icon={Users}\n            iconColor=\"text-purple-600\"\n            iconBgColor=\"bg-purple-100\"\n          />\n        </div>\n\n        {/* Main Content Grid */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          <PriorityActions />\n          \n          {/* Sidebar Widgets */}\n          <div className=\"space-y-6\">\n            <RecentMeetings />\n            <QuickActions />\n            \n            {/* Upcoming Reminders */}\n            <div className=\"bg-white shadow-sm rounded-lg border border-gray-200\">\n              <div className=\"px-6 py-4 border-b border-gray-200\">\n                <h3 className=\"text-lg font-medium text-gray-900\">Upcoming Reminders</h3>\n              </div>\n              <div className=\"p-6\">\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-start space-x-3\">\n                    <div className=\"flex-shrink-0\">\n                      <div className=\"w-2 h-2 bg-red-400 rounded-full mt-2\"></div>\n                    </div>\n                    <div className=\"min-w-0 flex-1\">\n                      <p className=\"text-sm font-medium text-gray-900\">\n                        High priority actions need attention\n                      </p>\n                      <p className=\"text-xs text-gray-500\">\n                        {stats?.overdueActions} overdue items\n                      </p>\n                    </div>\n                  </div>\n                  {stats?.activeActions === 0 && (\n                    <div className=\"text-center py-4\">\n                      <p className=\"text-sm text-gray-500\">All caught up! ðŸŽ‰</p>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Team Insights Section */}\n        <div className=\"mt-6\">\n          <TeamInsights />\n        </div>\n      </div>\n\n      {/* Meeting Creation Dialog */}\n      <Dialog open={showMeetingDialog} onOpenChange={setShowMeetingDialog}>\n        <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>Create New Meeting</DialogTitle>\n          </DialogHeader>\n          <MeetingForm \n            onSuccess={handleMeetingSuccess} \n            onCancel={() => setShowMeetingDialog(false)}\n          />\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":6376},"client/src/pages/home.tsx":{"content":"import { useAuth } from \"@/hooks/useAuth\";\nimport { Button } from \"@/components/ui/button\";\nimport { User } from \"@shared/schema\";\nimport Dashboard from \"./dashboard\";\n\nexport default function Home() {\n  const { user } = useAuth() as { user: User | undefined };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">\n            Welcome back{user?.firstName ? `, ${user.firstName}` : ''}!\n          </h1>\n          <p className=\"text-gray-600\">Here's what's happening with your team meetings.</p>\n        </div>\n        <Button asChild variant=\"outline\">\n          <a href=\"/api/logout\">\n            Sign Out\n          </a>\n        </Button>\n      </div>\n      \n      <Dashboard />\n    </div>\n  );\n}","size_bytes":820},"client/src/pages/landing.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Users, Calendar, CheckSquare, TrendingUp } from \"lucide-react\";\n\nexport default function Landing() {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        {/* Header */}\n        <header className=\"py-6\">\n          <div className=\"flex justify-between items-center\">\n            <div className=\"flex items-center space-x-2\">\n              <Calendar className=\"h-8 w-8 text-blue-600\" />\n              <span className=\"text-2xl font-bold text-gray-900\">Meeting Tracker</span>\n            </div>\n            <Button asChild>\n              <a href=\"/api/login\" className=\"bg-blue-600 hover:bg-blue-700 text-white\">\n                Sign In\n              </a>\n            </Button>\n          </div>\n        </header>\n\n        {/* Hero Section */}\n        <div className=\"py-20 text-center\">\n          <h1 className=\"text-4xl sm:text-6xl font-bold text-gray-900 mb-6\">\n            Track Your Team\n            <span className=\"text-blue-600\"> Meetings</span>\n          </h1>\n          <p className=\"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\">\n            Streamline your one-on-ones, track action items, and keep your team organized with our powerful meeting management platform.\n          </p>\n          <Button asChild size=\"lg\" className=\"bg-blue-600 hover:bg-blue-700 text-white text-lg px-8 py-3\">\n            <a href=\"/api/login\">\n              Get Started\n            </a>\n          </Button>\n        </div>\n\n        {/* Features */}\n        <div className=\"py-20\">\n          <h2 className=\"text-3xl font-bold text-center text-gray-900 mb-12\">\n            Everything you need to manage meetings\n          </h2>\n          <div className=\"grid md:grid-cols-3 gap-8\">\n            <div className=\"bg-white p-8 rounded-lg shadow-sm border\">\n              <Users className=\"h-12 w-12 text-blue-600 mb-4\" />\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Team Management</h3>\n              <p className=\"text-gray-600\">\n                Keep track of your team members, their roles, and relationship dynamics in one organized place.\n              </p>\n            </div>\n            <div className=\"bg-white p-8 rounded-lg shadow-sm border\">\n              <Calendar className=\"h-12 w-12 text-blue-600 mb-4\" />\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Meeting Notes</h3>\n              <p className=\"text-gray-600\">\n                Document meeting discussions with rich markdown formatting and keep all your notes organized.\n              </p>\n            </div>\n            <div className=\"bg-white p-8 rounded-lg shadow-sm border\">\n              <CheckSquare className=\"h-12 w-12 text-blue-600 mb-4\" />\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Action Items</h3>\n              <p className=\"text-gray-600\">\n                Track action items with priorities and statuses to ensure nothing falls through the cracks.\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Stats */}\n        <div className=\"py-20 bg-white rounded-lg shadow-sm border\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl font-bold text-gray-900 mb-4\">\n              Built for Modern Teams\n            </h2>\n            <p className=\"text-xl text-gray-600\">\n              Simple, powerful, and designed to fit your workflow\n            </p>\n          </div>\n          <div className=\"grid md:grid-cols-3 gap-8 text-center\">\n            <div>\n              <TrendingUp className=\"h-12 w-12 text-blue-600 mx-auto mb-4\" />\n              <div className=\"text-3xl font-bold text-gray-900 mb-2\">Easy Setup</div>\n              <p className=\"text-gray-600\">Get started in minutes, not hours</p>\n            </div>\n            <div>\n              <Calendar className=\"h-12 w-12 text-blue-600 mx-auto mb-4\" />\n              <div className=\"text-3xl font-bold text-gray-900 mb-2\">Organized</div>\n              <p className=\"text-gray-600\">Keep all meeting data structured</p>\n            </div>\n            <div>\n              <CheckSquare className=\"h-12 w-12 text-blue-600 mx-auto mb-4\" />\n              <div className=\"text-3xl font-bold text-gray-900 mb-2\">Actionable</div>\n              <p className=\"text-gray-600\">Turn discussions into results</p>\n            </div>\n          </div>\n        </div>\n\n        {/* Footer */}\n        <footer className=\"py-12 text-center\">\n          <p className=\"text-gray-600\">\n            Ready to transform your team meetings?\n          </p>\n          <Button asChild size=\"lg\" className=\"mt-4 bg-blue-600 hover:bg-blue-700 text-white\">\n            <a href=\"/api/login\">\n              Sign In Now\n            </a>\n          </Button>\n        </footer>\n      </div>\n    </div>\n  );\n}","size_bytes":4892},"client/src/pages/meetings.tsx":{"content":"import { useState, useEffect, useRef } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport MeetingForm from \"@/components/meetings/meeting-form\";\nimport MeetingCard from \"@/components/meetings/meeting-card\";\nimport { useMeetings } from \"@/hooks/use-meetings\";\nimport { useEmployees } from \"@/hooks/use-employees\";\nimport { useAppContext } from \"@/contexts/app-context\";\nimport { Plus, Search, Calendar } from \"lucide-react\";\n\nexport default function Meetings() {\n  const [location, setLocation] = useLocation();\n  const { data: meetings = [], isLoading } = useMeetings();\n  const { data: employees = [] } = useEmployees();\n  const { searchTerm, setSearchTerm } = useAppContext();\n  \n  const [showNewMeeting, setShowNewMeeting] = useState(false);\n  const [filterEmployee, setFilterEmployee] = useState('all');\n  const [filterDateFrom, setFilterDateFrom] = useState('');\n  const [filterDateTo, setFilterDateTo] = useState('');\n  const [highlightedMeeting, setHighlightedMeeting] = useState<number | null>(null);\n  const [highlightedActionId, setHighlightedActionId] = useState<number | null>(null);\n  const highlightedMeetingRef = useRef<HTMLDivElement>(null);\n\n  // Check URL params for new meeting form or highlight\n  useEffect(() => {\n    const params = new URLSearchParams(location.split('?')[1] || '');\n    const isNew = params.get('new') === 'true';\n    const highlight = params.get('highlight');\n    const actionId = params.get('action');\n    \n    if (isNew) {\n      setShowNewMeeting(true);\n    }\n    \n    if (highlight) {\n      const id = parseInt(highlight);\n      setHighlightedMeeting(id);\n      // Clear filters to ensure highlighted meeting is visible\n      setSearchTerm('');\n      setFilterEmployee('all');\n      setFilterDateFrom('');\n      setFilterDateTo('');\n      setTimeout(() => setHighlightedMeeting(null), 5000);\n    }\n    \n    if (actionId) {\n      const id = parseInt(actionId);\n      setHighlightedActionId(id);\n      setTimeout(() => setHighlightedActionId(null), 8000);\n    }\n  }, [location, setSearchTerm]);\n\n  // Scroll to highlighted meeting card\n  useEffect(() => {\n    if (highlightedMeeting && !isLoading && highlightedMeetingRef.current) {\n      setTimeout(() => {\n        highlightedMeetingRef.current?.scrollIntoView({ \n          behavior: 'smooth', \n          block: 'start' \n        });\n      }, 200);\n    }\n  }, [highlightedMeeting, isLoading]);\n\n  const filteredMeetings = meetings.filter(meeting => {\n    const matchesSearch = searchTerm === '' || \n      meeting.employeeName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      meeting.notes.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      meeting.title?.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesEmployee = filterEmployee === 'all' || meeting.employeeName === filterEmployee;\n    const matchesDateFrom = filterDateFrom === '' || meeting.date >= filterDateFrom;\n    const matchesDateTo = filterDateTo === '' || meeting.date <= filterDateTo;\n    return matchesSearch && matchesEmployee && matchesDateFrom && matchesDateTo;\n  });\n\n  const clearFilters = () => {\n    setSearchTerm('');\n    setFilterEmployee('all');\n    setFilterDateFrom('');\n    setFilterDateTo('');\n  };\n\n  const setQuickDateFilter = (type: 'week' | 'month') => {\n    const today = new Date();\n    let startDate: Date;\n    \n    if (type === 'week') {\n      startDate = new Date(today);\n      startDate.setDate(today.getDate() - 7);\n    } else {\n      startDate = new Date(today.getFullYear(), today.getMonth(), 1);\n    }\n    \n    setFilterDateFrom(startDate.toISOString().split('T')[0]);\n    setFilterDateTo(today.toISOString().split('T')[0]);\n  };\n\n  const handleNewMeetingSuccess = () => {\n    setShowNewMeeting(false);\n    setLocation('/meetings');\n  };\n\n  const handleCancelNewMeeting = () => {\n    setShowNewMeeting(false);\n    setLocation('/meetings');\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"py-6\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\n          <div className=\"animate-pulse space-y-4\">\n            <div className=\"h-8 bg-gray-300 rounded w-1/3\"></div>\n            <div className=\"h-32 bg-gray-300 rounded\"></div>\n            <div className=\"space-y-4\">\n              {[...Array(3)].map((_, i) => (\n                <div key={i} className=\"h-48 bg-gray-300 rounded\"></div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"py-6\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8 space-y-6\">\n        {/* Page Header */}\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate\">\n              Meetings\n            </h1>\n            <p className=\"mt-1 text-sm text-gray-500\">\n              Manage meeting notes and action items\n            </p>\n          </div>\n          <Button onClick={() => setShowNewMeeting(true)}>\n            <Plus className=\"w-4 h-4 mr-2\" />\n            New Meeting\n          </Button>\n        </div>\n\n        {/* Search and Filters */}\n        <Card>\n          <CardContent className=\"p-4 space-y-3\">\n            {/* Search Bar */}\n            <div className=\"relative\">\n              <Search className=\"w-4 h-4 absolute left-3 top-3 text-gray-400\" />\n              <Input\n                placeholder=\"Search meetings and notes...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"pl-10\"\n              />\n            </div>\n            \n            {/* Filters */}\n            <div className=\"flex flex-wrap gap-3\">\n              <Select value={filterEmployee} onValueChange={setFilterEmployee}>\n                <SelectTrigger className=\"w-48\">\n                  <SelectValue placeholder=\"All Team Members\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Team Members</SelectItem>\n                  {employees.map(emp => (\n                    <SelectItem key={emp.id} value={emp.name}>{emp.name}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n              \n              <Input\n                type=\"date\"\n                value={filterDateFrom}\n                onChange={(e) => setFilterDateFrom(e.target.value)}\n                className=\"w-40\"\n                placeholder=\"From date\"\n              />\n              <span className=\"self-center text-gray-500 text-sm\">to</span>\n              <Input\n                type=\"date\"\n                value={filterDateTo}\n                onChange={(e) => setFilterDateTo(e.target.value)}\n                className=\"w-40\"\n                placeholder=\"To date\"\n              />\n              \n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setQuickDateFilter('week')}\n              >\n                This Week\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setQuickDateFilter('month')}\n              >\n                This Month\n              </Button>\n              \n              {(searchTerm || filterEmployee !== 'all' || filterDateFrom || filterDateTo) && (\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={clearFilters}\n                >\n                  Clear All\n                </Button>\n              )}\n            </div>\n            \n            <div className=\"text-sm text-gray-600\">\n              Showing {filteredMeetings.length} of {meetings.length} meetings\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Add Meeting Form */}\n        {showNewMeeting && (\n          <MeetingForm \n            onSuccess={handleNewMeetingSuccess}\n            onCancel={handleCancelNewMeeting}\n          />\n        )}\n\n        {/* Meetings List */}\n        {filteredMeetings.length === 0 ? (\n          <Card>\n            <CardContent className=\"p-8 text-center\">\n              <Calendar className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-medium text-gray-700 mb-2\">No meetings found</h3>\n              <p className=\"text-gray-500 mb-4\">\n                {meetings.length === 0 \n                  ? \"No meetings have been created yet.\" \n                  : \"No meetings match your current filters.\"}\n              </p>\n              {meetings.length > 0 && (\n                <Button onClick={clearFilters}>\n                  Clear Filters\n                </Button>\n              )}\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"space-y-4\">\n            {filteredMeetings.map(meeting => (\n              <div \n                key={meeting.id}\n                ref={highlightedMeeting === meeting.id ? highlightedMeetingRef : null}\n              >\n                <MeetingCard \n                  meeting={meeting}\n                  isHighlighted={highlightedMeeting === meeting.id}\n                  highlightedActionId={highlightedMeeting === meeting.id ? highlightedActionId : null}\n                />\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":9594},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/pages/notifications.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\nimport { Bell, MessageCircle, TestTube, ExternalLink, Copy, Check, Calendar } from \"lucide-react\";\nimport { legacyApiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { User } from \"@shared/schema\";\n\nexport default function Notifications() {\n  const { toast } = useToast();\n  const { user } = useAuth() as { user: User | undefined };\n  const [chatId, setChatId] = useState(user?.telegramChatId || '');\n  const [enabled, setEnabled] = useState(user?.notificationsEnabled || false);\n  const [copied, setCopied] = useState(false);\n\n  const updateMutation = useMutation({\n    mutationFn: async (data: { chatId: string; enabled: boolean }) => {\n      await legacyApiRequest('/api/notifications/telegram', 'POST', data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/auth/user'] });\n      toast({\n        title: \"Success\",\n        description: \"Notification settings updated successfully!\",\n      });\n    },\n    onError: (error) => {\n      if (isUnauthorizedError(error as Error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to update notification settings\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const testMutation = useMutation({\n    mutationFn: async () => {\n      await legacyApiRequest('/api/notifications/test', 'POST');\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Test Sent!\",\n        description: \"Check your Telegram for the test notification.\",\n      });\n    },\n    onError: (error) => {\n      if (isUnauthorizedError(error as Error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to send test notification. Make sure your Chat ID is correct and you've started the bot.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const testDailyMutation = useMutation({\n    mutationFn: async () => {\n      await legacyApiRequest('/api/notifications/test-daily', 'POST');\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Daily Test Sent!\",\n        description: \"Check your Telegram for the full daily notification format.\",\n      });\n    },\n    onError: (error) => {\n      if (isUnauthorizedError(error as Error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to send test daily notification. Make sure your Chat ID is correct and you've started the bot.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSave = () => {\n    if (enabled && !chatId.trim()) {\n      toast({\n        title: \"Error\",\n        description: \"Please enter your Telegram Chat ID to enable notifications\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    updateMutation.mutate({ chatId: chatId.trim(), enabled });\n  };\n\n  const copyBotLink = async () => {\n    const botLink = \"https://t.me/Guybnitify_bot\";\n    try {\n      await navigator.clipboard.writeText(botLink);\n      setCopied(true);\n      toast({\n        title: \"Copied!\",\n        description: \"Bot link copied to clipboard\",\n      });\n      setTimeout(() => setCopied(false), 2000);\n    } catch (err) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to copy link\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Notification Settings</h1>\n        <p className=\"text-gray-600\">Configure how you receive daily meeting updates and reminders.</p>\n      </div>\n\n      {/* Telegram Notifications */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center\">\n            <MessageCircle className=\"mr-2 h-5 w-5 text-blue-500\" />\n            Telegram Notifications\n          </CardTitle>\n          <CardDescription>\n            Get daily summaries of your meetings and action items sent directly to your Telegram.\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          {/* Setup Instructions */}\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <h3 className=\"font-medium text-blue-900 mb-2\">Setup Instructions:</h3>\n            <ol className=\"text-sm text-blue-800 space-y-1 list-decimal list-inside\">\n              <li>Start a chat with our Telegram bot</li>\n              <li>Send the command <code className=\"bg-blue-100 px-1 rounded\">/start</code></li>\n              <li>Copy the Chat ID provided by the bot</li>\n              <li>Paste it below and enable notifications</li>\n            </ol>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"mt-3\"\n              onClick={copyBotLink}\n            >\n              {copied ? (\n                <>\n                  <Check className=\"mr-2 h-4 w-4\" />\n                  Copied!\n                </>\n              ) : (\n                <>\n                  <Copy className=\"mr-2 h-4 w-4\" />\n                  Copy Bot Link\n                </>\n              )}\n            </Button>\n          </div>\n\n          {/* Settings Form */}\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"space-y-0.5\">\n                <Label className=\"text-base\">Enable Telegram Notifications</Label>\n                <div className=\"text-sm text-gray-600\">\n                  Receive daily meeting summaries at 9:00 AM\n                </div>\n              </div>\n              <Switch\n                checked={enabled}\n                onCheckedChange={setEnabled}\n              />\n            </div>\n\n            {enabled && (\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"chatId\">Telegram Chat ID</Label>\n                <Input\n                  id=\"chatId\"\n                  placeholder=\"Enter your Telegram Chat ID\"\n                  value={chatId}\n                  onChange={(e) => setChatId(e.target.value)}\n                />\n                <p className=\"text-sm text-gray-600\">\n                  Get this ID by starting the bot and sending /start\n                </p>\n              </div>\n            )}\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"flex gap-3\">\n            <Button\n              onClick={handleSave}\n              disabled={updateMutation.isPending}\n              className=\"flex-1\"\n            >\n              {updateMutation.isPending ? 'Saving...' : 'Save Settings'}\n            </Button>\n            \n            {enabled && chatId && (\n              <>\n                <Button\n                  variant=\"outline\"\n                  onClick={() => testMutation.mutate()}\n                  disabled={testMutation.isPending}\n                >\n                  <TestTube className=\"mr-2 h-4 w-4\" />\n                  {testMutation.isPending ? 'Sending...' : 'Simple Test'}\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  onClick={() => testDailyMutation.mutate()}\n                  disabled={testDailyMutation.isPending}\n                >\n                  <Calendar className=\"mr-2 h-4 w-4\" />\n                  {testDailyMutation.isPending ? 'Sending...' : 'Daily Format Test'}\n                </Button>\n              </>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Notification Schedule */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center\">\n            <Bell className=\"mr-2 h-5 w-5 text-orange-500\" />\n            Notification Schedule\n          </CardTitle>\n          <CardDescription>\n            When you'll receive your meeting updates.\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-3\">\n            <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\n              <div>\n                <div className=\"font-medium\">Daily Summary</div>\n                <div className=\"text-sm text-gray-600\">Overview of today's meetings and pending actions</div>\n              </div>\n              <div className=\"text-sm font-medium text-gray-900\">9:00 AM</div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":9553},"client/src/pages/settings.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Label } from \"@/components/ui/label\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useActions } from \"@/hooks/use-actions\";\nimport { useMeetings } from \"@/hooks/use-meetings\";\nimport { useEmployees } from \"@/hooks/use-employees\";\nimport { Download, Upload, Trash2, Bell, FileText } from \"lucide-react\";\nimport NotificationSchedules from \"@/components/settings/notification-schedules\";\nimport { EmailSettings } from \"@/components/settings/email-settings\";\nimport { useNotificationSchedules } from \"@/hooks/use-notification-schedules\";\n\nexport default function Settings() {\n  const [location] = useLocation();\n  const { toast } = useToast();\n  const { data: actions = [] } = useActions();\n  const { data: meetings = [] } = useMeetings();\n  const { data: employees = [] } = useEmployees();\n  const { data: schedules = [], refetch: refetchSchedules } = useNotificationSchedules();\n\n  const [activeTab, setActiveTab] = useState('general');\n  const [notificationsEnabled, setNotificationsEnabled] = useState(\n    localStorage.getItem('notificationsEnabled') === 'true'\n  );\n  const [notificationTime, setNotificationTime] = useState(\n    localStorage.getItem('notificationTime') || '09:00'\n  );\n  const [exportData, setExportData] = useState('');\n  const [templateData, setTemplateData] = useState('');\n  const [clearConfirm, setClearConfirm] = useState(false);\n\n  // Check URL params for active tab\n  useEffect(() => {\n    const params = new URLSearchParams(location.split('?')[1] || '');\n    const tab = params.get('tab');\n    if (tab && ['general', 'notifications', 'schedules', 'email', 'export', 'import'].includes(tab)) {\n      setActiveTab(tab);\n    }\n  }, [location]);\n\n  const saveNotificationSettings = () => {\n    localStorage.setItem('notificationsEnabled', notificationsEnabled.toString());\n    localStorage.setItem('notificationTime', notificationTime);\n    toast({\n      title: \"Success\",\n      description: `Notification settings saved: ${notificationsEnabled ? 'Enabled' : 'Disabled'} at ${notificationTime}`,\n    });\n  };\n\n  const testNotification = () => {\n    if (!('Notification' in window)) {\n      toast({\n        title: \"Error\",\n        description: \"Browser does not support notifications\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const activeActions = actions.filter(a => a.status !== 'completed');\n    if (activeActions.length === 0) {\n      toast({\n        title: \"Info\",\n        description: \"No active actions to notify about\",\n      });\n      return;\n    }\n\n    if (Notification.permission === 'granted') {\n      try {\n        const notification = new Notification('ðŸ“‹ Daily Actions Test', {\n          body: `You have ${activeActions.length} active actions`,\n          icon: 'ðŸ“‹'\n        });\n        setTimeout(() => notification.close(), 5000);\n        toast({\n          title: \"Success\",\n          description: \"Test notification sent!\",\n        });\n      } catch (error) {\n        toast({\n          title: \"Error\",\n          description: `Failed to create notification: ${error}`,\n          variant: \"destructive\",\n        });\n      }\n    } else if (Notification.permission === 'default') {\n      Notification.requestPermission().then(permission => {\n        if (permission === 'granted') {\n          testNotification();\n        } else {\n          toast({\n            title: \"Error\",\n            description: \"Notification permission denied\",\n            variant: \"destructive\",\n          });\n        }\n      });\n    } else {\n      toast({\n        title: \"Error\",\n        description: \"Notifications blocked. Enable in browser settings.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const generateTemplate = () => {\n    const activeActions = actions\n      .filter(a => a.status !== 'completed')\n      .sort((a, b) => {\n        const priorityOrder = { high: 3, medium: 2, low: 1 };\n        const aPriority = priorityOrder[a.priority as keyof typeof priorityOrder] || 1;\n        const bPriority = priorityOrder[b.priority as keyof typeof priorityOrder] || 1;\n        \n        if (aPriority !== bPriority) return bPriority - aPriority;\n        if (a.assignee === 'me' && b.assignee !== 'me') return -1;\n        if (a.assignee !== 'me' && b.assignee === 'me') return 1;\n        return 0;\n      })\n      .slice(0, 5);\n\n    if (activeActions.length === 0) {\n      toast({\n        title: \"Info\",\n        description: \"No active actions to create template for\",\n      });\n      return;\n    }\n\n    const date = new Date().toLocaleDateString();\n    let template = `ðŸ“‹ Daily Action Items - ${date}\\n\\n`;\n    \n    activeActions.forEach((action, index) => {\n      const priorityEmoji = action.priority === 'high' ? 'ðŸ”´' : \n                           action.priority === 'medium' ? 'ðŸŸ¡' : 'ðŸŸ¢';\n      const assigneeText = action.assignee === 'me' ? '(Me)' : `(${action.assignee})`;\n      \n      template += `${index + 1}. ${priorityEmoji} ${action.text} ${assigneeText}\\n`;\n      template += `   From: ${action.employeeName}\\n\\n`;\n    });\n\n    template += `Total active actions: ${activeActions.length}\\nHave a productive day! ðŸ’ª`;\n\n    if (navigator.clipboard) {\n      navigator.clipboard.writeText(template).then(() => {\n        toast({\n          title: \"Success\",\n          description: \"Template copied to clipboard!\",\n        });\n      }).catch(() => {\n        setTemplateData(template);\n        toast({\n          title: \"Info\",\n          description: \"Template ready below - copy manually\",\n        });\n      });\n    } else {\n      setTemplateData(template);\n      toast({\n        title: \"Info\",\n        description: \"Template ready below - copy manually\",\n      });\n    }\n  };\n\n  const exportAppData = () => {\n    try {\n      const data = {\n        employees,\n        meetings,\n        actions,\n        exportDate: new Date().toISOString(),\n        version: '1.0'\n      };\n      const dataStr = JSON.stringify(data, null, 2);\n      \n      if (navigator.clipboard) {\n        navigator.clipboard.writeText(dataStr).then(() => {\n          toast({\n            title: \"Success\",\n            description: \"Export data copied to clipboard! Save as .json file\",\n          });\n        }).catch(() => {\n          setExportData(dataStr);\n          toast({\n            title: \"Info\",\n            description: \"Export data ready below - copy manually\",\n          });\n        });\n      } else {\n        setExportData(dataStr);\n        toast({\n          title: \"Info\",\n          description: \"Export data ready below - copy manually\",\n        });\n      }\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: `Export failed: ${error}`,\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const clearAllData = () => {\n    if (!clearConfirm) {\n      setClearConfirm(true);\n      toast({\n        title: \"Warning\",\n        description: 'Click \"CONFIRM DELETE\" to permanently clear all data',\n        variant: \"destructive\",\n      });\n      setTimeout(() => setClearConfirm(false), 10000);\n    } else {\n      // In a real app, this would call APIs to clear data\n      // For now, just show a message since we're using memory storage\n      setClearConfirm(false);\n      toast({\n        title: \"Info\",\n        description: \"Data clearing would happen here in a real implementation\",\n      });\n    }\n  };\n\n  return (\n    <div className=\"py-6\">\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 md:px-8\">\n        {/* Page Header */}\n        <div className=\"mb-6\">\n          <h1 className=\"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate\">\n            Settings\n          </h1>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            Manage your application preferences and data\n          </p>\n        </div>\n\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <TabsList className=\"grid w-full grid-cols-6\">\n            <TabsTrigger value=\"general\">General</TabsTrigger>\n            <TabsTrigger value=\"notifications\">Notifications</TabsTrigger>\n            <TabsTrigger value=\"schedules\">Schedules</TabsTrigger>\n            <TabsTrigger value=\"email\">Email</TabsTrigger>\n            <TabsTrigger value=\"export\">Export</TabsTrigger>\n            <TabsTrigger value=\"import\">Import</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"general\" className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Application Statistics</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                  <div className=\"text-center p-4 bg-blue-50 rounded-lg\">\n                    <div className=\"text-2xl font-bold text-blue-600\">{employees.length}</div>\n                    <div className=\"text-sm text-blue-600\">Team Members</div>\n                  </div>\n                  <div className=\"text-center p-4 bg-green-50 rounded-lg\">\n                    <div className=\"text-2xl font-bold text-green-600\">{meetings.length}</div>\n                    <div className=\"text-sm text-green-600\">Meetings</div>\n                  </div>\n                  <div className=\"text-center p-4 bg-purple-50 rounded-lg\">\n                    <div className=\"text-2xl font-bold text-purple-600\">{actions.length}</div>\n                    <div className=\"text-sm text-purple-600\">Total Actions</div>\n                  </div>\n                  <div className=\"text-center p-4 bg-orange-50 rounded-lg\">\n                    <div className=\"text-2xl font-bold text-orange-600\">\n                      {actions.filter(a => a.status !== 'completed').length}\n                    </div>\n                    <div className=\"text-sm text-orange-600\">Active Actions</div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-red-600\">Danger Zone</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <h4 className=\"font-medium text-gray-900\">Clear All Data</h4>\n                    <p className=\"text-sm text-gray-500\">\n                      Permanently delete all meetings, actions, and team members\n                    </p>\n                  </div>\n                  <Button\n                    variant=\"destructive\"\n                    onClick={clearAllData}\n                  >\n                    <Trash2 className=\"w-4 h-4 mr-2\" />\n                    {clearConfirm ? 'CONFIRM DELETE' : 'Clear All Data'}\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"notifications\" className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Notification Settings</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <Label htmlFor=\"notifications\">Enable Notifications</Label>\n                    <p className=\"text-sm text-gray-500\">\n                      Get notified about your daily action items\n                    </p>\n                  </div>\n                  <Switch\n                    id=\"notifications\"\n                    checked={notificationsEnabled}\n                    onCheckedChange={setNotificationsEnabled}\n                  />\n                </div>\n\n                <div>\n                  <Label htmlFor=\"notification-time\">Notification Time</Label>\n                  <Input\n                    id=\"notification-time\"\n                    type=\"time\"\n                    value={notificationTime}\n                    onChange={(e) => setNotificationTime(e.target.value)}\n                    className=\"w-32\"\n                  />\n                </div>\n\n                <div className=\"flex space-x-3\">\n                  <Button onClick={saveNotificationSettings}>\n                    Save Settings\n                  </Button>\n                  <Button variant=\"outline\" onClick={testNotification}>\n                    <Bell className=\"w-4 h-4 mr-2\" />\n                    Test Notification\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Daily Template Generator</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <p className=\"text-sm text-gray-600\">\n                  Generate a daily summary of your active action items\n                </p>\n                <Button onClick={generateTemplate}>\n                  <FileText className=\"w-4 h-4 mr-2\" />\n                  Generate Template\n                </Button>\n                {templateData && (\n                  <Textarea\n                    value={templateData}\n                    readOnly\n                    className=\"font-mono text-sm min-h-[200px]\"\n                  />\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"schedules\" className=\"space-y-6\">\n            <NotificationSchedules \n              schedules={schedules} \n              onUpdate={() => refetchSchedules()} \n            />\n          </TabsContent>\n\n          <TabsContent value=\"email\" className=\"space-y-6\">\n            <EmailSettings />\n          </TabsContent>\n\n          <TabsContent value=\"export\" className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Export Data</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <p className=\"text-sm text-gray-600\">\n                  Export all your data as a JSON file for backup or migration\n                </p>\n                <Button onClick={exportAppData}>\n                  <Download className=\"w-4 h-4 mr-2\" />\n                  Export All Data\n                </Button>\n                {exportData && (\n                  <div>\n                    <Label>Export Data (Copy and save as .json file)</Label>\n                    <Textarea\n                      value={exportData}\n                      readOnly\n                      className=\"font-mono text-sm min-h-[300px]\"\n                    />\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"import\" className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Import Data</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <p className=\"text-sm text-gray-600\">\n                  Import data from a previously exported JSON file\n                </p>\n                <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center\">\n                  <Upload className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                  <p className=\"text-sm text-gray-600 mb-4\">\n                    Import functionality would be implemented here\n                  </p>\n                  <Button variant=\"outline\" disabled>\n                    <Upload className=\"w-4 h-4 mr-2\" />\n                    Choose File\n                  </Button>\n                </div>\n                <div className=\"text-sm text-gray-500\">\n                  <strong>Note:</strong> Importing will replace all existing data. \n                  Make sure to export your current data first.\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n}\n","size_bytes":16276},"client/src/pages/team.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useEmployees, useCreateEmployee, useUpdateEmployee, useDeleteEmployee } from \"@/hooks/use-employees\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Employee } from \"@shared/schema\";\nimport { Plus, Users, Edit, Trash2 } from \"lucide-react\";\nimport EmployeeUserLink from \"@/components/team/employee-user-link\";\n\nexport default function Team() {\n  const [location, setLocation] = useLocation();\n  const { data: employees = [], isLoading } = useEmployees();\n  const createEmployee = useCreateEmployee();\n  const updateEmployee = useUpdateEmployee();\n  const deleteEmployee = useDeleteEmployee();\n  const { toast } = useToast();\n  const { user } = useAuth();\n\n  const [showForm, setShowForm] = useState(false);\n  const [editingEmployee, setEditingEmployee] = useState<Employee | null>(null);\n  const [formData, setFormData] = useState({\n    name: '',\n    role: '',\n    department: '',\n    relationship: ''\n  });\n\n  // Check URL params for new employee form\n  useEffect(() => {\n    const params = new URLSearchParams(location.split('?')[1] || '');\n    const isNew = params.get('new') === 'true';\n    \n    if (isNew) {\n      setShowForm(true);\n    }\n  }, [location]);\n\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      role: '',\n      department: '',\n      relationship: ''\n    });\n    setEditingEmployee(null);\n    setShowForm(false);\n    setLocation('/team');\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!formData.name || !formData.role || !formData.department || !formData.relationship) {\n      toast({\n        title: \"Error\",\n        description: \"Please fill in all fields\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    try {\n      if (editingEmployee) {\n        await updateEmployee.mutateAsync({\n          id: editingEmployee.id,\n          updates: formData\n        });\n        toast({\n          title: \"Success\",\n          description: \"Team member updated successfully!\",\n        });\n      } else {\n        await createEmployee.mutateAsync(formData);\n        toast({\n          title: \"Success\",\n          description: \"Team member added successfully!\",\n        });\n      }\n      resetForm();\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: `Failed to ${editingEmployee ? 'update' : 'create'} team member`,\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleEdit = (employee: Employee) => {\n    setEditingEmployee(employee);\n    setFormData({\n      name: employee.name,\n      role: employee.role,\n      department: employee.department,\n      relationship: employee.relationship\n    });\n    setShowForm(true);\n  };\n\n  const handleDelete = async (employee: Employee) => {\n    if (!confirm(`Are you sure you want to delete ${employee.name}?`)) {\n      return;\n    }\n\n    try {\n      await deleteEmployee.mutateAsync(employee.id);\n      toast({\n        title: \"Success\",\n        description: \"Team member deleted successfully!\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete team member\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const getInitials = (name: string) => {\n    return name.split(' ').map(n => n[0]).join('').toUpperCase();\n  };\n\n  const getRelationshipColor = (relationship: string) => {\n    switch (relationship.toLowerCase()) {\n      case 'direct report':\n        return 'bg-blue-100 text-blue-800';\n      case 'peer':\n        return 'bg-green-100 text-green-800';\n      case 'manager':\n        return 'bg-purple-100 text-purple-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"py-6\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\n          <div className=\"animate-pulse space-y-4\">\n            <div className=\"h-8 bg-gray-300 rounded w-1/3\"></div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {[...Array(6)].map((_, i) => (\n                <div key={i} className=\"h-32 bg-gray-300 rounded\"></div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"py-6\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8 space-y-6\">\n        {/* Page Header */}\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate\">\n              Team Members\n            </h1>\n            <p className=\"mt-1 text-sm text-gray-500\">\n              Manage your team and their information\n            </p>\n          </div>\n          <Button onClick={() => setShowForm(true)}>\n            <Plus className=\"w-4 h-4 mr-2\" />\n            Add Team Member\n          </Button>\n        </div>\n\n        {/* Add/Edit Form */}\n        {showForm && (\n          <Card>\n            <CardHeader>\n              <CardTitle>\n                {editingEmployee ? 'Edit Team Member' : 'Add New Team Member'}\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"name\">Name *</Label>\n                    <Input\n                      id=\"name\"\n                      value={formData.name}\n                      onChange={(e) => setFormData({...formData, name: e.target.value})}\n                      placeholder=\"Enter full name\"\n                    />\n                  </div>\n\n                  <div>\n                    <Label htmlFor=\"role\">Role *</Label>\n                    <Input\n                      id=\"role\"\n                      value={formData.role}\n                      onChange={(e) => setFormData({...formData, role: e.target.value})}\n                      placeholder=\"e.g., Senior Developer\"\n                    />\n                  </div>\n\n                  <div>\n                    <Label htmlFor=\"department\">Department *</Label>\n                    <Input\n                      id=\"department\"\n                      value={formData.department}\n                      onChange={(e) => setFormData({...formData, department: e.target.value})}\n                      placeholder=\"e.g., Engineering\"\n                    />\n                  </div>\n\n                  <div>\n                    <Label htmlFor=\"relationship\">Relationship *</Label>\n                    <Select \n                      value={formData.relationship} \n                      onValueChange={(value) => setFormData({...formData, relationship: value})}\n                    >\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Select relationship\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"Direct Report\">Direct Report</SelectItem>\n                        <SelectItem value=\"Peer\">Peer</SelectItem>\n                        <SelectItem value=\"Manager\">Manager</SelectItem>\n                        <SelectItem value=\"Stakeholder\">Stakeholder</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n\n                <div className=\"flex space-x-3\">\n                  <Button \n                    type=\"submit\" \n                    disabled={createEmployee.isPending || updateEmployee.isPending}\n                  >\n                    {editingEmployee ? 'Update' : 'Add'} Team Member\n                  </Button>\n                  <Button type=\"button\" variant=\"outline\" onClick={resetForm}>\n                    Cancel\n                  </Button>\n                </div>\n              </form>\n            </CardContent>\n          </Card>\n        )}\n\n        {/* Team Members Grid */}\n        {employees.length === 0 ? (\n          <Card>\n            <CardContent className=\"p-8 text-center\">\n              <Users className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-medium text-gray-700 mb-2\">No team members</h3>\n              <p className=\"text-gray-500 mb-4\">\n                Add your first team member to get started\n              </p>\n              <Button onClick={() => setShowForm(true)}>\n                <Plus className=\"w-4 h-4 mr-2\" />\n                Add Team Member\n              </Button>\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {employees.map((employee) => (\n              <Card key={employee.id} className=\"hover:shadow-lg transition-shadow\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-start justify-between mb-4\">\n                    <div className=\"flex items-center space-x-3\">\n                      <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center\">\n                        <span className=\"text-blue-600 font-medium text-sm\">\n                          {getInitials(employee.name)}\n                        </span>\n                      </div>\n                      <div>\n                        <h3 className=\"text-lg font-semibold text-gray-900\">\n                          {employee.name}\n                        </h3>\n                        <p className=\"text-sm text-gray-600\">{employee.role}</p>\n                      </div>\n                    </div>\n                    <div className=\"flex space-x-1\">\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => handleEdit(employee)}\n                      >\n                        <Edit className=\"w-4 h-4\" />\n                      </Button>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => handleDelete(employee)}\n                        className=\"text-red-600 hover:text-red-700\"\n                      >\n                        <Trash2 className=\"w-4 h-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <div>\n                      <span className=\"text-sm font-medium text-gray-500\">Department:</span>\n                      <p className=\"text-sm text-gray-900\">{employee.department}</p>\n                    </div>\n                    <div>\n                      <span className=\"text-sm font-medium text-gray-500\">Relationship:</span>\n                      <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ml-2 ${getRelationshipColor(employee.relationship)}`}>\n                        {employee.relationship}\n                      </span>\n                    </div>\n                    {(user as any)?.role === 'admin' && (\n                      <div>\n                        <span className=\"text-sm font-medium text-gray-500\">System User:</span>\n                        <EmployeeUserLink employee={employee} />\n                      </div>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":11878},"client/src/components/achievements/achievement-badge.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\nimport { AchievementWithStatus } from \"@/hooks/use-achievements\";\nimport { Eye, Lock } from \"lucide-react\";\n\ninterface AchievementBadgeProps {\n  achievement: AchievementWithStatus;\n  onMarkViewed?: (userAchievementId: number) => void;\n  size?: \"small\" | \"medium\" | \"large\";\n}\n\nexport function AchievementBadge({ achievement, onMarkViewed, size = \"medium\" }: AchievementBadgeProps) {\n  const sizeClasses = {\n    small: \"h-16 w-16 text-xs\",\n    medium: \"h-20 w-20 text-sm\", \n    large: \"h-24 w-24 text-base\"\n  };\n\n  const getRarityColor = (rarity: string): string => {\n    switch (rarity) {\n      case 'common': return 'border-gray-300 bg-gray-50';\n      case 'rare': return 'border-blue-300 bg-blue-50';\n      case 'epic': return 'border-purple-300 bg-purple-50';\n      case 'legendary': return 'border-yellow-300 bg-yellow-50 shadow-md';\n      default: return 'border-gray-300 bg-gray-50';\n    }\n  };\n\n  const getRarityBadgeColor = (rarity: string): string => {\n    switch (rarity) {\n      case 'common': return 'bg-gray-100 text-gray-800';\n      case 'rare': return 'bg-blue-100 text-blue-800';\n      case 'epic': return 'bg-purple-100 text-purple-800';\n      case 'legendary': return 'bg-yellow-100 text-yellow-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  return (\n    <Card \n      className={cn(\n        \"relative transition-all duration-200 hover:scale-105\",\n        achievement.unlocked ? getRarityColor(achievement.rarity) : \"border-gray-200 bg-gray-100\",\n        !achievement.unlocked && \"opacity-60\"\n      )}\n      data-testid={`achievement-badge-${achievement.badgeId}`}\n    >\n      <CardContent className=\"p-4 text-center\">\n        {/* Achievement Icon/Emoji */}\n        <div \n          className={cn(\n            \"mx-auto mb-2 flex items-center justify-center rounded-full border-2\",\n            sizeClasses[size],\n            achievement.unlocked ? getRarityColor(achievement.rarity) : \"border-gray-300 bg-gray-200\"\n          )}\n        >\n          {achievement.unlocked ? (\n            <span className=\"text-2xl\">{achievement.icon}</span>\n          ) : (\n            <Lock className=\"h-6 w-6 text-gray-400\" />\n          )}\n        </div>\n\n        {/* Achievement Name */}\n        <h3 className={cn(\n          \"font-semibold\",\n          achievement.unlocked ? \"text-gray-900\" : \"text-gray-500\",\n          size === \"small\" ? \"text-xs\" : \"text-sm\"\n        )}>\n          {achievement.name}\n        </h3>\n\n        {/* Achievement Description */}\n        <p className={cn(\n          \"mt-1 text-xs\",\n          achievement.unlocked ? \"text-gray-600\" : \"text-gray-400\"\n        )}>\n          {achievement.description}\n        </p>\n\n        {/* Rarity Badge */}\n        <Badge \n          className={cn(\n            \"mt-2 text-xs\",\n            getRarityBadgeColor(achievement.rarity)\n          )}\n          variant=\"secondary\"\n        >\n          {achievement.rarity.charAt(0).toUpperCase() + achievement.rarity.slice(1)}\n        </Badge>\n\n        {/* Unlocked Date */}\n        {achievement.unlocked && achievement.unlockedAt && (\n          <div className=\"mt-2 text-xs text-gray-500\">\n            Unlocked {new Date(achievement.unlockedAt).toLocaleDateString()}\n          </div>\n        )}\n\n        {/* New Badge Indicator */}\n        {achievement.unlocked && !achievement.isViewed && (\n          <div className=\"absolute -right-2 -top-2\">\n            <Badge className=\"bg-red-500 text-white\">New!</Badge>\n          </div>\n        )}\n\n        {/* Mark as Viewed Button */}\n        {achievement.unlocked && !achievement.isViewed && achievement.userAchievementId && onMarkViewed && (\n          <Button\n            size=\"sm\"\n            variant=\"outline\"\n            className=\"mt-2 text-xs\"\n            onClick={() => onMarkViewed(achievement.userAchievementId!)}\n            data-testid={`button-mark-viewed-${achievement.badgeId}`}\n          >\n            <Eye className=\"h-3 w-3 mr-1\" />\n            Mark Viewed\n          </Button>\n        )}\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":4199},"client/src/components/achievements/achievement-grid.tsx":{"content":"import { useState } from \"react\";\nimport { AchievementBadge } from \"./achievement-badge\";\nimport { AchievementWithStatus, useMarkAchievementViewed, getAchievementsByCategory } from \"@/hooks/use-achievements\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { AchievementCategory } from \"@shared/schema\";\nimport { Filter, Trophy } from \"lucide-react\";\n\ninterface AchievementGridProps {\n  achievements: AchievementWithStatus[];\n  showFilters?: boolean;\n}\n\nexport function AchievementGrid({ achievements, showFilters = true }: AchievementGridProps) {\n  const [selectedCategory, setSelectedCategory] = useState<string>(\"all\");\n  const [showUnlockedOnly, setShowUnlockedOnly] = useState<boolean>(false);\n  const markViewed = useMarkAchievementViewed();\n\n  // Filter achievements based on selected filters\n  const filteredAchievements = achievements.filter(achievement => {\n    const categoryMatch = selectedCategory === \"all\" || achievement.category === selectedCategory;\n    const unlockedMatch = !showUnlockedOnly || achievement.unlocked;\n    return categoryMatch && unlockedMatch;\n  });\n\n  const handleMarkViewed = (userAchievementId: number) => {\n    markViewed.mutate(userAchievementId);\n  };\n\n  const categories = [\n    { value: \"all\", label: \"All\", count: achievements.length },\n    { value: AchievementCategory.MEETINGS, label: \"Meetings\", count: getAchievementsByCategory(achievements, AchievementCategory.MEETINGS).length },\n    { value: AchievementCategory.ACTIONS, label: \"Actions\", count: getAchievementsByCategory(achievements, AchievementCategory.ACTIONS).length },\n    { value: AchievementCategory.PRODUCTIVITY, label: \"Productivity\", count: getAchievementsByCategory(achievements, AchievementCategory.PRODUCTIVITY).length },\n    { value: AchievementCategory.SOCIAL, label: \"Social\", count: getAchievementsByCategory(achievements, AchievementCategory.SOCIAL).length },\n    { value: AchievementCategory.MILESTONES, label: \"Milestones\", count: getAchievementsByCategory(achievements, AchievementCategory.MILESTONES).length },\n  ];\n\n  const unlockedCount = achievements.filter(a => a.unlocked).length;\n  const totalCount = achievements.length;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header with Stats */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-4\">\n          <div className=\"flex items-center space-x-2\">\n            <Trophy className=\"h-5 w-5 text-yellow-500\" />\n            <span className=\"text-lg font-semibold\">Achievements</span>\n          </div>\n          <Badge variant=\"secondary\">\n            {unlockedCount}/{totalCount} Unlocked\n          </Badge>\n        </div>\n      </div>\n\n      {/* Filters */}\n      {showFilters && (\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center space-x-2\">\n            <Filter className=\"h-4 w-4\" />\n            <span className=\"text-sm font-medium\">Filters:</span>\n          </div>\n          \n          {/* Category Filter */}\n          <div className=\"flex flex-wrap gap-2\">\n            {categories.map(category => (\n              <Button\n                key={category.value}\n                variant={selectedCategory === category.value ? \"default\" : \"outline\"}\n                size=\"sm\"\n                onClick={() => setSelectedCategory(category.value)}\n                data-testid={`filter-category-${category.value}`}\n              >\n                {category.label} ({category.count})\n              </Button>\n            ))}\n          </div>\n\n          {/* Unlocked Only Filter */}\n          <div className=\"flex items-center space-x-2\">\n            <Button\n              variant={showUnlockedOnly ? \"default\" : \"outline\"}\n              size=\"sm\"\n              onClick={() => setShowUnlockedOnly(!showUnlockedOnly)}\n              data-testid=\"filter-unlocked-only\"\n            >\n              Show Unlocked Only\n            </Button>\n          </div>\n        </div>\n      )}\n\n      {/* Achievement Grid */}\n      {filteredAchievements.length === 0 ? (\n        <div className=\"text-center py-12\">\n          <Trophy className=\"h-12 w-12 text-gray-300 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No Achievements Found</h3>\n          <p className=\"text-gray-500\">\n            {showUnlockedOnly ? \"You haven't unlocked any achievements in this category yet.\" : \"No achievements match your current filters.\"}\n          </p>\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\n          {filteredAchievements.map(achievement => (\n            <AchievementBadge\n              key={achievement.id}\n              achievement={achievement}\n              onMarkViewed={handleMarkViewed}\n              size=\"medium\"\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}","size_bytes":4902},"client/src/components/achievements/achievement-notification.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { AchievementWithStatus, useMarkAchievementViewed } from \"@/hooks/use-achievements\";\nimport { X, Trophy, Star } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface AchievementNotificationProps {\n  achievements: AchievementWithStatus[];\n  onDismiss?: () => void;\n  className?: string;\n}\n\nexport function AchievementNotification({ achievements, onDismiss, className }: AchievementNotificationProps) {\n  const [isVisible, setIsVisible] = useState(false);\n  const markViewed = useMarkAchievementViewed();\n  \n  const newAchievements = achievements.filter(a => a.unlocked && !a.isViewed);\n  \n  useEffect(() => {\n    if (newAchievements.length > 0) {\n      setIsVisible(true);\n    }\n  }, [newAchievements.length]);\n\n  if (newAchievements.length === 0 || !isVisible) {\n    return null;\n  }\n\n  const handleDismiss = () => {\n    // Mark all as viewed\n    newAchievements.forEach(achievement => {\n      if (achievement.userAchievementId) {\n        markViewed.mutate(achievement.userAchievementId);\n      }\n    });\n    setIsVisible(false);\n    onDismiss?.();\n  };\n\n  const getRarityColor = (rarity: string): string => {\n    switch (rarity) {\n      case 'common': return 'border-gray-300 bg-gray-50';\n      case 'rare': return 'border-blue-300 bg-blue-50';\n      case 'epic': return 'border-purple-300 bg-purple-50';\n      case 'legendary': return 'border-yellow-300 bg-yellow-50 shadow-lg';\n      default: return 'border-gray-300 bg-gray-50';\n    }\n  };\n\n  return (\n    <Card className={cn(\n      \"relative animate-in slide-in-from-right duration-500 border-2 border-yellow-300 bg-gradient-to-r from-yellow-50 to-orange-50\",\n      className\n    )}>\n      <CardContent className=\"p-4\">\n        <div className=\"flex items-start justify-between\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"flex-shrink-0\">\n              <div className=\"h-12 w-12 rounded-full bg-yellow-400 flex items-center justify-center\">\n                <Trophy className=\"h-6 w-6 text-yellow-800\" />\n              </div>\n            </div>\n            <div className=\"flex-1\">\n              <h3 className=\"text-lg font-semibold text-gray-900 flex items-center\">\n                New Achievement{newAchievements.length > 1 ? 's' : ''} Unlocked!\n                <Star className=\"h-4 w-4 ml-2 text-yellow-500\" />\n              </h3>\n              <p className=\"text-sm text-gray-600 mt-1\">\n                You've earned {newAchievements.length} new badge{newAchievements.length > 1 ? 's' : ''}!\n              </p>\n            </div>\n          </div>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={handleDismiss}\n            className=\"text-gray-400 hover:text-gray-600\"\n            data-testid=\"button-dismiss-achievements\"\n          >\n            <X className=\"h-4 w-4\" />\n          </Button>\n        </div>\n\n        {/* Achievement Preview */}\n        <div className=\"mt-4 space-y-3\">\n          {newAchievements.slice(0, 2).map(achievement => (\n            <div \n              key={achievement.id}\n              className={cn(\n                \"flex items-center space-x-3 p-2 rounded-lg\",\n                getRarityColor(achievement.rarity)\n              )}\n            >\n              <div className=\"flex-shrink-0 text-2xl\">\n                {achievement.icon}\n              </div>\n              <div className=\"flex-1\">\n                <p className=\"font-medium text-sm\">{achievement.name}</p>\n                <p className=\"text-xs text-gray-600\">{achievement.description}</p>\n              </div>\n              <Badge variant=\"secondary\" className=\"text-xs\">\n                {achievement.rarity}\n              </Badge>\n            </div>\n          ))}\n          \n          {newAchievements.length > 2 && (\n            <div className=\"text-center text-sm text-gray-500\">\n              +{newAchievements.length - 2} more achievement{newAchievements.length - 2 > 1 ? 's' : ''}\n            </div>\n          )}\n        </div>\n\n        {/* Action Buttons */}\n        <div className=\"flex justify-between items-center mt-4 pt-3 border-t border-gray-200\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={handleDismiss}\n            data-testid=\"button-mark-all-viewed\"\n          >\n            Mark All Viewed\n          </Button>\n          <Button\n            variant=\"default\"\n            size=\"sm\"\n            onClick={() => window.location.href = \"/achievements\"}\n            data-testid=\"button-view-all-achievements\"\n          >\n            View All Achievements\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":4834},"client/src/components/actions/action-item.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useUpdateAction } from \"@/hooks/use-actions\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Action, ActionStatus, ActionPriority } from \"@shared/schema\";\nimport { useLocation } from \"wouter\";\n\ninterface ActionItemProps {\n  action: Action;\n}\n\nexport default function ActionItem({ action }: ActionItemProps) {\n  const updateAction = useUpdateAction();\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n\n  const handleStatusChange = async (newStatus: string) => {\n    try {\n      await updateAction.mutateAsync({\n        id: action.id,\n        updates: { status: newStatus }\n      });\n      toast({\n        title: \"Success\",\n        description: \"Action status updated!\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update action status\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleViewMeeting = () => {\n    if (action.meetingId) {\n      setLocation(`/meetings?highlight=${action.meetingId}&action=${action.id}`);\n    }\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case ActionPriority.HIGH:\n        return \"border-l-red-500 bg-red-50\";\n      case ActionPriority.MEDIUM:\n        return \"border-l-yellow-500 bg-yellow-50\";\n      case ActionPriority.LOW:\n        return \"border-l-green-500 bg-green-50\";\n      default:\n        return \"border-l-gray-500 bg-white\";\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case ActionStatus.COMPLETED:\n        return \"bg-green-100 text-green-800\";\n      case ActionStatus.IN_PROGRESS:\n        return \"bg-blue-100 text-blue-800\";\n      case ActionStatus.PENDING:\n        return \"bg-gray-100 text-gray-800\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  return (\n    <div className={`p-4 rounded-lg shadow-sm border-l-4 mb-3 ${getPriorityColor(action.priority)} ${\n      action.status === ActionStatus.COMPLETED ? 'opacity-75' : ''\n    }`}>\n      <div className=\"flex justify-between items-start mb-2\">\n        <h4 className=\"font-semibold text-gray-900\">{action.text}</h4>\n        <div className=\"flex items-center space-x-2\">\n          <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(action.status)}`}>\n            {action.status === 'in-progress' ? 'In Progress' : \n             action.status.charAt(0).toUpperCase() + action.status.slice(1)}\n          </span>\n          <Select value={action.status} onValueChange={handleStatusChange}>\n            <SelectTrigger className=\"w-32 h-8\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value={ActionStatus.PENDING}>Pending</SelectItem>\n              <SelectItem value={ActionStatus.IN_PROGRESS}>In Progress</SelectItem>\n              <SelectItem value={ActionStatus.COMPLETED}>Completed</SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n      </div>\n      \n      <div className=\"text-sm text-gray-600\">\n        <p>\n          <strong>Priority:</strong> {action.priority} | \n          <strong> Assigned to:</strong> {action.assignee} | \n          <strong> From:</strong> {action.employeeName}\n        </p>\n        {action.status === ActionStatus.IN_PROGRESS && (\n          <p className=\"text-blue-600 mt-1\">ðŸ”„ In Progress</p>\n        )}\n        {action.meetingId && (\n          <Button\n            variant=\"link\"\n            size=\"sm\"\n            onClick={handleViewMeeting}\n            className=\"text-blue-600 hover:text-blue-800 p-0 h-auto mt-2\"\n          >\n            ðŸ“ View Meeting Notes\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":3873},"client/src/components/actions/add-action-form.tsx":{"content":"import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useCreateAction } from \"@/hooks/use-actions\";\nimport { useEmployees } from \"@/hooks/use-employees\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { insertActionSchema, ActionStatus, ActionPriority } from \"@shared/schema\";\nimport { X } from \"lucide-react\";\n\ninterface AddActionFormProps {\n  meetingId: number;\n  employeeName: string;\n  onSuccess?: () => void;\n  onCancel?: () => void;\n}\n\nconst formSchema = insertActionSchema.extend({\n  text: z.string().min(1, \"Action description is required\"),\n  assignee: z.string().min(1, \"Assignee is required\"),\n  priority: z.string().min(1, \"Priority is required\"),\n}).omit({ userId: true });\n\nexport default function AddActionForm({ meetingId, employeeName, onSuccess, onCancel }: AddActionFormProps) {\n  const createAction = useCreateAction();\n  const { data: employees = [] } = useEmployees();\n  const { user } = useAuth();\n  const { toast } = useToast();\n\n  const form = useForm<z.infer<typeof formSchema>>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      text: \"\",\n      assignee: \"\",\n      status: ActionStatus.PENDING,\n      priority: ActionPriority.MEDIUM,\n      meetingId,\n      employeeName,\n    },\n  });\n\n  const handleSubmit = async (values: z.infer<typeof formSchema>) => {\n    console.log('Form submission started:', values);\n    console.log('User data:', user);\n    \n    try {\n      const actionData = {\n        ...values,\n        userId: (user as any)?.id || (user as any)?.email || 'unknown',\n      };\n      \n      console.log('Submitting action:', actionData);\n      \n      await createAction.mutateAsync(actionData);\n      \n      toast({\n        title: \"Success\",\n        description: \"Action item created successfully!\",\n      });\n      form.reset();\n      onSuccess?.();\n    } catch (error) {\n      console.error('Action creation failed:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to create action item\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  return (\n    <Card className=\"mt-4\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-sm font-medium\">Add Action Item</CardTitle>\n          {onCancel && (\n            <Button variant=\"ghost\" size=\"sm\" onClick={onCancel}>\n              <X className=\"w-4 h-4\" />\n            </Button>\n          )}\n        </div>\n      </CardHeader>\n      <CardContent className=\"pt-0\">\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"text\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Action Description</FormLabel>\n                  <FormControl>\n                    <Textarea\n                      placeholder=\"Describe the action item...\"\n                      className=\"min-h-[80px]\"\n                      {...field}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"assignee\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Assignee</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value}>\n                      <FormControl>\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select assignee\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"me\">Me</SelectItem>\n                        {employees.map((employee) => (\n                          <SelectItem key={employee.id} value={employee.name}>\n                            {employee.name}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"priority\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Priority</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value}>\n                      <FormControl>\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select priority\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value={ActionPriority.LOW}>Low</SelectItem>\n                        <SelectItem value={ActionPriority.MEDIUM}>Medium</SelectItem>\n                        <SelectItem value={ActionPriority.HIGH}>High</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"flex space-x-2 pt-2\">\n              <Button \n                type=\"submit\" \n                disabled={createAction.isPending}\n                onClick={(e) => {\n                  console.log('Add Action button clicked');\n                  // Form validation and submission will be handled automatically\n                }}\n              >\n                {createAction.isPending ? \"Creating...\" : \"Add Action\"}\n              </Button>\n              {onCancel && (\n                <Button type=\"button\" variant=\"outline\" onClick={onCancel}>\n                  Cancel\n                </Button>\n              )}\n            </div>\n          </form>\n        </Form>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":6593},"client/src/components/dashboard/priority-actions.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useActions, useUpdateAction } from \"@/hooks/use-actions\";\nimport { useMeetings } from \"@/hooks/use-meetings\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { ActionPriority, ActionStatus } from \"@shared/schema\";\nimport { useLocation } from \"wouter\";\n\nexport default function PriorityActions() {\n  const { data: actions = [] } = useActions();\n  const { data: meetings = [] } = useMeetings();\n  const updateAction = useUpdateAction();\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n\n  const priorityActions = actions\n    .filter(action => action.status !== ActionStatus.COMPLETED)\n    .sort((a, b) => {\n      const priorityOrder = { high: 3, medium: 2, low: 1 };\n      const aPriority = priorityOrder[a.priority as keyof typeof priorityOrder] || 1;\n      const bPriority = priorityOrder[b.priority as keyof typeof priorityOrder] || 1;\n      \n      if (aPriority !== bPriority) return bPriority - aPriority;\n      if (a.assignee === 'me' && b.assignee !== 'me') return -1;\n      if (a.assignee !== 'me' && b.assignee === 'me') return 1;\n      return 0;\n    })\n    .slice(0, 5);\n\n  const handleMarkComplete = async (actionId: number) => {\n    try {\n      await updateAction.mutateAsync({\n        id: actionId,\n        updates: { status: ActionStatus.COMPLETED }\n      });\n      toast({\n        title: \"Success\",\n        description: \"Action marked as complete!\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update action\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleViewMeeting = (actionId: number) => {\n    const action = actions.find(a => a.id === actionId);\n    if (action?.meetingId) {\n      setLocation(`/meetings?highlight=${action.meetingId}`);\n    }\n  };\n\n  const getPriorityBadge = (priority: string) => {\n    switch (priority) {\n      case ActionPriority.HIGH:\n        return \"priority-badge-high\";\n      case ActionPriority.MEDIUM:\n        return \"priority-badge-medium\";\n      case ActionPriority.LOW:\n        return \"priority-badge-low\";\n      default:\n        return \"priority-badge-medium\";\n    }\n  };\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case ActionStatus.PENDING:\n        return \"status-badge-pending\";\n      case ActionStatus.IN_PROGRESS:\n        return \"status-badge-in-progress\";\n      case ActionStatus.COMPLETED:\n        return \"status-badge-completed\";\n      default:\n        return \"status-badge-pending\";\n    }\n  };\n\n  return (\n    <Card className=\"lg:col-span-2\">\n      <CardHeader className=\"flex flex-row items-center justify-between\">\n        <CardTitle>Priority Action Items</CardTitle>\n        <Button variant=\"ghost\" onClick={() => setLocation('/actions')}>\n          View All\n        </Button>\n      </CardHeader>\n      <CardContent className=\"divide-y divide-gray-200\">\n        {priorityActions.length === 0 ? (\n          <div className=\"p-6 text-center text-gray-500\">\n            No active action items\n          </div>\n        ) : (\n          priorityActions.map((action) => (\n            <div key={action.id} className=\"p-6 hover:bg-gray-50 transition-colors duration-150\">\n              <div className=\"flex items-start space-x-3\">\n                <div className=\"flex-shrink-0\">\n                  <span className={getPriorityBadge(action.priority)}>\n                    {action.priority.charAt(0).toUpperCase() + action.priority.slice(1)}\n                  </span>\n                </div>\n                <div className=\"min-w-0 flex-1\">\n                  <p className=\"text-sm font-medium text-gray-900\">{action.text}</p>\n                  <p className=\"text-sm text-gray-500 mt-1\">\n                    Assigned to: {action.assignee} â€¢ From: {action.employeeName}\n                  </p>\n                  <div className=\"mt-2 flex items-center space-x-2\">\n                    {action.assignee === 'me' && action.status !== ActionStatus.COMPLETED && (\n                      <Button\n                        size=\"sm\"\n                        className=\"bg-green-600 hover:bg-green-700\"\n                        onClick={() => handleMarkComplete(action.id)}\n                        disabled={updateAction.isPending}\n                      >\n                        Mark Complete\n                      </Button>\n                    )}\n                    {action.meetingId && (\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => handleViewMeeting(action.id)}\n                      >\n                        View Meeting\n                      </Button>\n                    )}\n                  </div>\n                </div>\n                <div className=\"flex-shrink-0\">\n                  <span className={getStatusBadge(action.status)}>\n                    {action.status === 'in-progress' ? 'In Progress' : \n                     action.status.charAt(0).toUpperCase() + action.status.slice(1)}\n                  </span>\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":5265},"client/src/components/dashboard/quick-actions.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Plus, UserPlus, FileDown } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\nimport MeetingForm from \"@/components/meetings/meeting-form\";\n\nexport default function QuickActions() {\n  const [, setLocation] = useLocation();\n  const [showMeetingDialog, setShowMeetingDialog] = useState(false);\n\n  const handleExportData = () => {\n    setLocation('/settings?tab=export');\n  };\n\n  const handleMeetingSuccess = () => {\n    setShowMeetingDialog(false);\n  };\n\n  return (\n    <>\n      <Card>\n        <CardHeader>\n          <CardTitle>Quick Actions</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-3\">\n          <Button \n            className=\"w-full bg-blue-600 hover:bg-blue-700\"\n            onClick={() => setShowMeetingDialog(true)}\n          >\n            <Plus className=\"mr-2 h-4 w-4\" />\n            New Meeting\n          </Button>\n        <Button \n          variant=\"outline\" \n          className=\"w-full\"\n          onClick={() => setLocation('/team?new=true')}\n        >\n          <UserPlus className=\"mr-2 h-4 w-4\" />\n          Add Team Member\n        </Button>\n        <Button \n          variant=\"outline\" \n          className=\"w-full\"\n          onClick={handleExportData}\n        >\n          <FileDown className=\"mr-2 h-4 w-4\" />\n          Export Data\n        </Button>\n      </CardContent>\n    </Card>\n\n    <Dialog open={showMeetingDialog} onOpenChange={setShowMeetingDialog}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Create New Meeting</DialogTitle>\n        </DialogHeader>\n        <MeetingForm \n          onSuccess={handleMeetingSuccess} \n          onCancel={() => setShowMeetingDialog(false)}\n        />\n      </DialogContent>\n    </Dialog>\n    </>\n  );\n}\n","size_bytes":2038},"client/src/components/dashboard/recent-meetings.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { useMeetings } from \"@/hooks/use-meetings\";\nimport { useLocation } from \"wouter\";\n\nexport default function RecentMeetings() {\n  const { data: meetings = [] } = useMeetings();\n  const [, setLocation] = useLocation();\n\n  const recentMeetings = meetings\n    .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())\n    .slice(0, 5);\n\n  const getInitials = (name: string) => {\n    return name.split(' ').map(n => n[0]).join('').toUpperCase();\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric' \n    });\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Recent Meetings</CardTitle>\n      </CardHeader>\n      <CardContent className=\"divide-y divide-gray-200\">\n        {recentMeetings.length === 0 ? (\n          <div className=\"p-4 text-center text-gray-500\">\n            No meetings found\n          </div>\n        ) : (\n          recentMeetings.map((meeting) => (\n            <div \n              key={meeting.id} \n              className=\"p-4 hover:bg-gray-50 cursor-pointer\"\n              onClick={() => setLocation(`/meetings?highlight=${meeting.id}`)}\n            >\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"flex-shrink-0\">\n                  <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\n                    <span className=\"text-blue-600 text-xs font-medium\">\n                      {getInitials(meeting.employeeName)}\n                    </span>\n                  </div>\n                </div>\n                <div className=\"min-w-0 flex-1\">\n                  <p className=\"text-sm font-medium text-gray-900\">\n                    {meeting.title || `Meeting with ${meeting.employeeName}`}\n                  </p>\n                  <p className=\"text-sm text-gray-500\">\n                    {meeting.employeeName} â€¢ {formatDate(meeting.date)}\n                  </p>\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n        <div className=\"px-6 py-3 border-t border-gray-200\">\n          <Button \n            variant=\"ghost\" \n            className=\"w-full text-center\"\n            onClick={() => setLocation('/meetings')}\n          >\n            View All Meetings\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":2539},"client/src/components/dashboard/stats-card.tsx":{"content":"import { LucideIcon } from \"lucide-react\";\n\ninterface StatsCardProps {\n  title: string;\n  value: number;\n  icon: LucideIcon;\n  iconColor: string;\n  iconBgColor: string;\n}\n\nexport default function StatsCard({ title, value, icon: Icon, iconColor, iconBgColor }: StatsCardProps) {\n  return (\n    <div className=\"stats-card\">\n      <div className=\"p-5\">\n        <div className=\"flex items-center\">\n          <div className=\"flex-shrink-0\">\n            <div className={`w-8 h-8 ${iconBgColor} rounded-md flex items-center justify-center`}>\n              <Icon className={`${iconColor} h-4 w-4`} />\n            </div>\n          </div>\n          <div className=\"ml-5 w-0 flex-1\">\n            <dl>\n              <dt className=\"text-sm font-medium text-gray-500 truncate\">{title}</dt>\n              <dd className=\"text-lg font-semibold text-gray-900\">{value}</dd>\n            </dl>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":936},"client/src/components/insights/meeting-insights.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { useMeetingInsights } from \"@/hooks/use-insights\";\nimport { \n  Brain, \n  TrendingUp, \n  CheckCircle, \n  ArrowRight, \n  Target, \n  MessageSquare,\n  Star,\n  AlertTriangle,\n  Lightbulb\n} from \"lucide-react\";\n\ninterface MeetingInsightsProps {\n  meetingId: number;\n  meetingTitle: string;\n}\n\nexport default function MeetingInsights({ meetingId, meetingTitle }: MeetingInsightsProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const { data: insights, isLoading, error, refetch } = useMeetingInsights(meetingId, isOpen);\n\n  const handleGenerateInsights = () => {\n    setIsOpen(true);\n    refetch();\n  };\n\n  const getSentimentColor = (tone: string) => {\n    switch (tone) {\n      case 'positive': return 'bg-green-100 text-green-800 border-green-200';\n      case 'negative': return 'bg-red-100 text-red-800 border-red-200';\n      default: return 'bg-gray-100 text-gray-800 border-gray-200';\n    }\n  };\n\n  const getEffectivenessColor = (score: number) => {\n    if (score >= 8) return 'text-green-600';\n    if (score >= 6) return 'text-yellow-600';\n    return 'text-red-600';\n  };\n\n  if (!isOpen) {\n    return (\n      <Card className=\"mt-4\">\n        <CardContent className=\"p-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-2\">\n              <Brain className=\"h-5 w-5 text-blue-600\" />\n              <span className=\"font-medium\">AI Meeting Insights</span>\n            </div>\n            <Button onClick={handleGenerateInsights} disabled={isLoading}>\n              {isLoading ? \"Generating...\" : \"Generate Insights\"}\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (error) {\n    const errorMessage = error?.message || 'Failed to generate insights. Please try again.';\n    const isQuotaError = errorMessage.includes('quota exceeded');\n    \n    return (\n      <Card className=\"mt-4 border-red-200\">\n        <CardContent className=\"p-4\">\n          <div className=\"space-y-3\">\n            <div className=\"flex items-start space-x-2 text-red-700\">\n              <AlertTriangle className=\"h-5 w-5 mt-0.5 flex-shrink-0\" />\n              <div className=\"flex-1\">\n                <p className=\"font-medium\">AI Insights Unavailable</p>\n                <p className=\"text-sm text-red-600 mt-1\">{errorMessage}</p>\n                {isQuotaError && (\n                  <p className=\"text-xs text-gray-600 mt-2\">\n                    To restore AI insights, please check your Google AI billing at aistudio.google.com\n                  </p>\n                )}\n              </div>\n            </div>\n            {!isQuotaError && (\n              <Button variant=\"outline\" size=\"sm\" onClick={() => refetch()}>\n                Retry\n              </Button>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (isLoading) {\n    return (\n      <Card className=\"mt-4\">\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center justify-center space-x-2\">\n            <Brain className=\"h-5 w-5 animate-pulse text-blue-600\" />\n            <span>Analyzing meeting with AI...</span>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (!insights) return null;\n\n  return (\n    <Card className=\"mt-4\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"flex items-center space-x-2\">\n            <Brain className=\"h-5 w-5 text-blue-600\" />\n            <span>AI Meeting Insights</span>\n          </CardTitle>\n          <Button variant=\"ghost\" size=\"sm\" onClick={() => setIsOpen(false)}>\n            Ã—\n          </Button>\n        </div>\n      </CardHeader>\n      <CardContent>\n        <Tabs defaultValue=\"overview\" className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-4\">\n            <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n            <TabsTrigger value=\"actions\">Actions</TabsTrigger>\n            <TabsTrigger value=\"sentiment\">Sentiment</TabsTrigger>\n            <TabsTrigger value=\"effectiveness\">Effectiveness</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"overview\" className=\"space-y-4\">\n            <div>\n              <h4 className=\"font-medium flex items-center mb-2\">\n                <Target className=\"h-4 w-4 mr-1\" />\n                Key Discussion Points\n              </h4>\n              <ul className=\"space-y-1\">\n                {insights.keyPoints.map((point, index) => (\n                  <li key={index} className=\"flex items-start space-x-2 text-sm\">\n                    <CheckCircle className=\"h-3 w-3 mt-1 text-green-600 flex-shrink-0\" />\n                    <span>{point}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n\n            <div>\n              <h4 className=\"font-medium flex items-center mb-2\">\n                <ArrowRight className=\"h-4 w-4 mr-1\" />\n                Next Steps\n              </h4>\n              <ul className=\"space-y-1\">\n                {insights.nextSteps.map((step, index) => (\n                  <li key={index} className=\"flex items-start space-x-2 text-sm\">\n                    <ArrowRight className=\"h-3 w-3 mt-1 text-blue-600 flex-shrink-0\" />\n                    <span>{step}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"actions\" className=\"space-y-4\">\n            <div>\n              <h4 className=\"font-medium flex items-center mb-2\">\n                <Lightbulb className=\"h-4 w-4 mr-1 text-yellow-600\" />\n                Recommended Actions\n              </h4>\n              <ul className=\"space-y-2\">\n                {insights.actionRecommendations.map((action, index) => (\n                  <li key={index} className=\"p-2 bg-yellow-50 rounded border-l-4 border-yellow-400 text-sm\">\n                    {action}\n                  </li>\n                ))}\n              </ul>\n            </div>\n\n            <div>\n              <h4 className=\"font-medium flex items-center mb-2\">\n                <MessageSquare className=\"h-4 w-4 mr-1 text-blue-600\" />\n                Follow-up Suggestions\n              </h4>\n              <ul className=\"space-y-1\">\n                {insights.followUpSuggestions.map((suggestion, index) => (\n                  <li key={index} className=\"flex items-start space-x-2 text-sm\">\n                    <ArrowRight className=\"h-3 w-3 mt-1 text-blue-600 flex-shrink-0\" />\n                    <span>{suggestion}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"sentiment\" className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <h4 className=\"font-medium\">Meeting Tone</h4>\n              <Badge className={getSentimentColor(insights.sentimentAnalysis.tone)}>\n                {insights.sentimentAnalysis.tone.charAt(0).toUpperCase() + insights.sentimentAnalysis.tone.slice(1)}\n              </Badge>\n            </div>\n            <p className=\"text-sm text-gray-700\">{insights.sentimentAnalysis.summary}</p>\n            <div className=\"text-xs text-gray-500\">\n              Confidence: {Math.round(insights.sentimentAnalysis.confidence * 100)}%\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"effectiveness\" className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <h4 className=\"font-medium\">Meeting Effectiveness</h4>\n              <div className=\"flex items-center space-x-2\">\n                <Star className={`h-5 w-5 ${getEffectivenessColor(insights.effectiveness.score)}`} />\n                <span className={`font-bold ${getEffectivenessColor(insights.effectiveness.score)}`}>\n                  {insights.effectiveness.score}/10\n                </span>\n              </div>\n            </div>\n\n            <div>\n              <h5 className=\"font-medium text-green-700 mb-2\">Strengths</h5>\n              <ul className=\"space-y-1\">\n                {insights.effectiveness.strengths.map((strength, index) => (\n                  <li key={index} className=\"flex items-start space-x-2 text-sm\">\n                    <CheckCircle className=\"h-3 w-3 mt-1 text-green-600 flex-shrink-0\" />\n                    <span>{strength}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n\n            <div>\n              <h5 className=\"font-medium text-orange-700 mb-2\">Areas for Improvement</h5>\n              <ul className=\"space-y-1\">\n                {insights.effectiveness.improvements.map((improvement, index) => (\n                  <li key={index} className=\"flex items-start space-x-2 text-sm\">\n                    <TrendingUp className=\"h-3 w-3 mt-1 text-orange-600 flex-shrink-0\" />\n                    <span>{improvement}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          </TabsContent>\n        </Tabs>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":9362},"client/src/components/insights/team-insights.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useTeamInsights } from \"@/hooks/use-insights\";\nimport { Brain, Users, TrendingUp, AlertTriangle } from \"lucide-react\";\n\nexport default function TeamInsights() {\n  const [isOpen, setIsOpen] = useState(false);\n  const { data, isLoading, error, refetch } = useTeamInsights(isOpen);\n\n  const handleGenerateInsights = () => {\n    setIsOpen(true);\n    refetch();\n  };\n\n  if (!isOpen) {\n    return (\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"p-2 bg-purple-100 rounded-lg\">\n                <Users className=\"h-6 w-6 text-purple-600\" />\n              </div>\n              <div>\n                <h3 className=\"font-semibold\">Team Insights</h3>\n                <p className=\"text-sm text-gray-600\">AI-powered team analysis</p>\n              </div>\n            </div>\n            <Button onClick={handleGenerateInsights} disabled={isLoading}>\n              <Brain className=\"h-4 w-4 mr-2\" />\n              {isLoading ? \"Analyzing...\" : \"Generate Insights\"}\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (error) {\n    const errorMessage = error?.message || 'Failed to generate team insights. Please try again.';\n    const isQuotaError = errorMessage.includes('quota exceeded');\n    \n    return (\n      <Card className=\"border-red-200\">\n        <CardContent className=\"p-6\">\n          <div className=\"space-y-3\">\n            <div className=\"flex items-start space-x-2 text-red-700\">\n              <AlertTriangle className=\"h-5 w-5 mt-0.5 flex-shrink-0\" />\n              <div className=\"flex-1\">\n                <p className=\"font-medium\">AI Team Insights Unavailable</p>\n                <p className=\"text-sm text-red-600 mt-1\">{errorMessage}</p>\n                {isQuotaError && (\n                  <p className=\"text-xs text-gray-600 mt-2\">\n                    To restore AI insights, please check your Google AI billing at aistudio.google.com\n                  </p>\n                )}\n              </div>\n            </div>\n            {!isQuotaError && (\n              <Button variant=\"outline\" size=\"sm\" onClick={() => refetch()}>\n                Retry\n              </Button>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center justify-center space-x-2\">\n            <Brain className=\"h-6 w-6 animate-pulse text-purple-600\" />\n            <span>Analyzing team patterns with AI...</span>\n          </div>\n          <div className=\"mt-4 space-y-2\">\n            <div className=\"h-3 bg-gray-200 rounded animate-pulse\"></div>\n            <div className=\"h-3 bg-gray-200 rounded animate-pulse w-3/4\"></div>\n            <div className=\"h-3 bg-gray-200 rounded animate-pulse w-1/2\"></div>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (!data) return null;\n\n  return (\n    <Card>\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"flex items-center space-x-2\">\n            <Users className=\"h-5 w-5 text-purple-600\" />\n            <span>AI Team Insights</span>\n          </CardTitle>\n          <div className=\"flex items-center space-x-2\">\n            <span className=\"text-sm text-gray-500\">\n              Based on {data.meetingCount} recent meetings\n            </span>\n            <Button variant=\"ghost\" size=\"sm\" onClick={() => setIsOpen(false)}>\n              Ã—\n            </Button>\n          </div>\n        </div>\n      </CardHeader>\n      <CardContent>\n        <div className=\"prose prose-sm max-w-none\">\n          <div className=\"whitespace-pre-wrap text-gray-700 leading-relaxed\">\n            {data.insights}\n          </div>\n        </div>\n        <div className=\"mt-4 pt-4 border-t\">\n          <Button \n            variant=\"outline\" \n            size=\"sm\" \n            onClick={() => refetch()}\n            className=\"flex items-center space-x-2\"\n          >\n            <TrendingUp className=\"h-4 w-4\" />\n            <span>Refresh Analysis</span>\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":4457},"client/src/components/layout/main-layout.tsx":{"content":"import { ReactNode } from \"react\";\nimport Sidebar from \"./sidebar\";\nimport TopBar from \"./topbar\";\n\ninterface MainLayoutProps {\n  children: ReactNode;\n}\n\nexport default function MainLayout({ children }: MainLayoutProps) {\n  return (\n    <div className=\"flex h-screen overflow-hidden\">\n      <Sidebar />\n      <div className=\"flex flex-col w-0 flex-1 overflow-hidden\">\n        <TopBar />\n        <main className=\"flex-1 relative overflow-y-auto focus:outline-none\">\n          {children}\n        </main>\n      </div>\n    </div>\n  );\n}\n","size_bytes":533},"client/src/components/layout/sidebar.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { \n  ClipboardList, \n  BarChart3, \n  CheckSquare, \n  Calendar, \n  Users, \n  Settings,\n  Shield,\n  Bell,\n  Trophy\n} from \"lucide-react\";\nimport { useStats } from \"@/hooks/use-actions\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useUserAchievements, getNewAchievementsCount } from \"@/hooks/use-achievements\";\nimport { User } from \"@shared/schema\";\n\nconst navigation = [\n  { name: 'Dashboard', href: '/', icon: BarChart3 },\n  { name: 'Action Items', href: '/actions', icon: CheckSquare },\n  { name: 'Meetings', href: '/meetings', icon: Calendar },\n  { name: 'Team Members', href: '/team', icon: Users },\n  { name: 'Achievements', href: '/achievements', icon: Trophy },\n];\n\nexport default function Sidebar() {\n  const [location] = useLocation();\n  const { data: stats } = useStats();\n  const { user } = useAuth() as { user: User | undefined };\n  const { data: achievements = [] } = useUserAchievements();\n  \n  const isAdmin = user?.role === 'admin';\n  const newAchievementCount = getNewAchievementsCount(achievements);\n\n  return (\n    <div className=\"hidden md:flex md:w-64 md:flex-col\">\n      <div className=\"flex flex-col flex-grow pt-5 overflow-y-auto bg-white border-r border-gray-200\">\n        {/* Logo/Brand */}\n        <div className=\"flex items-center flex-shrink-0 px-4\">\n          <div className=\"flex items-center\">\n            <div className=\"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center\">\n              <ClipboardList className=\"text-white\" size={16} />\n            </div>\n            <span className=\"ml-3 text-xl font-semibold text-gray-900\">MeetingTracker</span>\n          </div>\n        </div>\n\n        {/* Navigation */}\n        <nav className=\"mt-8 flex-1 px-2 space-y-1\">\n          {navigation.map((item) => {\n            const isActive = location === item.href || (item.href !== '/' && location.startsWith(item.href));\n            return (\n              <Link key={item.name} href={item.href}>\n                <div className={`sidebar-nav-item cursor-pointer ${\n                  isActive ? 'sidebar-nav-item-active' : 'sidebar-nav-item-inactive'\n                }`}>\n                  <item.icon className={`mr-3 flex-shrink-0 h-4 w-4 ${\n                    isActive ? 'text-blue-500' : 'text-gray-400 group-hover:text-gray-500'\n                  }`} />\n                  {item.name}\n                  {item.name === 'Achievements' && newAchievementCount > 0 && (\n                    <span className=\"ml-auto bg-red-500 text-white text-xs rounded-full px-2 py-0.5 min-w-[1.5rem] h-6 flex items-center justify-center\">\n                      {newAchievementCount}\n                    </span>\n                  )}\n                  {item.name === 'Action Items' && stats && (\n                    <span className=\"ml-auto bg-gray-200 text-gray-600 text-xs px-2 py-1 rounded-full\">\n                      {stats.activeActions}\n                    </span>\n                  )}\n                  {item.name === 'Meetings' && stats && (\n                    <span className=\"ml-auto bg-gray-200 text-gray-600 text-xs px-2 py-1 rounded-full\">\n                      {stats.totalMeetings}\n                    </span>\n                  )}\n                </div>\n              </Link>\n            );\n          })}\n        </nav>\n\n        {/* Settings & Admin */}\n        <div className=\"flex-shrink-0 border-t border-gray-200 p-4 space-y-1\">\n          {isAdmin && (\n            <Link href=\"/admin\">\n              <div className={`sidebar-nav-item cursor-pointer ${\n                location === '/admin' ? 'sidebar-nav-item-active' : 'sidebar-nav-item-inactive'\n              }`}>\n                <Shield className={`mr-3 flex-shrink-0 h-4 w-4 ${\n                  location === '/admin' ? 'text-blue-500' : 'text-gray-400 group-hover:text-gray-500'\n                }`} />\n                Admin Panel\n              </div>\n            </Link>\n          )}\n          <Link href=\"/notifications\">\n            <div className={`sidebar-nav-item cursor-pointer ${\n              location === '/notifications' ? 'sidebar-nav-item-active' : 'sidebar-nav-item-inactive'\n            }`}>\n              <Bell className={`mr-3 flex-shrink-0 h-4 w-4 ${\n                location === '/notifications' ? 'text-blue-500' : 'text-gray-400 group-hover:text-gray-500'\n              }`} />\n              Notifications\n            </div>\n          </Link>\n          <Link href=\"/settings\">\n            <div className={`sidebar-nav-item cursor-pointer ${\n              location === '/settings' ? 'sidebar-nav-item-active' : 'sidebar-nav-item-inactive'\n            }`}>\n              <Settings className={`mr-3 flex-shrink-0 h-4 w-4 ${\n                location === '/settings' ? 'text-blue-500' : 'text-gray-400 group-hover:text-gray-500'\n              }`} />\n              Settings\n            </div>\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":4921},"client/src/components/layout/topbar.tsx":{"content":"import { Search, Bell, Menu, X, Clock, AlertCircle } from \"lucide-react\";\nimport { useAppContext } from \"@/contexts/app-context\";\nimport { useState, useRef, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport { Action, User } from \"@shared/schema\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\nexport default function TopBar() {\n  const { searchTerm, setSearchTerm } = useAppContext();\n  const [showNotifications, setShowNotifications] = useState(false);\n  const [, setLocation] = useLocation();\n  const dropdownRef = useRef<HTMLDivElement>(null);\n  const { user } = useAuth() as { user: User | undefined };\n\n  // Always fetch actions to show count\n  const { data: actions = [] } = useQuery<Action[]>({\n    queryKey: ['/api/actions'],\n  });\n\n  const pendingActions = actions.filter(action => action.status === 'pending');\n  const highPriorityActions = actions.filter(action => action.priority === 'high' && action.status !== 'completed');\n\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setShowNotifications(false);\n      }\n    }\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  return (\n    <div className=\"relative z-10 flex-shrink-0 flex h-16 bg-white shadow-sm border-b border-gray-200\">\n      <button className=\"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 md:hidden\">\n        <Menu size={20} />\n      </button>\n      \n      <div className=\"flex-1 px-4 flex justify-between items-center\">\n        <div className=\"flex-1 flex\">\n          <div className=\"w-full flex md:ml-0\">\n            <div className=\"relative w-full text-gray-400 focus-within:text-gray-600\">\n              <div className=\"absolute inset-y-0 left-0 flex items-center pointer-events-none\">\n                <Search size={16} />\n              </div>\n              <input\n                className=\"block w-full h-full pl-8 pr-3 py-2 border-transparent text-gray-900 placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-0 focus:border-transparent\"\n                placeholder=\"Search meetings, actions, or team members...\"\n                type=\"search\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n              />\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"ml-4 flex items-center md:ml-6 space-x-3\">\n          {/* Notifications */}\n          <div className=\"relative\" ref={dropdownRef}>\n            <button \n              onClick={() => setShowNotifications(!showNotifications)}\n              className=\"p-2 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 relative\"\n            >\n              <Bell size={20} />\n              {(pendingActions.length > 0 || highPriorityActions.length > 0) && (\n                <span className=\"absolute -top-1 -right-1 h-4 w-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center\">\n                  {Math.max(pendingActions.length, highPriorityActions.length)}\n                </span>\n              )}\n            </button>\n\n            {/* Notifications Dropdown */}\n            {showNotifications && (\n              <div className=\"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50\">\n                <div className=\"p-4 border-b border-gray-200 flex items-center justify-between\">\n                  <h3 className=\"text-lg font-medium text-gray-900\">Action Items</h3>\n                  <button\n                    onClick={() => setShowNotifications(false)}\n                    className=\"text-gray-400 hover:text-gray-500\"\n                  >\n                    <X size={16} />\n                  </button>\n                </div>\n                \n                <div className=\"max-h-96 overflow-y-auto\">\n                  {actions.length === 0 ? (\n                    <div className=\"p-4 text-center text-gray-500\">\n                      <Bell size={24} className=\"mx-auto mb-2 text-gray-300\" />\n                      <p>No action items found</p>\n                    </div>\n                  ) : (\n                    <div className=\"divide-y divide-gray-100\">\n                      {/* High Priority Actions */}\n                      {highPriorityActions.length > 0 && (\n                        <div className=\"p-3 bg-red-50\">\n                          <div className=\"flex items-center mb-2\">\n                            <AlertCircle size={16} className=\"text-red-500 mr-2\" />\n                            <span className=\"text-sm font-medium text-red-700\">High Priority</span>\n                          </div>\n                          {highPriorityActions.slice(0, 3).map((action) => (\n                            <div key={action.id} className=\"mb-2 last:mb-0\">\n                              <p className=\"text-sm text-gray-900 truncate\">{action.text}</p>\n                              <p className=\"text-xs text-gray-500\">Assigned to: {action.assignee}</p>\n                            </div>\n                          ))}\n                        </div>\n                      )}\n                      \n                      {/* Pending Actions */}\n                      {pendingActions.length > 0 && (\n                        <div className=\"p-3\">\n                          <div className=\"flex items-center mb-2\">\n                            <Clock size={16} className=\"text-blue-500 mr-2\" />\n                            <span className=\"text-sm font-medium text-blue-700\">Pending Actions</span>\n                          </div>\n                          {pendingActions.slice(0, 5).map((action) => (\n                            <div key={action.id} className=\"mb-2 last:mb-0\">\n                              <p className=\"text-sm text-gray-900 truncate\">{action.text}</p>\n                              <div className=\"flex justify-between items-center\">\n                                <p className=\"text-xs text-gray-500\">Assigned to: {action.assignee}</p>\n                                <span className={`text-xs px-2 py-1 rounded-full ${\n                                  action.priority === 'high' ? 'bg-red-100 text-red-800' :\n                                  action.priority === 'medium' ? 'bg-yellow-100 text-yellow-800' :\n                                  'bg-green-100 text-green-800'\n                                }`}>\n                                  {action.priority}\n                                </span>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      )}\n                      \n                      {/* Other Actions */}\n                      {actions.filter(a => a.status !== 'pending' && (a.priority !== 'high' || a.status === 'completed')).length > 0 && (\n                        <div className=\"p-3\">\n                          <span className=\"text-sm font-medium text-gray-700 mb-2 block\">Other Actions</span>\n                          {actions.filter(a => a.status !== 'pending' && (a.priority !== 'high' || a.status === 'completed')).slice(0, 3).map((action) => (\n                            <div key={action.id} className=\"mb-2 last:mb-0\">\n                              <p className=\"text-sm text-gray-700 truncate\">{action.text}</p>\n                              <div className=\"flex justify-between items-center\">\n                                <p className=\"text-xs text-gray-500\">Assigned to: {action.assignee}</p>\n                                <span className={`text-xs px-2 py-1 rounded-full ${\n                                  action.status === 'completed' ? 'bg-green-100 text-green-800' :\n                                  action.status === 'in-progress' ? 'bg-blue-100 text-blue-800' :\n                                  'bg-gray-100 text-gray-800'\n                                }`}>\n                                  {action.status}\n                                </span>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n                \n                {actions.length > 0 && (\n                  <div className=\"p-3 border-t border-gray-200 text-center\">\n                    <button \n                      onClick={() => {\n                        setShowNotifications(false);\n                        setLocation('/actions');\n                      }}\n                      className=\"text-sm text-blue-600 hover:text-blue-500 font-medium\"\n                    >\n                      View all action items\n                    </button>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n          \n          {/* Profile */}\n          <div className=\"relative\">\n            <button \n              onClick={() => window.location.href = '/api/logout'}\n              className=\"max-w-xs bg-white flex items-center text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 hover:bg-gray-50\"\n              title=\"Click to sign out\"\n            >\n              {user?.profileImageUrl ? (\n                <img \n                  src={user.profileImageUrl} \n                  alt=\"Profile\" \n                  className=\"h-8 w-8 rounded-full object-cover\"\n                />\n              ) : (\n                <div className=\"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center text-white text-sm font-medium\">\n                  {user?.firstName?.[0]?.toUpperCase() || user?.email?.[0]?.toUpperCase() || 'U'}\n                </div>\n              )}\n              <span className=\"hidden md:block ml-2 text-gray-700 text-sm font-medium\">\n                {user?.firstName ? `${user.firstName}${user.lastName ? ` ${user.lastName}` : ''}` : user?.email || 'User'}\n              </span>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":10332},"client/src/components/meetings/meeting-card.tsx":{"content":"import { useState, useEffect, useRef } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useUpdateMeeting, useDeleteMeeting } from \"@/hooks/use-meetings\";\nimport { useActions } from \"@/hooks/use-actions\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Meeting } from \"@shared/schema\";\nimport { formatMarkdownToJSX, renderMarkdownLine, injectHighlightMarkers } from \"@/lib/markdown\";\nimport ActionItem from \"../actions/action-item\";\nimport AddActionForm from \"../actions/add-action-form\";\nimport MeetingInsights from \"../insights/meeting-insights\";\nimport { Plus, Trash2, MoreHorizontal } from \"lucide-react\";\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from \"@/components/ui/alert-dialog\";\n\ninterface MeetingCardProps {\n  meeting: Meeting;\n  isHighlighted?: boolean;\n  highlightedActionId?: number | null;\n}\n\nexport default function MeetingCard({ meeting, isHighlighted, highlightedActionId }: MeetingCardProps) {\n  const [isEditing, setIsEditing] = useState(false);\n  const [showAddAction, setShowAddAction] = useState(false);\n  const [notes, setNotes] = useState(meeting.notes);\n  const updateMeeting = useUpdateMeeting();\n  const deleteMeeting = useDeleteMeeting();\n  const { data: actions = [], isLoading: actionsLoading } = useActions();\n  const { toast } = useToast();\n  const notesRef = useRef<HTMLDivElement>(null);\n\n  const meetingActions = actions.filter(action => action.meetingId === meeting.id);\n  \n  // Find the highlighted action and prepare notes with highlighting\n  const highlightedAction = highlightedActionId ? actions.find(a => a.id === highlightedActionId) : null;\n  const notesForDisplay = highlightedAction?.noteExcerpt \n    ? injectHighlightMarkers(meeting.notes, highlightedAction.noteExcerpt)\n    : meeting.notes;\n  \n  const formattedNotes = formatMarkdownToJSX(notesForDisplay);\n\n  // Scroll to highlighted text when highlighted action changes\n  useEffect(() => {\n    if (highlightedActionId && notesRef.current && !actionsLoading) {\n      setTimeout(() => {\n        const highlightedElement = notesRef.current?.querySelector('.scroll-target');\n        if (highlightedElement) {\n          highlightedElement.scrollIntoView({ \n            behavior: 'smooth', \n            block: 'center' \n          });\n        }\n      }, 500);\n    }\n  }, [highlightedActionId, actionsLoading]);\n\n  const handleSaveNotes = async () => {\n    try {\n      await updateMeeting.mutateAsync({\n        id: meeting.id,\n        updates: { notes }\n      });\n      setIsEditing(false);\n      toast({\n        title: \"Success\",\n        description: \"Meeting notes updated!\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update meeting notes\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleCancelEdit = () => {\n    setNotes(meeting.notes);\n    setIsEditing(false);\n  };\n\n  const handleActionSuccess = () => {\n    setShowAddAction(false);\n  };\n\n  const handleCancelAddAction = () => {\n    setShowAddAction(false);\n  };\n\n  const handleDeleteMeeting = async () => {\n    try {\n      await deleteMeeting.mutateAsync(meeting.id);\n      toast({\n        title: \"Success\",\n        description: \"Meeting deleted successfully!\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete meeting\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  return (\n    <Card className={`${isHighlighted ? 'border-2 border-blue-500 bg-blue-50' : ''}`}>\n      <CardContent className=\"p-6\">\n        {isHighlighted && (\n          <div className=\"mb-4 p-2 bg-blue-100 border border-blue-300 rounded text-sm text-blue-800\">\n            ðŸŽ¯ <strong>Navigated from task</strong> - This meeting contains the action item context\n          </div>\n        )}\n        \n        <div className=\"flex justify-between items-start mb-4\">\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900\">\n              {meeting.title || `Meeting with ${meeting.employeeName}`}\n            </h3>\n            <p className=\"text-gray-500\">{new Date(meeting.date).toLocaleDateString()}</p>\n            <p className=\"text-sm text-gray-600\">{meeting.employeeName}</p>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setIsEditing(!isEditing)}\n            >\n              {isEditing ? 'Cancel' : 'Edit Notes'}\n            </Button>\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button variant=\"outline\" size=\"sm\">\n                  <MoreHorizontal className=\"h-4 w-4\" />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\">\n                <AlertDialog>\n                  <AlertDialogTrigger asChild>\n                    <DropdownMenuItem \n                      className=\"text-red-600 focus:text-red-600 cursor-pointer\"\n                      onSelect={(e) => e.preventDefault()}\n                    >\n                      <Trash2 className=\"h-4 w-4 mr-2\" />\n                      Delete Meeting\n                    </DropdownMenuItem>\n                  </AlertDialogTrigger>\n                  <AlertDialogContent>\n                    <AlertDialogHeader>\n                      <AlertDialogTitle>Delete Meeting</AlertDialogTitle>\n                      <AlertDialogDescription>\n                        Are you sure you want to delete this meeting? This action cannot be undone and will also delete any associated action items.\n                      </AlertDialogDescription>\n                    </AlertDialogHeader>\n                    <AlertDialogFooter>\n                      <AlertDialogCancel>Cancel</AlertDialogCancel>\n                      <AlertDialogAction \n                        onClick={handleDeleteMeeting}\n                        className=\"bg-red-600 hover:bg-red-700\"\n                        disabled={deleteMeeting.isPending}\n                      >\n                        {deleteMeeting.isPending ? 'Deleting...' : 'Delete'}\n                      </AlertDialogAction>\n                    </AlertDialogFooter>\n                  </AlertDialogContent>\n                </AlertDialog>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          </div>\n        </div>\n        \n        <div className=\"mb-4\">\n          <h4 className=\"font-medium mb-2\">Notes:</h4>\n          {isEditing ? (\n            <div className=\"space-y-3\">\n              <div className=\"mb-3 p-3 bg-blue-50 border border-blue-200 rounded text-sm text-blue-700\">\n                ðŸ’¡ <strong>Formatting Tips:</strong><br/>\n                â€¢ <strong># Heading</strong> for main sections<br/>\n                â€¢ <strong>## Subheading</strong> for subsections<br/>\n                â€¢ <strong>**Bold text**</strong> for emphasis<br/>\n                â€¢ <strong>- Item</strong> for bullet points\n              </div>\n              <Textarea\n                value={notes}\n                onChange={(e) => setNotes(e.target.value)}\n                className=\"font-mono text-sm min-h-[160px]\"\n                placeholder=\"Enter meeting notes with formatting...\"\n              />\n              <div className=\"flex space-x-2\">\n                <Button onClick={handleSaveNotes} disabled={updateMeeting.isPending}>\n                  Save Changes\n                </Button>\n                <Button variant=\"outline\" onClick={handleCancelEdit}>\n                  Cancel\n                </Button>\n              </div>\n            </div>\n          ) : (\n            <div ref={notesRef} className=\"space-y-1\">\n              {formattedNotes.length > 0 ? (\n                formattedNotes.map(renderMarkdownLine)\n              ) : (\n                <div className=\"text-gray-700 whitespace-pre-wrap\">{meeting.notes}</div>\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* Action Items Section */}\n        <div className=\"border-t pt-4\">\n          <div className=\"flex items-center justify-between mb-3\">\n            <h4 className=\"font-medium\">Action Items ({meetingActions.length})</h4>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setShowAddAction(!showAddAction)}\n            >\n              <Plus className=\"w-4 h-4 mr-1\" />\n              Add Action\n            </Button>\n          </div>\n          \n          {meetingActions.length > 0 && (\n            <div className=\"space-y-2 mb-4\">\n              {meetingActions.map((action) => (\n                <ActionItem key={action.id} action={action} />\n              ))}\n            </div>\n          )}\n\n          {showAddAction && (\n            <AddActionForm\n              meetingId={meeting.id}\n              employeeName={meeting.employeeName}\n              onSuccess={handleActionSuccess}\n              onCancel={handleCancelAddAction}\n            />\n          )}\n\n          {meetingActions.length === 0 && !showAddAction && (\n            <div className=\"text-sm text-gray-500 py-2\">\n              No action items yet. Click \"Add Action\" to create one.\n            </div>\n          )}\n        </div>\n\n        {/* AI Meeting Insights */}\n        <MeetingInsights \n          meetingId={meeting.id} \n          meetingTitle={meeting.title || `Meeting with ${meeting.employeeName}`}\n        />\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":9779},"client/src/components/meetings/meeting-form.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useCreateMeeting } from \"@/hooks/use-meetings\";\nimport { useEmployees } from \"@/hooks/use-employees\";\nimport { useCreateAction } from \"@/hooks/use-actions\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Plus, X, CheckCircle, AlertCircle } from \"lucide-react\";\n\ninterface DraftAction {\n  id: string;\n  text: string;\n  assignee: string;\n  priority: 'low' | 'medium' | 'high';\n  noteExcerpt?: string;\n  noteStart?: number;\n  noteEnd?: number;\n}\n\ninterface MeetingFormProps {\n  onSuccess?: () => void;\n  onCancel?: () => void;\n}\n\nexport default function MeetingForm({ onSuccess, onCancel }: MeetingFormProps) {\n  const [title, setTitle] = useState(\"\");\n  const [employeeId, setEmployeeId] = useState(\"\");\n  const [date, setDate] = useState(new Date().toISOString().split('T')[0]);\n  const [notes, setNotes] = useState(\"\");\n  const [emailRecipient, setEmailRecipient] = useState(\"\");\n  const [draftActions, setDraftActions] = useState<DraftAction[]>([]);\n  const [detectedActions, setDetectedActions] = useState<string[]>([]);\n  const [detectedActionsWithContext, setDetectedActionsWithContext] = useState<{text: string; excerpt: string; start: number; end: number}[]>([]);\n\n  const createMeeting = useCreateMeeting();\n  const createAction = useCreateAction();\n  const { data: employees = [] } = useEmployees();\n  const { user } = useAuth();\n  const { toast } = useToast();\n\n  // Detect action patterns in notes with context\n  useEffect(() => {\n    const actionPatterns = [\n      /TODO:?\\s*(.+)/gi,\n      /ACTION:?\\s*(.+)/gi,\n      /\\[ \\]\\s*(.+)/gi,\n      /@\\w+\\s*(.+)/gi,\n      /Follow up:?\\s*(.+)/gi\n    ];\n\n    const detected: {text: string; excerpt: string; start: number; end: number}[] = [];\n    for (const pattern of actionPatterns) {\n      let match;\n      while ((match = pattern.exec(notes)) !== null) {\n        if (match[1] && match[1].trim().length > 3) {\n          const actionText = match[1].trim();\n          const matchStart = match.index;\n          const matchEnd = match.index + match[0].length;\n          \n          // Create excerpt with some context around the match\n          const contextStart = Math.max(0, matchStart - 20);\n          const contextEnd = Math.min(notes.length, matchEnd + 20);\n          const excerpt = notes.substring(contextStart, contextEnd).trim();\n          \n          detected.push({\n            text: actionText,\n            excerpt,\n            start: matchStart,\n            end: matchEnd\n          });\n        }\n      }\n      pattern.lastIndex = 0; // Reset regex state\n    }\n    \n    // Remove duplicates based on text and limit to 5\n    const uniqueDetected = detected.filter((item, index, arr) => \n      arr.findIndex(other => other.text === item.text) === index\n    ).slice(0, 5);\n    \n    setDetectedActions(uniqueDetected.map(item => item.text));\n    \n    // Store the full context for when actions are created\n    setDetectedActionsWithContext(uniqueDetected);\n  }, [notes]);\n\n  const addDraftAction = (actionText: string, fromDetection = false) => {\n    let noteContext = {};\n    \n    if (fromDetection) {\n      // Find the context for this detected action\n      const contextItem = detectedActionsWithContext.find(item => item.text === actionText);\n      if (contextItem) {\n        noteContext = {\n          noteExcerpt: contextItem.excerpt,\n          noteStart: contextItem.start,\n          noteEnd: contextItem.end\n        };\n      }\n    }\n    \n    const newAction: DraftAction = {\n      id: Date.now().toString(),\n      text: actionText,\n      assignee: \"me\",\n      priority: 'medium',\n      ...noteContext\n    };\n    \n    setDraftActions(prev => [...prev, newAction]);\n    \n    if (fromDetection) {\n      // Remove from detected actions when added\n      setDetectedActions(prev => prev.filter(action => action !== actionText));\n    }\n  };\n\n  const removeDraftAction = (id: string) => {\n    setDraftActions(prev => prev.filter(action => action.id !== id));\n  };\n\n  const updateDraftAction = (id: string, field: keyof DraftAction, value: string) => {\n    setDraftActions(prev => prev.map(action => \n      action.id === id ? { ...action, [field]: value } : action\n    ));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!employeeId || !date || !notes) {\n      toast({\n        title: \"Error\",\n        description: \"Please fill in all required fields\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const employee = employees.find(emp => emp.id === parseInt(employeeId));\n    if (!employee) {\n      toast({\n        title: \"Error\",\n        description: \"Please select a valid team member\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    try {\n      // Create the meeting first\n      const meeting = await createMeeting.mutateAsync({\n        title: title || undefined,\n        employeeId: parseInt(employeeId),\n        employeeName: employee.name,\n        date,\n        notes,\n        emailRecipient: emailRecipient || undefined,\n        userId: (user as any)?.claims?.sub || '',\n      });\n\n      // Create all draft actions linked to the meeting\n      for (const draftAction of draftActions) {\n        await createAction.mutateAsync({\n          text: draftAction.text,\n          assignee: draftAction.assignee,\n          priority: draftAction.priority,\n          status: 'pending',\n          meetingId: meeting.id,\n          employeeName: employee.name,\n          userId: (user as any)?.claims?.sub || '',\n          // Include note context if available\n          noteExcerpt: draftAction.noteExcerpt,\n          noteStart: draftAction.noteStart,\n          noteEnd: draftAction.noteEnd,\n        });\n      }\n\n      toast({\n        title: \"Success\",\n        description: `Meeting saved${draftActions.length > 0 ? ` with ${draftActions.length} action items` : ''}!`,\n      });\n\n      // Reset form\n      setTitle(\"\");\n      setEmployeeId(\"\");\n      setDate(new Date().toISOString().split('T')[0]);\n      setNotes(\"\");\n      setEmailRecipient(\"\");\n      setDraftActions([]);\n      setDetectedActions([]);\n      \n      onSuccess?.();\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create meeting\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Add New Meeting</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"title\">Meeting Title (Optional)</Label>\n            <Input\n              id=\"title\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              placeholder=\"e.g., Q1 Planning Session\"\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"employee\">Team Member *</Label>\n            <Select value={employeeId} onValueChange={setEmployeeId}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select team member\" />\n              </SelectTrigger>\n              <SelectContent>\n                {employees.map((employee) => (\n                  <SelectItem key={employee.id} value={employee.id.toString()}>\n                    {employee.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div>\n            <Label htmlFor=\"date\">Date *</Label>\n            <Input\n              id=\"date\"\n              type=\"date\"\n              value={date}\n              onChange={(e) => setDate(e.target.value)}\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"emailRecipient\">Email Summary To (Optional)</Label>\n            <Input\n              id=\"emailRecipient\"\n              type=\"email\"\n              value={emailRecipient}\n              onChange={(e) => setEmailRecipient(e.target.value)}\n              placeholder=\"colleague@company.com\"\n            />\n            <p className=\"text-sm text-muted-foreground mt-1\">\n              Send meeting notes to this email address when saved\n            </p>\n          </div>\n\n          <div>\n            <Label htmlFor=\"notes\">Meeting Notes *</Label>\n            <div className=\"mb-3 p-3 bg-blue-50 border border-blue-200 rounded text-sm text-blue-700\">\n              ðŸ’¡ <strong>Smart Action Detection:</strong><br/>\n              â€¢ Type <strong>TODO:</strong> or <strong>ACTION:</strong> to create action items<br/>\n              â€¢ Use <strong>[ ]</strong> for checkboxes<br/>\n              â€¢ <strong>@username</strong> for assignments<br/>\n              â€¢ Actions will be auto-detected and you can convert them instantly!\n            </div>\n            <Textarea\n              id=\"notes\"\n              value={notes}\n              onChange={(e) => setNotes(e.target.value)}\n              placeholder=\"Enter meeting notes... Try typing 'TODO: Review budget' or 'ACTION: Send report'\"\n              className=\"font-mono text-sm min-h-[160px]\"\n            />\n            \n            {/* Detected Actions */}\n            {detectedActions.length > 0 && (\n              <div className=\"mt-3 p-3 bg-green-50 border border-green-200 rounded\">\n                <div className=\"flex items-center mb-2\">\n                  <CheckCircle className=\"h-4 w-4 text-green-600 mr-2\" />\n                  <span className=\"text-sm font-medium text-green-800\">Detected Action Items:</span>\n                </div>\n                <div className=\"space-y-2\">\n                  {detectedActions.map((action, index) => (\n                    <div key={index} className=\"flex items-center justify-between text-sm\">\n                      <span className=\"text-green-700 flex-1\">{action}</span>\n                      <Button\n                        type=\"button\"\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() => addDraftAction(action, true)}\n                        className=\"ml-2\"\n                      >\n                        <Plus className=\"h-3 w-3 mr-1\" />\n                        Add\n                      </Button>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Draft Actions */}\n          {draftActions.length > 0 && (\n            <div>\n              <Label>Action Items ({draftActions.length})</Label>\n              <div className=\"space-y-3 mt-2\">\n                {draftActions.map((action) => (\n                  <div key={action.id} className=\"p-3 border rounded-lg bg-gray-50\">\n                    <div className=\"flex items-start justify-between mb-2\">\n                      <Input\n                        value={action.text}\n                        onChange={(e) => updateDraftAction(action.id, 'text', e.target.value)}\n                        placeholder=\"Action description\"\n                        className=\"flex-1 mr-2\"\n                      />\n                      <Button\n                        type=\"button\"\n                        size=\"sm\"\n                        variant=\"ghost\"\n                        onClick={() => removeDraftAction(action.id)}\n                      >\n                        <X className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                    <div className=\"flex space-x-2\">\n                      <Select \n                        value={action.assignee} \n                        onValueChange={(value) => updateDraftAction(action.id, 'assignee', value)}\n                      >\n                        <SelectTrigger className=\"w-32\">\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"me\">Me</SelectItem>\n                          {employees.map((emp) => (\n                            <SelectItem key={emp.id} value={emp.name}>\n                              {emp.name}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                      <Select \n                        value={action.priority} \n                        onValueChange={(value) => updateDraftAction(action.id, 'priority', value as 'low' | 'medium' | 'high')}\n                      >\n                        <SelectTrigger className=\"w-24\">\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"low\">Low</SelectItem>\n                          <SelectItem value=\"medium\">Medium</SelectItem>\n                          <SelectItem value=\"high\">High</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  </div>\n                ))}\n              </div>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => addDraftAction(\"\")}\n                className=\"mt-2\"\n              >\n                <Plus className=\"h-4 w-4 mr-1\" />\n                Add Another Action\n              </Button>\n            </div>\n          )}\n\n          {draftActions.length === 0 && detectedActions.length === 0 && (\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => addDraftAction(\"\")}\n              className=\"w-full\"\n            >\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Add Action Item\n            </Button>\n          )}\n\n          <div className=\"flex space-x-3\">\n            <Button type=\"submit\" disabled={createMeeting.isPending || createAction.isPending}>\n              {(createMeeting.isPending || createAction.isPending) ? \"Saving...\" : \n               `Save Meeting${draftActions.length > 0 ? ` + ${draftActions.length} Actions` : ''}`}\n            </Button>\n            {onCancel && (\n              <Button type=\"button\" variant=\"outline\" onClick={onCancel}>\n                Cancel\n              </Button>\n            )}\n          </div>\n          \n          {draftActions.length > 0 && (\n            <div className=\"flex items-center text-sm text-gray-600 mt-2\">\n              <AlertCircle className=\"h-4 w-4 mr-1\" />\n              {draftActions.length} action item{draftActions.length !== 1 ? 's' : ''} will be created with this meeting\n            </div>\n          )}\n        </form>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":15031},"client/src/components/settings/email-settings.tsx":{"content":"import { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Switch } from '@/components/ui/switch';\nimport { useToast } from '@/hooks/use-toast';\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\nimport { Loader2, Mail, TestTube, Eye, EyeOff } from 'lucide-react';\n\ninterface User {\n  id: string;\n  email: string | null;\n  emailSenderAddress: string | null;\n  emailSenderPassword: string | null;\n  emailEnabled: boolean | null;\n}\n\nexport function EmailSettings() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [showPassword, setShowPassword] = useState(false);\n\n  const { data: user, isLoading } = useQuery<User>({\n    queryKey: ['/api/auth/user'],\n  });\n\n  const [formData, setFormData] = useState({\n    senderEmail: user?.emailSenderAddress || '',\n    senderPassword: user?.emailSenderPassword || '',\n    enabled: user?.emailEnabled || false,\n  });\n\n  const updateEmailSettings = useMutation({\n    mutationFn: async (data: { senderEmail: string; senderPassword: string; enabled: boolean }) => {\n      const response = await fetch('/api/email/settings', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data),\n      });\n      if (!response.ok) {\n        throw new Error(await response.text());\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/auth/user'] });\n      toast({\n        title: \"Email settings updated\",\n        description: \"Your email configuration has been saved successfully.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Failed to update email settings\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const testEmail = useMutation({\n    mutationFn: async (testRecipient: string) => {\n      const response = await fetch('/api/email/test', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ testRecipient }),\n      });\n      if (!response.ok) {\n        throw new Error(await response.text());\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Test email sent\",\n        description: \"Check your inbox to verify the email configuration is working.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Failed to send test email\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSave = (e: React.FormEvent) => {\n    e.preventDefault();\n    updateEmailSettings.mutate(formData);\n  };\n\n  const handleTestEmail = () => {\n    if (!formData.senderEmail) {\n      toast({\n        title: \"Email address required\",\n        description: \"Please configure your email address first.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    testEmail.mutate(formData.senderEmail);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center p-8\">\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\n      </div>\n    );\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Mail className=\"h-5 w-5\" />\n          Email Configuration\n        </CardTitle>\n        <CardDescription>\n          Configure Gmail settings to send meeting notes via email. You'll need to create an App Password in your Google Account settings.\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <form onSubmit={handleSave} className=\"space-y-6\">\n          <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"senderEmail\">Gmail Address</Label>\n              <Input\n                id=\"senderEmail\"\n                type=\"email\"\n                placeholder=\"your-email@gmail.com\"\n                value={formData.senderEmail}\n                onChange={(e) =>\n                  setFormData({ ...formData, senderEmail: e.target.value })\n                }\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"senderPassword\">Gmail App Password</Label>\n              <div className=\"relative\">\n                <Input\n                  id=\"senderPassword\"\n                  type={showPassword ? \"text\" : \"password\"}\n                  placeholder=\"16-character app password\"\n                  value={formData.senderPassword}\n                  onChange={(e) =>\n                    setFormData({ ...formData, senderPassword: e.target.value })\n                  }\n                  required\n                />\n                <Button\n                  type=\"button\"\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent\"\n                  onClick={() => setShowPassword(!showPassword)}\n                >\n                  {showPassword ? (\n                    <EyeOff className=\"h-4 w-4\" />\n                  ) : (\n                    <Eye className=\"h-4 w-4\" />\n                  )}\n                </Button>\n              </div>\n              <p className=\"text-sm text-muted-foreground\">\n                Generate an App Password in your{' '}\n                <a\n                  href=\"https://myaccount.google.com/apppasswords\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"text-blue-600 hover:underline\"\n                >\n                  Google Account settings\n                </a>\n              </p>\n            </div>\n\n            <div className=\"flex items-center space-x-2\">\n              <Switch\n                id=\"emailEnabled\"\n                checked={formData.enabled}\n                onCheckedChange={(checked) =>\n                  setFormData({ ...formData, enabled: checked })\n                }\n              />\n              <Label htmlFor=\"emailEnabled\">Enable email functionality</Label>\n            </div>\n          </div>\n\n          <div className=\"flex gap-2\">\n            <Button\n              type=\"submit\"\n              disabled={updateEmailSettings.isPending}\n            >\n              {updateEmailSettings.isPending && (\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              )}\n              Save Settings\n            </Button>\n\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={handleTestEmail}\n              disabled={testEmail.isPending || !formData.senderEmail}\n            >\n              {testEmail.isPending ? (\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              ) : (\n                <TestTube className=\"mr-2 h-4 w-4\" />\n              )}\n              Test Email\n            </Button>\n          </div>\n\n          {formData.enabled && (\n            <div className=\"rounded-lg bg-blue-50 p-4 dark:bg-blue-950\">\n              <h4 className=\"font-medium text-blue-900 dark:text-blue-100\">\n                How to set up Gmail App Password:\n              </h4>\n              <ol className=\"mt-2 list-decimal list-inside space-y-1 text-sm text-blue-800 dark:text-blue-200\">\n                <li>Go to your Google Account settings</li>\n                <li>Enable 2-Factor Authentication if not already enabled</li>\n                <li>Go to Security â†’ App passwords</li>\n                <li>Generate a new app password for \"Meeting Tracker\"</li>\n                <li>Copy the 16-character password and paste it above</li>\n              </ol>\n            </div>\n          )}\n        </form>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":7946},"client/src/components/settings/notification-schedules.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Plus, Trash2, Clock, Calendar, Settings } from \"lucide-react\";\nimport { SchedulePresets } from \"@shared/schema\";\n\ninterface NotificationSchedule {\n  id: number;\n  name: string;\n  cronPattern: string;\n  isActive: boolean;\n  notificationType: string;\n  includeActions: boolean;\n  includeMeetings: boolean;\n  includeStats: boolean;\n  customMessage?: string;\n}\n\ninterface NotificationSchedulesProps {\n  schedules: NotificationSchedule[];\n  onUpdate: () => void;\n}\n\nexport default function NotificationSchedules({ schedules, onUpdate }: NotificationSchedulesProps) {\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [newSchedule, setNewSchedule] = useState({\n    name: '',\n    cronPattern: '',\n    isActive: true,\n    notificationType: 'daily',\n    includeActions: true,\n    includeMeetings: true,\n    includeStats: true,\n    customMessage: ''\n  });\n  const { toast } = useToast();\n\n  const handleCreateSchedule = async () => {\n    try {\n      const response = await fetch('/api/notification-schedules', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify(newSchedule)\n      });\n\n      if (response.ok) {\n        toast({\n          title: \"Success\",\n          description: \"Notification schedule created!\",\n        });\n        setShowAddForm(false);\n        setNewSchedule({\n          name: '',\n          cronPattern: '',\n          isActive: true,\n          notificationType: 'daily',\n          includeActions: true,\n          includeMeetings: true,\n          includeStats: true,\n          customMessage: ''\n        });\n        onUpdate();\n      } else {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || 'Failed to create schedule');\n      }\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: `Failed to create schedule: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleDeleteSchedule = async (id: number) => {\n    try {\n      const response = await fetch(`/api/notification-schedules/${id}`, {\n        method: 'DELETE',\n        credentials: 'include'\n      });\n\n      if (response.ok || response.status === 204) {\n        toast({\n          title: \"Success\",\n          description: \"Notification schedule deleted!\",\n        });\n        onUpdate();\n      } else {\n        throw new Error('Delete failed');\n      }\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete schedule\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleToggleSchedule = async (id: number, isActive: boolean) => {\n    try {\n      const response = await fetch(`/api/notification-schedules/${id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({ isActive })\n      });\n\n      if (response.ok) {\n        toast({\n          title: \"Success\",\n          description: `Schedule ${isActive ? 'enabled' : 'disabled'}!`,\n        });\n        onUpdate();\n      } else {\n        throw new Error('Update failed');\n      }\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update schedule\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handlePresetSelect = (presetKey: string) => {\n    const preset = SchedulePresets[presetKey as keyof typeof SchedulePresets];\n    if (preset) {\n      setNewSchedule(prev => ({\n        ...prev,\n        name: preset.name,\n        cronPattern: preset.cronPattern\n      }));\n    }\n  };\n\n  const getCronDescription = (cronPattern: string) => {\n    // Simple cron pattern descriptions for common patterns\n    const patterns: { [key: string]: string } = {\n      \"0 9 * * 1-5\": \"Daily at 9:00 AM, Monday through Friday\",\n      \"0 17 * * 1-5\": \"Daily at 5:00 PM, Monday through Friday\",\n      \"0 8 * * 1\": \"Every Monday at 8:00 AM\",\n      \"0 16 * * 5\": \"Every Friday at 4:00 PM\",\n      \"0 9 * * *\": \"Daily at 9:00 AM\",\n      \"0 18 * * *\": \"Daily at 6:00 PM\"\n    };\n    return patterns[cronPattern] || \"Custom schedule\";\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h3 className=\"text-lg font-semibold\">Notification Schedules</h3>\n          <p className=\"text-sm text-gray-600\">Set up multiple notification schedules for different times and content</p>\n        </div>\n        <Button onClick={() => setShowAddForm(true)} className=\"flex items-center gap-2\">\n          <Plus className=\"h-4 w-4\" />\n          Add Schedule\n        </Button>\n      </div>\n\n      {/* Existing Schedules */}\n      <div className=\"space-y-4\">\n        {schedules.map((schedule) => (\n          <Card key={schedule.id}>\n            <CardContent className=\"p-4\">\n              <div className=\"flex justify-between items-start\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-3 mb-2\">\n                    <Clock className=\"h-4 w-4 text-blue-600\" />\n                    <h4 className=\"font-medium\">{schedule.name}</h4>\n                    <Switch\n                      checked={schedule.isActive}\n                      onCheckedChange={(checked) => handleToggleSchedule(schedule.id, checked)}\n                    />\n                  </div>\n                  <p className=\"text-sm text-gray-600 mb-2\">\n                    {getCronDescription(schedule.cronPattern)}\n                  </p>\n                  <div className=\"flex gap-4 text-xs text-gray-500\">\n                    {schedule.includeActions && <span>âœ“ Actions</span>}\n                    {schedule.includeMeetings && <span>âœ“ Meetings</span>}\n                    {schedule.includeStats && <span>âœ“ Stats</span>}\n                  </div>\n                  {schedule.customMessage && (\n                    <p className=\"text-sm text-gray-600 mt-2 italic\">\"{schedule.customMessage}\"</p>\n                  )}\n                </div>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => handleDeleteSchedule(schedule.id)}\n                  className=\"text-red-600 hover:text-red-700\"\n                >\n                  <Trash2 className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n\n        {schedules.length === 0 && (\n          <div className=\"text-center py-8 text-gray-500\">\n            <Calendar className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n            <p>No notification schedules configured</p>\n            <p className=\"text-sm\">Add your first schedule to get started</p>\n          </div>\n        )}\n      </div>\n\n      {/* Add Schedule Form */}\n      {showAddForm && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Settings className=\"h-5 w-5\" />\n              Create New Schedule\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"schedule-name\">Schedule Name</Label>\n                <Input\n                  id=\"schedule-name\"\n                  value={newSchedule.name}\n                  onChange={(e) => setNewSchedule(prev => ({ ...prev, name: e.target.value }))}\n                  placeholder=\"e.g., Morning Update\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"preset-select\">Quick Presets</Label>\n                <Select onValueChange={handlePresetSelect}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Choose a preset\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {Object.entries(SchedulePresets).map(([key, preset]) => (\n                      <SelectItem key={key} value={key}>\n                        {preset.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            <div>\n              <Label htmlFor=\"cron-pattern\">Cron Pattern</Label>\n              <Input\n                id=\"cron-pattern\"\n                value={newSchedule.cronPattern}\n                onChange={(e) => setNewSchedule(prev => ({ ...prev, cronPattern: e.target.value }))}\n                placeholder=\"0 9 * * 1-5\"\n              />\n              <p className=\"text-xs text-gray-500 mt-1\">\n                {newSchedule.cronPattern ? getCronDescription(newSchedule.cronPattern) : \"Format: minute hour day month weekday\"}\n              </p>\n            </div>\n\n            <div>\n              <Label>Content to Include</Label>\n              <div className=\"flex gap-6 mt-2\">\n                <label className=\"flex items-center gap-2\">\n                  <Switch\n                    checked={newSchedule.includeActions}\n                    onCheckedChange={(checked) => setNewSchedule(prev => ({ ...prev, includeActions: checked }))}\n                  />\n                  <span className=\"text-sm\">Action Items</span>\n                </label>\n                <label className=\"flex items-center gap-2\">\n                  <Switch\n                    checked={newSchedule.includeMeetings}\n                    onCheckedChange={(checked) => setNewSchedule(prev => ({ ...prev, includeMeetings: checked }))}\n                  />\n                  <span className=\"text-sm\">Meetings</span>\n                </label>\n                <label className=\"flex items-center gap-2\">\n                  <Switch\n                    checked={newSchedule.includeStats}\n                    onCheckedChange={(checked) => setNewSchedule(prev => ({ ...prev, includeStats: checked }))}\n                  />\n                  <span className=\"text-sm\">Statistics</span>\n                </label>\n              </div>\n            </div>\n\n            <div>\n              <Label htmlFor=\"custom-message\">Custom Message (Optional)</Label>\n              <Textarea\n                id=\"custom-message\"\n                value={newSchedule.customMessage}\n                onChange={(e) => setNewSchedule(prev => ({ ...prev, customMessage: e.target.value }))}\n                placeholder=\"Add a personal message to your notifications...\"\n                rows={2}\n              />\n            </div>\n\n            <div className=\"flex gap-3\">\n              <Button onClick={handleCreateSchedule} disabled={!newSchedule.name || !newSchedule.cronPattern}>\n                Create Schedule\n              </Button>\n              <Button variant=\"outline\" onClick={() => setShowAddForm(false)}>\n                Cancel\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}","size_bytes":11437},"client/src/components/team/employee-user-link.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { legacyApiRequest, queryClient } from \"@/lib/queryClient\";\nimport { User, Employee } from \"@shared/schema\";\nimport { Link, Unlink } from \"lucide-react\";\n\ninterface EmployeeUserLinkProps {\n  employee: Employee;\n}\n\nexport default function EmployeeUserLink({ employee }: EmployeeUserLinkProps) {\n  const [selectedUserId, setSelectedUserId] = useState<string>(\"\");\n  const { toast } = useToast();\n\n  const { data: users = [] } = useQuery<User[]>({\n    queryKey: ['/api/admin/users'],\n    retry: false,\n  });\n\n  const linkMutation = useMutation({\n    mutationFn: async (linkedUserId: string) => {\n      await legacyApiRequest(`/api/admin/employees/${employee.id}/link`, 'POST', { linkedUserId });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/employees'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/users'] });\n      toast({\n        title: \"Success\",\n        description: \"Team member linked to user successfully!\",\n      });\n      setSelectedUserId(\"\");\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to link team member to user\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const unlinkMutation = useMutation({\n    mutationFn: async () => {\n      await legacyApiRequest(`/api/admin/employees/${employee.id}/link`, 'POST', { linkedUserId: null });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/employees'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/users'] });\n      toast({\n        title: \"Success\",\n        description: \"Team member unlinked from user successfully!\",\n      });\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to unlink team member from user\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const linkedUser = users.find(u => u.id === employee.linkedUserId);\n  const availableUsers = users.filter(u => u.isApproved);\n\n  return (\n    <div className=\"flex items-center gap-2 mt-2\">\n      {employee.linkedUserId ? (\n        <div className=\"flex items-center gap-2\">\n          <Badge variant=\"secondary\" className=\"flex items-center gap-1\">\n            <Link className=\"h-3 w-3\" />\n            {linkedUser ? `${linkedUser.firstName || 'User'} ${linkedUser.lastName || ''} (${linkedUser.email})` : `User ID: ${employee.linkedUserId} (Not loaded)`}\n          </Badge>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => unlinkMutation.mutate()}\n            disabled={unlinkMutation.isPending}\n          >\n            <Unlink className=\"h-3 w-3 mr-1\" />\n            Unlink\n          </Button>\n        </div>\n      ) : (\n        <div className=\"flex items-center gap-2\">\n          <Select value={selectedUserId} onValueChange={setSelectedUserId}>\n            <SelectTrigger className=\"w-48\">\n              <SelectValue placeholder=\"Link to system user...\" />\n            </SelectTrigger>\n            <SelectContent>\n              {availableUsers.map(user => (\n                <SelectItem key={user.id} value={user.id}>\n                  {user.firstName || 'User'} {user.lastName || ''} ({user.email})\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n          <Button\n            size=\"sm\"\n            onClick={() => linkMutation.mutate(selectedUserId)}\n            disabled={!selectedUserId || linkMutation.isPending}\n          >\n            <Link className=\"h-3 w-3 mr-1\" />\n            Link\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n}","size_bytes":3956},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1128},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1858},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":791},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/progress.tsx":{"content":"import * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }","size_bytes":776},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5742},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23567},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209}},"version":1}